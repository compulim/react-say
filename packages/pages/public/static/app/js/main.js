var AD=Object.create;var UE=Object.defineProperty;var kD=Object.getOwnPropertyDescriptor;var bD=Object.getOwnPropertyNames;var OD=Object.getPrototypeOf,xD=Object.prototype.hasOwnProperty;var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var MD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bD(e))!xD.call(t,i)&&i!==r&&UE(t,i,{get:()=>e[i],enumerable:!(n=kD(e,i))||n.enumerable});return t};var Me=(t,e,r)=>(r=t!=null?AD(OD(t)):{},MD(e||!t||!t.__esModule?UE(r,"default",{value:t,enumerable:!0}):r,t));var e0=p(H=>{"use strict";var Ea=Symbol.for("react.element"),DD=Symbol.for("react.portal"),ND=Symbol.for("react.fragment"),zD=Symbol.for("react.strict_mode"),jD=Symbol.for("react.profiler"),LD=Symbol.for("react.provider"),qD=Symbol.for("react.context"),BD=Symbol.for("react.forward_ref"),FD=Symbol.for("react.suspense"),UD=Symbol.for("react.memo"),VD=Symbol.for("react.lazy"),VE=Symbol.iterator;function WD(t){return t===null||typeof t!="object"?null:(t=VE&&t[VE]||t["@@iterator"],typeof t=="function"?t:null)}var $E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KE=Object.assign,JE={};function Hs(t,e,r){this.props=t,this.context=e,this.refs=JE,this.updater=r||$E}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GE(){}GE.prototype=Hs.prototype;function eg(t,e,r){this.props=t,this.context=e,this.refs=JE,this.updater=r||$E}var tg=eg.prototype=new GE;tg.constructor=eg;KE(tg,Hs.prototype);tg.isPureReactComponent=!0;var WE=Array.isArray,QE=Object.prototype.hasOwnProperty,rg={current:null},XE={key:!0,ref:!0,__self:!0,__source:!0};function YE(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)QE.call(e,n)&&!XE.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Ea,type:t,key:s,ref:o,props:i,_owner:rg.current}}function HD(t,e){return{$$typeof:Ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ng(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ea}function $D(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var HE=/\/+/g;function Zv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$D(""+t.key):e.toString(36)}function qu(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ea:case DD:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Zv(o,0):n,WE(i)?(r="",t!=null&&(r=t.replace(HE,"$&/")+"/"),qu(i,e,r,"",function(u){return u})):i!=null&&(ng(i)&&(i=HD(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(HE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",WE(t))for(var a=0;a<t.length;a++){s=t[a];var c=n+Zv(s,a);o+=qu(s,e,r,c,i)}else if(c=WD(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=n+Zv(s,a++),o+=qu(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lu(t,e,r){if(t==null)return t;var n=[],i=0;return qu(t,n,"","",function(s){return e.call(r,s,i++)}),n}function KD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},Bu={transition:null},JD={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Bu,ReactCurrentOwner:rg};function ZE(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Lu,forEach:function(t,e,r){Lu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Lu(t,function(){e++}),e},toArray:function(t){return Lu(t,function(e){return e})||[]},only:function(t){if(!ng(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Hs;H.Fragment=ND;H.Profiler=jD;H.PureComponent=eg;H.StrictMode=zD;H.Suspense=FD;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JD;H.act=ZE;H.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=KE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)QE.call(e,c)&&!XE.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Ea,type:t.type,key:i,ref:s,props:n,_owner:o}};H.createContext=function(t){return t={$$typeof:qD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LD,_context:t},t.Consumer=t};H.createElement=YE;H.createFactory=function(t){var e=YE.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:BD,render:t}};H.isValidElement=ng;H.lazy=function(t){return{$$typeof:VD,_payload:{_status:-1,_result:t},_init:KD}};H.memo=function(t,e){return{$$typeof:UD,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=Bu.transition;Bu.transition={};try{t()}finally{Bu.transition=e}};H.unstable_act=ZE;H.useCallback=function(t,e){return St.current.useCallback(t,e)};H.useContext=function(t){return St.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return St.current.useDeferredValue(t)};H.useEffect=function(t,e){return St.current.useEffect(t,e)};H.useId=function(){return St.current.useId()};H.useImperativeHandle=function(t,e,r){return St.current.useImperativeHandle(t,e,r)};H.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return St.current.useMemo(t,e)};H.useReducer=function(t,e,r){return St.current.useReducer(t,e,r)};H.useRef=function(t){return St.current.useRef(t)};H.useState=function(t){return St.current.useState(t)};H.useSyncExternalStore=function(t,e,r){return St.current.useSyncExternalStore(t,e,r)};H.useTransition=function(){return St.current.useTransition()};H.version="18.3.1"});var rr=p((IU,t0)=>{"use strict";t0.exports=e0()});var p0=p(ae=>{"use strict";function ag(t,e){var r=t.length;t.push(e);e:for(;0<r;){var n=r-1>>>1,i=t[n];if(0<Fu(i,e))t[n]=e,t[r]=i,r=n;else break e}}function Rr(t){return t.length===0?null:t[0]}function Vu(t){if(t.length===0)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length,s=i>>>1;n<s;){var o=2*(n+1)-1,a=t[o],c=o+1,u=t[c];if(0>Fu(a,r))c<i&&0>Fu(u,a)?(t[n]=u,t[c]=r,n=c):(t[n]=a,t[o]=r,n=o);else if(c<i&&0>Fu(u,r))t[n]=u,t[c]=r,n=c;else break e}}return e}function Fu(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(r0=performance,ae.unstable_now=function(){return r0.now()}):(ig=Date,n0=ig.now(),ae.unstable_now=function(){return ig.now()-n0});var r0,ig,n0,Kr=[],Xn=[],GD=1,nr=null,it=3,Wu=!1,Qi=!1,Ia=!1,o0=typeof setTimeout=="function"?setTimeout:null,a0=typeof clearTimeout=="function"?clearTimeout:null,i0=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function cg(t){for(var e=Rr(Xn);e!==null;){if(e.callback===null)Vu(Xn);else if(e.startTime<=t)Vu(Xn),e.sortIndex=e.expirationTime,ag(Kr,e);else break;e=Rr(Xn)}}function ug(t){if(Ia=!1,cg(t),!Qi)if(Rr(Kr)!==null)Qi=!0,pg(lg);else{var e=Rr(Xn);e!==null&&dg(ug,e.startTime-t)}}function lg(t,e){Qi=!1,Ia&&(Ia=!1,a0(Ta),Ta=-1),Wu=!0;var r=it;try{for(cg(e),nr=Rr(Kr);nr!==null&&(!(nr.expirationTime>e)||t&&!l0());){var n=nr.callback;if(typeof n=="function"){nr.callback=null,it=nr.priorityLevel;var i=n(nr.expirationTime<=e);e=ae.unstable_now(),typeof i=="function"?nr.callback=i:nr===Rr(Kr)&&Vu(Kr),cg(e)}else Vu(Kr);nr=Rr(Kr)}if(nr!==null)var s=!0;else{var o=Rr(Xn);o!==null&&dg(ug,o.startTime-e),s=!1}return s}finally{nr=null,it=r,Wu=!1}}var Hu=!1,Uu=null,Ta=-1,c0=5,u0=-1;function l0(){return!(ae.unstable_now()-u0<c0)}function sg(){if(Uu!==null){var t=ae.unstable_now();u0=t;var e=!0;try{e=Uu(!0,t)}finally{e?_a():(Hu=!1,Uu=null)}}else Hu=!1}var _a;typeof i0=="function"?_a=function(){i0(sg)}:typeof MessageChannel<"u"?(og=new MessageChannel,s0=og.port2,og.port1.onmessage=sg,_a=function(){s0.postMessage(null)}):_a=function(){o0(sg,0)};var og,s0;function pg(t){Uu=t,Hu||(Hu=!0,_a())}function dg(t,e){Ta=o0(function(){t(ae.unstable_now())},e)}ae.unstable_IdlePriority=5;ae.unstable_ImmediatePriority=1;ae.unstable_LowPriority=4;ae.unstable_NormalPriority=3;ae.unstable_Profiling=null;ae.unstable_UserBlockingPriority=2;ae.unstable_cancelCallback=function(t){t.callback=null};ae.unstable_continueExecution=function(){Qi||Wu||(Qi=!0,pg(lg))};ae.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):c0=0<t?Math.floor(1e3/t):5};ae.unstable_getCurrentPriorityLevel=function(){return it};ae.unstable_getFirstCallbackNode=function(){return Rr(Kr)};ae.unstable_next=function(t){switch(it){case 1:case 2:case 3:var e=3;break;default:e=it}var r=it;it=e;try{return t()}finally{it=r}};ae.unstable_pauseExecution=function(){};ae.unstable_requestPaint=function(){};ae.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=it;it=t;try{return e()}finally{it=r}};ae.unstable_scheduleCallback=function(t,e,r){var n=ae.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:GD++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,ag(Xn,t),Rr(Kr)===null&&t===Rr(Xn)&&(Ia?(a0(Ta),Ta=-1):Ia=!0,dg(ug,r-n))):(t.sortIndex=i,ag(Kr,t),Qi||Wu||(Qi=!0,pg(lg))),t};ae.unstable_shouldYield=l0;ae.unstable_wrapCallback=function(t){var e=it;return function(){var r=it;it=e;try{return t.apply(this,arguments)}finally{it=r}}}});var h0=p((AU,d0)=>{"use strict";d0.exports=p0()});var mT=p(Kt=>{"use strict";var QD=rr(),Ht=h0();function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C_=new Set,Ga={};function us(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(Ga[t]=e,t=0;t<e.length;t++)C_.add(e[t])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ng=Object.prototype.hasOwnProperty,XD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f0={},v0={};function YD(t){return Ng.call(v0,t)?!0:Ng.call(f0,t)?!1:XD.test(t)?v0[t]=!0:(f0[t]=!0,!1)}function ZD(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eN(t,e,r,n){if(e===null||typeof e>"u"||ZD(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tm=/[\-:]([a-z])/g;function Am(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tm,Am);Je[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tm,Am);Je[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tm,Am);Je[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function km(t,e,r,n){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eN(e,r,i,n)&&(r=null),n||i===null?YD(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var kn=QD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$u=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),bm=Symbol.for("react.strict_mode"),zg=Symbol.for("react.profiler"),P_=Symbol.for("react.provider"),w_=Symbol.for("react.context"),Om=Symbol.for("react.forward_ref"),jg=Symbol.for("react.suspense"),Lg=Symbol.for("react.suspense_list"),xm=Symbol.for("react.memo"),Zn=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var R_=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var g0=Symbol.iterator;function Aa(t){return t===null||typeof t!="object"?null:(t=g0&&t[g0]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,hg;function za(t){if(hg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hg=e&&e[1]||""}return`
`+hg+t}var fg=!1;function vg(t,e){if(!t||fg)return"";fg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{fg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?za(t):""}function tN(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=vg(t.type,!1),t;case 11:return t=vg(t.type.render,!1),t;case 1:return t=vg(t.type,!0),t;default:return""}}function qg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case Js:return"Portal";case zg:return"Profiler";case bm:return"StrictMode";case jg:return"Suspense";case Lg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w_:return(t.displayName||"Context")+".Consumer";case P_:return(t._context.displayName||"Context")+".Provider";case Om:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xm:return e=t.displayName||null,e!==null?e:qg(t.type)||"Memo";case Zn:e=t._payload,t=t._init;try{return qg(t(e))}catch{}}return null}function rN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qg(e);case 8:return e===bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nN(t){var e=E_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ku(t){t._valueTracker||(t._valueTracker=nN(t))}function __(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=E_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Pl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bg(t,e){var r=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function m0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=hi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I_(t,e){e=e.checked,e!=null&&km(t,"checked",e,!1)}function Fg(t,e){I_(t,e);var r=hi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ug(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ug(t,e.type,hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function y0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ug(t,e,r){(e!=="number"||Pl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ja=Array.isArray;function oo(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+hi(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(R(92));if(ja(r)){if(1<r.length)throw Error(R(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:hi(r)}}function T_(t,e){var r=hi(e.value),n=hi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function C0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ju,k_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ju=Ju||document.createElement("div"),Ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qa(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iN=["Webkit","ms","Moz","O"];Object.keys(Ba).forEach(function(t){iN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ba[e]=Ba[t]})});function b_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ba.hasOwnProperty(t)&&Ba[t]?(""+e).trim():e+"px"}function O_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=b_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var sN=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(t,e){if(e){if(sN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function $g(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kg=null;function Mm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jg=null,ao=null,co=null;function P0(t){if(t=fc(t)){if(typeof Jg!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Gl(e),Jg(t.stateNode,t.type,e))}}function x_(t){ao?co?co.push(t):co=[t]:ao=t}function M_(){if(ao){var t=ao,e=co;if(co=ao=null,P0(t),e)for(t=0;t<e.length;t++)P0(e[t])}}function D_(t,e){return t(e)}function N_(){}var gg=!1;function z_(t,e,r){if(gg)return t(e,r);gg=!0;try{return D_(t,e,r)}finally{gg=!1,(ao!==null||co!==null)&&(N_(),M_())}}function Xa(t,e){var r=t.stateNode;if(r===null)return null;var n=Gl(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(R(231,e,typeof r));return r}var Gg=!1;if(_n)try{$s={},Object.defineProperty($s,"passive",{get:function(){Gg=!0}}),window.addEventListener("test",$s,$s),window.removeEventListener("test",$s,$s)}catch{Gg=!1}var $s;function oN(t,e,r,n,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(l){this.onError(l)}}var Fa=!1,wl=null,Rl=!1,Qg=null,aN={onError:function(t){Fa=!0,wl=t}};function cN(t,e,r,n,i,s,o,a,c){Fa=!1,wl=null,oN.apply(aN,arguments)}function uN(t,e,r,n,i,s,o,a,c){if(cN.apply(this,arguments),Fa){if(Fa){var u=wl;Fa=!1,wl=null}else throw Error(R(198));Rl||(Rl=!0,Qg=u)}}function ls(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function j_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w0(t){if(ls(t)!==t)throw Error(R(188))}function lN(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error(R(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return w0(i),t;if(s===n)return w0(i),e;s=s.sibling}throw Error(R(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?t:e}function L_(t){return t=lN(t),t!==null?q_(t):null}function q_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q_(t);if(e!==null)return e;t=t.sibling}return null}var B_=Ht.unstable_scheduleCallback,R0=Ht.unstable_cancelCallback,pN=Ht.unstable_shouldYield,dN=Ht.unstable_requestPaint,Re=Ht.unstable_now,hN=Ht.unstable_getCurrentPriorityLevel,Dm=Ht.unstable_ImmediatePriority,F_=Ht.unstable_UserBlockingPriority,El=Ht.unstable_NormalPriority,fN=Ht.unstable_LowPriority,U_=Ht.unstable_IdlePriority,Hl=null,Xr=null;function vN(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Hl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:yN,gN=Math.log,mN=Math.LN2;function yN(t){return t>>>=0,t===0?32:31-(gN(t)/mN|0)|0}var Gu=64,Qu=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _l(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=La(a):(s&=o,s!==0&&(n=La(s)))}else o=r&~i,o!==0?n=La(o):s!==0&&(n=La(s));if(n===0)return 0;if(e!==0&&e!==n&&(e&i)===0&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((n&4)!==0&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ar(e),i=1<<r,n|=t[r],e&=~i;return n}function SN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CN(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ar(s),a=1<<o,c=i[o];c===-1?((a&r)===0||(a&n)!==0)&&(i[o]=SN(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Xg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V_(){var t=Gu;return Gu<<=1,(Gu&4194240)===0&&(Gu=64),t}function mg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function dc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ar(e),t[e]=r}function PN(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ar(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Nm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ar(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var se=0;function W_(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var H_,zm,$_,K_,J_,Yg=!1,Xu=[],si=null,oi=null,ai=null,Ya=new Map,Za=new Map,ti=[],wN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E0(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(e.pointerId)}}function ka(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fc(e),e!==null&&zm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function RN(t,e,r,n,i){switch(e){case"focusin":return si=ka(si,t,e,r,n,i),!0;case"dragenter":return oi=ka(oi,t,e,r,n,i),!0;case"mouseover":return ai=ka(ai,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Ya.set(s,ka(Ya.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Za.set(s,ka(Za.get(s)||null,t,e,r,n,i)),!0}return!1}function G_(t){var e=Zi(t.target);if(e!==null){var r=ls(e);if(r!==null){if(e=r.tag,e===13){if(e=j_(r),e!==null){t.blockedOn=e,J_(t.priority,function(){$_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Kg=n,r.target.dispatchEvent(n),Kg=null}else return e=fc(r),e!==null&&zm(e),t.blockedOn=r,!1;e.shift()}return!0}function _0(t,e,r){pl(t)&&r.delete(e)}function EN(){Yg=!1,si!==null&&pl(si)&&(si=null),oi!==null&&pl(oi)&&(oi=null),ai!==null&&pl(ai)&&(ai=null),Ya.forEach(_0),Za.forEach(_0)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,Yg||(Yg=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,EN)))}function ec(t){function e(i){return ba(i,t)}if(0<Xu.length){ba(Xu[0],t);for(var r=1;r<Xu.length;r++){var n=Xu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(si!==null&&ba(si,t),oi!==null&&ba(oi,t),ai!==null&&ba(ai,t),Ya.forEach(e),Za.forEach(e),r=0;r<ti.length;r++)n=ti[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ti.length&&(r=ti[0],r.blockedOn===null);)G_(r),r.blockedOn===null&&ti.shift()}var uo=kn.ReactCurrentBatchConfig,Il=!0;function _N(t,e,r,n){var i=se,s=uo.transition;uo.transition=null;try{se=1,jm(t,e,r,n)}finally{se=i,uo.transition=s}}function IN(t,e,r,n){var i=se,s=uo.transition;uo.transition=null;try{se=4,jm(t,e,r,n)}finally{se=i,uo.transition=s}}function jm(t,e,r,n){if(Il){var i=Zg(t,e,r,n);if(i===null)Eg(t,e,n,Tl,r),E0(t,n);else if(RN(i,t,e,r,n))n.stopPropagation();else if(E0(t,n),e&4&&-1<wN.indexOf(t)){for(;i!==null;){var s=fc(i);if(s!==null&&H_(s),s=Zg(t,e,r,n),s===null&&Eg(t,e,n,Tl,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Eg(t,e,n,null,r)}}var Tl=null;function Zg(t,e,r,n){if(Tl=null,t=Mm(n),t=Zi(t),t!==null)if(e=ls(t),e===null)t=null;else if(r=e.tag,r===13){if(t=j_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tl=t,null}function Q_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hN()){case Dm:return 1;case F_:return 4;case El:case fN:return 16;case U_:return 536870912;default:return 16}default:return 16}}var ni=null,Lm=null,dl=null;function X_(){if(dl)return dl;var t,e=Lm,r=e.length,n,i="value"in ni?ni.value:ni.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return dl=i.slice(t,1<n?1-n:void 0)}function hl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yu(){return!0}function I0(){return!1}function $t(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yu:I0,this.isPropagationStopped=I0,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Yu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Yu)},persist:function(){},isPersistent:Yu}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=$t(Co),hc=ye({},Co,{view:0,detail:0}),TN=$t(hc),yg,Sg,Oa,$l=ye({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(yg=t.screenX-Oa.screenX,Sg=t.screenY-Oa.screenY):Sg=yg=0,Oa=t),yg)},movementY:function(t){return"movementY"in t?t.movementY:Sg}}),T0=$t($l),AN=ye({},$l,{dataTransfer:0}),kN=$t(AN),bN=ye({},hc,{relatedTarget:0}),Cg=$t(bN),ON=ye({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),xN=$t(ON),MN=ye({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DN=$t(MN),NN=ye({},Co,{data:0}),A0=$t(NN),zN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LN[t])?!!e[t]:!1}function Bm(){return qN}var BN=ye({},hc,{key:function(t){if(t.key){var e=zN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bm,charCode:function(t){return t.type==="keypress"?hl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FN=$t(BN),UN=ye({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=$t(UN),VN=ye({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bm}),WN=$t(VN),HN=ye({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),$N=$t(HN),KN=ye({},$l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JN=$t(KN),GN=[9,13,27,32],Fm=_n&&"CompositionEvent"in window,Ua=null;_n&&"documentMode"in document&&(Ua=document.documentMode);var QN=_n&&"TextEvent"in window&&!Ua,Y_=_n&&(!Fm||Ua&&8<Ua&&11>=Ua),b0=" ",O0=!1;function Z_(t,e){switch(t){case"keyup":return GN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qs=!1;function XN(t,e){switch(t){case"compositionend":return eI(e);case"keypress":return e.which!==32?null:(O0=!0,b0);case"textInput":return t=e.data,t===b0&&O0?null:t;default:return null}}function YN(t,e){if(Qs)return t==="compositionend"||!Fm&&Z_(t,e)?(t=X_(),dl=Lm=ni=null,Qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y_&&e.locale!=="ko"?null:e.data;default:return null}}var ZN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZN[t.type]:e==="textarea"}function tI(t,e,r,n){x_(n),e=Al(e,"onChange"),0<e.length&&(r=new qm("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Va=null,tc=null;function ez(t){dI(t,0)}function Kl(t){var e=Zs(t);if(__(e))return t}function tz(t,e){if(t==="change")return e}var rI=!1;_n&&(_n?(el="oninput"in document,el||(Pg=document.createElement("div"),Pg.setAttribute("oninput","return;"),el=typeof Pg.oninput=="function"),Zu=el):Zu=!1,rI=Zu&&(!document.documentMode||9<document.documentMode));var Zu,el,Pg;function M0(){Va&&(Va.detachEvent("onpropertychange",nI),tc=Va=null)}function nI(t){if(t.propertyName==="value"&&Kl(tc)){var e=[];tI(e,tc,t,Mm(t)),z_(ez,e)}}function rz(t,e,r){t==="focusin"?(M0(),Va=e,tc=r,Va.attachEvent("onpropertychange",nI)):t==="focusout"&&M0()}function nz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kl(tc)}function iz(t,e){if(t==="click")return Kl(e)}function sz(t,e){if(t==="input"||t==="change")return Kl(e)}function oz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:oz;function rc(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ng.call(e,i)||!br(t[i],e[i]))return!1}return!0}function D0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function N0(t,e){var r=D0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=D0(r)}}function iI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sI(){for(var t=window,e=Pl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Pl(t.document)}return e}function Um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function az(t){var e=sI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&iI(r.ownerDocument.documentElement,r)){if(n!==null&&Um(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=N0(r,s);var o=N0(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cz=_n&&"documentMode"in document&&11>=document.documentMode,Xs=null,em=null,Wa=null,tm=!1;function z0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tm||Xs==null||Xs!==Pl(n)||(n=Xs,"selectionStart"in n&&Um(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wa&&rc(Wa,n)||(Wa=n,n=Al(em,"onSelect"),0<n.length&&(e=new qm("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Xs)))}function tl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ys={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},wg={},oI={};_n&&(oI=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Jl(t){if(wg[t])return wg[t];if(!Ys[t])return t;var e=Ys[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in oI)return wg[t]=e[r];return t}var aI=Jl("animationend"),cI=Jl("animationiteration"),uI=Jl("animationstart"),lI=Jl("transitionend"),pI=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){pI.set(t,e),us(e,[t])}for(rl=0;rl<j0.length;rl++)nl=j0[rl],L0=nl.toLowerCase(),q0=nl[0].toUpperCase()+nl.slice(1),vi(L0,"on"+q0);var nl,L0,q0,rl;vi(aI,"onAnimationEnd");vi(cI,"onAnimationIteration");vi(uI,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(lI,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uz=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function B0(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,uN(n,e,void 0,t),t.currentTarget=null}function dI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;B0(i,a,u),s=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;B0(i,a,u),s=c}}}if(Rl)throw t=Qg,Rl=!1,Qg=null,t}function le(t,e){var r=e[om];r===void 0&&(r=e[om]=new Set);var n=t+"__bubble";r.has(n)||(hI(e,t,2,!1),r.add(n))}function Rg(t,e,r){var n=0;e&&(n|=4),hI(r,t,n,e)}var il="_reactListening"+Math.random().toString(36).slice(2);function nc(t){if(!t[il]){t[il]=!0,C_.forEach(function(r){r!=="selectionchange"&&(uz.has(r)||Rg(r,!1,t),Rg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[il]||(e[il]=!0,Rg("selectionchange",!1,e))}}function hI(t,e,r,n){switch(Q_(e)){case 1:var i=_N;break;case 4:i=IN;break;default:i=jm}r=i.bind(null,e,r,t),i=void 0,!Gg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Eg(t,e,r,n,i){var s=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zi(a),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}a=a.parentNode}}n=n.return}z_(function(){var u=s,l=Mm(r),d=[];e:{var f=pI.get(t);if(f!==void 0){var y=qm,C=t;switch(t){case"keypress":if(hl(r)===0)break e;case"keydown":case"keyup":y=FN;break;case"focusin":C="focus",y=Cg;break;case"focusout":C="blur",y=Cg;break;case"beforeblur":case"afterblur":y=Cg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=T0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=kN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=WN;break;case aI:case cI:case uI:y=xN;break;case lI:y=$N;break;case"scroll":y=TN;break;case"wheel":y=JN;break;case"copy":case"cut":case"paste":y=DN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=k0}var S=(e&4)!==0,M=!S&&t==="scroll",g=S?f!==null?f+"Capture":null:f;S=[];for(var v=u,m;v!==null;){m=v;var P=m.stateNode;if(m.tag===5&&P!==null&&(m=P,g!==null&&(P=Xa(v,g),P!=null&&S.push(ic(v,P,m)))),M)break;v=v.return}0<S.length&&(f=new y(f,C,null,r,l),d.push({event:f,listeners:S}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&r!==Kg&&(C=r.relatedTarget||r.fromElement)&&(Zi(C)||C[In]))break e;if((y||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,y?(C=r.relatedTarget||r.toElement,y=u,C=C?Zi(C):null,C!==null&&(M=ls(C),C!==M||C.tag!==5&&C.tag!==6)&&(C=null)):(y=null,C=u),y!==C)){if(S=T0,P="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=k0,P="onPointerLeave",g="onPointerEnter",v="pointer"),M=y==null?f:Zs(y),m=C==null?f:Zs(C),f=new S(P,v+"leave",y,r,l),f.target=M,f.relatedTarget=m,P=null,Zi(l)===u&&(S=new S(g,v+"enter",C,r,l),S.target=m,S.relatedTarget=M,P=S),M=P,y&&C)t:{for(S=y,g=C,v=0,m=S;m;m=Ks(m))v++;for(m=0,P=g;P;P=Ks(P))m++;for(;0<v-m;)S=Ks(S),v--;for(;0<m-v;)g=Ks(g),m--;for(;v--;){if(S===g||g!==null&&S===g.alternate)break t;S=Ks(S),g=Ks(g)}S=null}else S=null;y!==null&&F0(d,f,y,S,!1),C!==null&&M!==null&&F0(d,M,C,S,!0)}}e:{if(f=u?Zs(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var I=tz;else if(x0(f))if(rI)I=sz;else{I=nz;var x=rz}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=iz);if(I&&(I=I(t,u))){tI(d,I,r,l);break e}x&&x(t,f,u),t==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&Ug(f,"number",f.value)}switch(x=u?Zs(u):window,t){case"focusin":(x0(x)||x.contentEditable==="true")&&(Xs=x,em=u,Wa=null);break;case"focusout":Wa=em=Xs=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,z0(d,r,l);break;case"selectionchange":if(cz)break;case"keydown":case"keyup":z0(d,r,l)}var E;if(Fm)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Qs?Z_(t,r)&&(L="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Y_&&r.locale!=="ko"&&(Qs||L!=="onCompositionStart"?L==="onCompositionEnd"&&Qs&&(E=X_()):(ni=l,Lm="value"in ni?ni.value:ni.textContent,Qs=!0)),x=Al(u,L),0<x.length&&(L=new A0(L,t,null,r,l),d.push({event:L,listeners:x}),E?L.data=E:(E=eI(r),E!==null&&(L.data=E)))),(E=QN?XN(t,r):YN(t,r))&&(u=Al(u,"onBeforeInput"),0<u.length&&(l=new A0("onBeforeInput","beforeinput",null,r,l),d.push({event:l,listeners:u}),l.data=E))}dI(d,e)})}function ic(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Al(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xa(t,r),s!=null&&n.unshift(ic(t,s,i)),s=Xa(t,e),s!=null&&n.push(ic(t,s,i))),t=t.return}return n}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F0(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,i?(c=Xa(r,s),c!=null&&o.unshift(ic(r,c,a))):i||(c=Xa(r,s),c!=null&&o.push(ic(r,c,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var lz=/\r\n?/g,pz=/\u0000|\uFFFD/g;function U0(t){return(typeof t=="string"?t:""+t).replace(lz,`
`).replace(pz,"")}function sl(t,e,r){if(e=U0(e),U0(t)!==e&&r)throw Error(R(425))}function kl(){}var rm=null,nm=null;function im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,dz=typeof clearTimeout=="function"?clearTimeout:void 0,V0=typeof Promise=="function"?Promise:void 0,hz=typeof queueMicrotask=="function"?queueMicrotask:typeof V0<"u"?function(t){return V0.resolve(null).then(t).catch(fz)}:sm;function fz(t){setTimeout(function(){throw t})}function _g(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),ec(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ec(e)}function ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Po,sc="__reactProps$"+Po,In="__reactContainer$"+Po,om="__reactEvents$"+Po,vz="__reactListeners$"+Po,gz="__reactHandles$"+Po;function Zi(t){var e=t[Qr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[In]||r[Qr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=W0(t);t!==null;){if(r=t[Qr])return r;t=W0(t)}return e}t=r,r=t.parentNode}return null}function fc(t){return t=t[Qr]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Gl(t){return t[sc]||null}var am=[],eo=-1;function gi(t){return{current:t}}function pe(t){0>eo||(t.current=am[eo],am[eo]=null,eo--)}function ce(t,e){eo++,am[eo]=t.current,t.current=e}var fi={},ct=gi(fi),bt=gi(!1),is=fi;function fo(t,e){var r=t.type.contextTypes;if(!r)return fi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(t){return t=t.childContextTypes,t!=null}function bl(){pe(bt),pe(ct)}function H0(t,e,r){if(ct.current!==fi)throw Error(R(168));ce(ct,e),ce(bt,r)}function fI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(R(108,rN(t)||"Unknown",i));return ye({},r,n)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,is=ct.current,ce(ct,t),ce(bt,bt.current),!0}function $0(t,e,r){var n=t.stateNode;if(!n)throw Error(R(169));r?(t=fI(t,e,is),n.__reactInternalMemoizedMergedChildContext=t,pe(bt),pe(ct),ce(ct,t)):pe(bt),ce(bt,r)}var Pn=null,Ql=!1,Ig=!1;function vI(t){Pn===null?Pn=[t]:Pn.push(t)}function mz(t){Ql=!0,vI(t)}function mi(){if(!Ig&&Pn!==null){Ig=!0;var t=0,e=se;try{var r=Pn;for(se=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Pn=null,Ql=!1}catch(i){throw Pn!==null&&(Pn=Pn.slice(t+1)),B_(Dm,mi),i}finally{se=e,Ig=!1}}return null}var to=[],ro=0,xl=null,Ml=0,ir=[],sr=0,ss=null,wn=1,Rn="";function Xi(t,e){to[ro++]=Ml,to[ro++]=xl,xl=t,Ml=e}function gI(t,e,r){ir[sr++]=wn,ir[sr++]=Rn,ir[sr++]=ss,ss=t;var n=wn;t=Rn;var i=32-Ar(n)-1;n&=~(1<<i),r+=1;var s=32-Ar(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,wn=1<<32-Ar(e)+i|r<<i|n,Rn=s+t}else wn=1<<s|r<<i|n,Rn=t}function Vm(t){t.return!==null&&(Xi(t,1),gI(t,1,0))}function Wm(t){for(;t===xl;)xl=to[--ro],to[ro]=null,Ml=to[--ro],to[ro]=null;for(;t===ss;)ss=ir[--sr],ir[sr]=null,Rn=ir[--sr],ir[sr]=null,wn=ir[--sr],ir[sr]=null}var Wt=null,Vt=null,fe=!1,Tr=null;function mI(t,e){var r=or(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function K0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Vt=ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ss!==null?{id:wn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=or(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Wt=t,Vt=null,!0):!1;default:return!1}}function cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function um(t){if(fe){var e=Vt;if(e){var r=e;if(!K0(t,e)){if(cm(t))throw Error(R(418));e=ci(r.nextSibling);var n=Wt;e&&K0(t,e)?mI(n,r):(t.flags=t.flags&-4097|2,fe=!1,Wt=t)}}else{if(cm(t))throw Error(R(418));t.flags=t.flags&-4097|2,fe=!1,Wt=t}}}function J0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function ol(t){if(t!==Wt)return!1;if(!fe)return J0(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!im(t.type,t.memoizedProps)),e&&(e=Vt)){if(cm(t))throw yI(),Error(R(418));for(;e;)mI(t,e),e=ci(e.nextSibling)}if(J0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Vt=ci(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Wt?ci(t.stateNode.nextSibling):null;return!0}function yI(){for(var t=Vt;t;)t=ci(t.nextSibling)}function vo(){Vt=Wt=null,fe=!1}function Hm(t){Tr===null?Tr=[t]:Tr.push(t)}var yz=kn.ReactCurrentBatchConfig;function xa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,t))}return t}function al(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function G0(t){var e=t._init;return e(t._payload)}function SI(t){function e(g,v){if(t){var m=g.deletions;m===null?(g.deletions=[v],g.flags|=16):m.push(v)}}function r(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=di(g,v),g.index=0,g.sibling=null,g}function s(g,v,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<v?(g.flags|=2,v):m):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,m,P){return v===null||v.tag!==6?(v=Mg(m,g.mode,P),v.return=g,v):(v=i(v,m),v.return=g,v)}function c(g,v,m,P){var I=m.type;return I===Gs?l(g,v,m.props.children,P,m.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Zn&&G0(I)===v.type)?(P=i(v,m.props),P.ref=xa(g,v,m),P.return=g,P):(P=Cl(m.type,m.key,m.props,null,g.mode,P),P.ref=xa(g,v,m),P.return=g,P)}function u(g,v,m,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==m.containerInfo||v.stateNode.implementation!==m.implementation?(v=Dg(m,g.mode,P),v.return=g,v):(v=i(v,m.children||[]),v.return=g,v)}function l(g,v,m,P,I){return v===null||v.tag!==7?(v=ns(m,g.mode,P,I),v.return=g,v):(v=i(v,m),v.return=g,v)}function d(g,v,m){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Mg(""+v,g.mode,m),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $u:return m=Cl(v.type,v.key,v.props,null,g.mode,m),m.ref=xa(g,null,v),m.return=g,m;case Js:return v=Dg(v,g.mode,m),v.return=g,v;case Zn:var P=v._init;return d(g,P(v._payload),m)}if(ja(v)||Aa(v))return v=ns(v,g.mode,m,null),v.return=g,v;al(g,v)}return null}function f(g,v,m,P){var I=v!==null?v.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return I!==null?null:a(g,v,""+m,P);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case $u:return m.key===I?c(g,v,m,P):null;case Js:return m.key===I?u(g,v,m,P):null;case Zn:return I=m._init,f(g,v,I(m._payload),P)}if(ja(m)||Aa(m))return I!==null?null:l(g,v,m,P,null);al(g,m)}return null}function y(g,v,m,P,I){if(typeof P=="string"&&P!==""||typeof P=="number")return g=g.get(m)||null,a(v,g,""+P,I);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case $u:return g=g.get(P.key===null?m:P.key)||null,c(v,g,P,I);case Js:return g=g.get(P.key===null?m:P.key)||null,u(v,g,P,I);case Zn:var x=P._init;return y(g,v,m,x(P._payload),I)}if(ja(P)||Aa(P))return g=g.get(m)||null,l(v,g,P,I,null);al(v,P)}return null}function C(g,v,m,P){for(var I=null,x=null,E=v,L=v=0,Le=null;E!==null&&L<m.length;L++){E.index>L?(Le=E,E=null):Le=E.sibling;var X=f(g,E,m[L],P);if(X===null){E===null&&(E=Le);break}t&&E&&X.alternate===null&&e(g,E),v=s(X,v,L),x===null?I=X:x.sibling=X,x=X,E=Le}if(L===m.length)return r(g,E),fe&&Xi(g,L),I;if(E===null){for(;L<m.length;L++)E=d(g,m[L],P),E!==null&&(v=s(E,v,L),x===null?I=E:x.sibling=E,x=E);return fe&&Xi(g,L),I}for(E=n(g,E);L<m.length;L++)Le=y(E,g,L,m[L],P),Le!==null&&(t&&Le.alternate!==null&&E.delete(Le.key===null?L:Le.key),v=s(Le,v,L),x===null?I=Le:x.sibling=Le,x=Le);return t&&E.forEach(function(Qn){return e(g,Qn)}),fe&&Xi(g,L),I}function S(g,v,m,P){var I=Aa(m);if(typeof I!="function")throw Error(R(150));if(m=I.call(m),m==null)throw Error(R(151));for(var x=I=null,E=v,L=v=0,Le=null,X=m.next();E!==null&&!X.done;L++,X=m.next()){E.index>L?(Le=E,E=null):Le=E.sibling;var Qn=f(g,E,X.value,P);if(Qn===null){E===null&&(E=Le);break}t&&E&&Qn.alternate===null&&e(g,E),v=s(Qn,v,L),x===null?I=Qn:x.sibling=Qn,x=Qn,E=Le}if(X.done)return r(g,E),fe&&Xi(g,L),I;if(E===null){for(;!X.done;L++,X=m.next())X=d(g,X.value,P),X!==null&&(v=s(X,v,L),x===null?I=X:x.sibling=X,x=X);return fe&&Xi(g,L),I}for(E=n(g,E);!X.done;L++,X=m.next())X=y(E,g,L,X.value,P),X!==null&&(t&&X.alternate!==null&&E.delete(X.key===null?L:X.key),v=s(X,v,L),x===null?I=X:x.sibling=X,x=X);return t&&E.forEach(function(TD){return e(g,TD)}),fe&&Xi(g,L),I}function M(g,v,m,P){if(typeof m=="object"&&m!==null&&m.type===Gs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case $u:e:{for(var I=m.key,x=v;x!==null;){if(x.key===I){if(I=m.type,I===Gs){if(x.tag===7){r(g,x.sibling),v=i(x,m.props.children),v.return=g,g=v;break e}}else if(x.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Zn&&G0(I)===x.type){r(g,x.sibling),v=i(x,m.props),v.ref=xa(g,x,m),v.return=g,g=v;break e}r(g,x);break}else e(g,x);x=x.sibling}m.type===Gs?(v=ns(m.props.children,g.mode,P,m.key),v.return=g,g=v):(P=Cl(m.type,m.key,m.props,null,g.mode,P),P.ref=xa(g,v,m),P.return=g,g=P)}return o(g);case Js:e:{for(x=m.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===m.containerInfo&&v.stateNode.implementation===m.implementation){r(g,v.sibling),v=i(v,m.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else e(g,v);v=v.sibling}v=Dg(m,g.mode,P),v.return=g,g=v}return o(g);case Zn:return x=m._init,M(g,v,x(m._payload),P)}if(ja(m))return C(g,v,m,P);if(Aa(m))return S(g,v,m,P);al(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,v!==null&&v.tag===6?(r(g,v.sibling),v=i(v,m),v.return=g,g=v):(r(g,v),v=Mg(m,g.mode,P),v.return=g,g=v),o(g)):r(g,v)}return M}var go=SI(!0),CI=SI(!1),Dl=gi(null),Nl=null,no=null,$m=null;function Km(){$m=no=Nl=null}function Jm(t){var e=Dl.current;pe(Dl),t._currentValue=e}function lm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function lo(t,e){Nl=t,$m=no=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(kt=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if($m!==t)if(t={context:t,memoizedValue:e,next:null},no===null){if(Nl===null)throw Error(R(308));no=t,Nl.dependencies={lanes:0,firstContext:t}}else no=no.next=t;return e}var es=null;function Gm(t){es===null?es=[t]:es.push(t)}function PI(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Gm(e)):(r.next=i.next,i.next=r),e.interleaved=r,Tn(t,n)}function Tn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ei=!1;function Qm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function En(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(G&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Tn(t,r)}return i=n.interleaved,i===null?(e.next=e,Gm(n)):(e.next=i.next,i.next=e),n.interleaved=e,Tn(t,r)}function fl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Nm(t,r)}}function Q0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function zl(t,e,r,n){var i=t.updateQueue;ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var l=t.alternate;l!==null&&(l=l.updateQueue,a=l.lastBaseUpdate,a!==o&&(a===null?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,l=u=c=null,a=s;do{var f=a.lane,y=a.eventTime;if((n&f)===f){l!==null&&(l=l.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,S=a;switch(f=e,y=r,S.tag){case 1:if(C=S.payload,typeof C=="function"){d=C.call(y,d,f);break e}d=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=S.payload,f=typeof C=="function"?C.call(y,d,f):C,f==null)break e;d=ye({},d,f);break e;case 2:ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},l===null?(u=l=y,c=d):l=l.next=y,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(l===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=d}}function X0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(R(191,i));i.call(n)}}}var vc={},Yr=gi(vc),oc=gi(vc),ac=gi(vc);function ts(t){if(t===vc)throw Error(R(174));return t}function Xm(t,e){switch(ce(ac,e),ce(oc,t),ce(Yr,vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wg(e,t)}pe(Yr),ce(Yr,e)}function mo(){pe(Yr),pe(oc),pe(ac)}function RI(t){ts(ac.current);var e=ts(Yr.current),r=Wg(e,t.type);e!==r&&(ce(oc,t),ce(Yr,r))}function Ym(t){oc.current===t&&(pe(Yr),pe(oc))}var ge=gi(0);function jl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tg=[];function Zm(){for(var t=0;t<Tg.length;t++)Tg[t]._workInProgressVersionPrimary=null;Tg.length=0}var vl=kn.ReactCurrentDispatcher,Ag=kn.ReactCurrentBatchConfig,os=0,me=null,De=null,qe=null,Ll=!1,Ha=!1,cc=0,Sz=0;function st(){throw Error(R(321))}function ey(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!br(t[r],e[r]))return!1;return!0}function ty(t,e,r,n,i,s){if(os=s,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?Rz:Ez,t=r(n,i),Ha){s=0;do{if(Ha=!1,cc=0,25<=s)throw Error(R(301));s+=1,qe=De=null,e.updateQueue=null,vl.current=_z,t=r(n,i)}while(Ha)}if(vl.current=ql,e=De!==null&&De.next!==null,os=0,qe=De=me=null,Ll=!1,e)throw Error(R(300));return t}function ry(){var t=cc!==0;return cc=0,t}function Gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?me.memoizedState=qe=t:qe=qe.next=t,qe}function ur(){if(De===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=qe===null?me.memoizedState:qe.next;if(e!==null)qe=e,De=t;else{if(t===null)throw Error(R(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},qe===null?me.memoizedState=qe=t:qe=qe.next=t}return qe}function uc(t,e){return typeof e=="function"?e(t):e}function kg(t){var e=ur(),r=e.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=t;var n=De,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,c=null,u=s;do{var l=u.lane;if((os&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=n):c=c.next=d,me.lanes|=l,as|=l}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=a,br(n,e.memoizedState)||(kt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,me.lanes|=s,as|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function bg(t){var e=ur(),r=e.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);br(s,e.memoizedState)||(kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function EI(){}function _I(t,e){var r=me,n=ur(),i=e(),s=!br(n.memoizedState,i);if(s&&(n.memoizedState=i,kt=!0),n=n.queue,ny(AI.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,lc(9,TI.bind(null,r,n,i,e),void 0,null),Be===null)throw Error(R(349));(os&30)!==0||II(r,e,i)}return i}function II(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function TI(t,e,r,n){e.value=r,e.getSnapshot=n,kI(e)&&bI(t)}function AI(t,e,r){return r(function(){kI(e)&&bI(t)})}function kI(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!br(t,r)}catch{return!0}}function bI(t){var e=Tn(t,1);e!==null&&kr(e,t,1,-1)}function Y0(t){var e=Gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:t},e.queue=t,t=t.dispatch=wz.bind(null,me,t),[e.memoizedState,t]}function lc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function OI(){return ur().memoizedState}function gl(t,e,r,n){var i=Gr();me.flags|=t,i.memoizedState=lc(1|e,r,void 0,n===void 0?null:n)}function Xl(t,e,r,n){var i=ur();n=n===void 0?null:n;var s=void 0;if(De!==null){var o=De.memoizedState;if(s=o.destroy,n!==null&&ey(n,o.deps)){i.memoizedState=lc(e,r,s,n);return}}me.flags|=t,i.memoizedState=lc(1|e,r,s,n)}function Z0(t,e){return gl(8390656,8,t,e)}function ny(t,e){return Xl(2048,8,t,e)}function xI(t,e){return Xl(4,2,t,e)}function MI(t,e){return Xl(4,4,t,e)}function DI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NI(t,e,r){return r=r!=null?r.concat([t]):null,Xl(4,4,DI.bind(null,e,t),r)}function iy(){}function zI(t,e){var r=ur();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ey(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function jI(t,e){var r=ur();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ey(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function LI(t,e,r){return(os&21)===0?(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=r):(br(r,e)||(r=V_(),me.lanes|=r,as|=r,t.baseState=!0),e)}function Cz(t,e){var r=se;se=r!==0&&4>r?r:4,t(!0);var n=Ag.transition;Ag.transition={};try{t(!1),e()}finally{se=r,Ag.transition=n}}function qI(){return ur().memoizedState}function Pz(t,e,r){var n=pi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},BI(t))FI(e,r);else if(r=PI(t,e,r,n),r!==null){var i=Pt();kr(r,t,n,i),UI(r,e,n)}}function wz(t,e,r){var n=pi(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(BI(t))FI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,br(a,o)){var c=e.interleaved;c===null?(i.next=i,Gm(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=PI(t,e,i,n),r!==null&&(i=Pt(),kr(r,t,n,i),UI(r,e,n))}}function BI(t){var e=t.alternate;return t===me||e!==null&&e===me}function FI(t,e){Ha=Ll=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function UI(t,e,r){if((r&4194240)!==0){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Nm(t,r)}}var ql={readContext:cr,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Rz={readContext:cr,useCallback:function(t,e){return Gr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:Z0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,gl(4194308,4,DI.bind(null,e,t),r)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var r=Gr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Gr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Pz.bind(null,me,t),[n.memoizedState,t]},useRef:function(t){var e=Gr();return t={current:t},e.memoizedState=t},useState:Y0,useDebugValue:iy,useDeferredValue:function(t){return Gr().memoizedState=t},useTransition:function(){var t=Y0(!1),e=t[0];return t=Cz.bind(null,t[1]),Gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=me,i=Gr();if(fe){if(r===void 0)throw Error(R(407));r=r()}else{if(r=e(),Be===null)throw Error(R(349));(os&30)!==0||II(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Z0(AI.bind(null,n,s,t),[t]),n.flags|=2048,lc(9,TI.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Gr(),e=Be.identifierPrefix;if(fe){var r=Rn,n=wn;r=(n&~(1<<32-Ar(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=cc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Sz++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ez={readContext:cr,useCallback:zI,useContext:cr,useEffect:ny,useImperativeHandle:NI,useInsertionEffect:xI,useLayoutEffect:MI,useMemo:jI,useReducer:kg,useRef:OI,useState:function(){return kg(uc)},useDebugValue:iy,useDeferredValue:function(t){var e=ur();return LI(e,De.memoizedState,t)},useTransition:function(){var t=kg(uc)[0],e=ur().memoizedState;return[t,e]},useMutableSource:EI,useSyncExternalStore:_I,useId:qI,unstable_isNewReconciler:!1},_z={readContext:cr,useCallback:zI,useContext:cr,useEffect:ny,useImperativeHandle:NI,useInsertionEffect:xI,useLayoutEffect:MI,useMemo:jI,useReducer:bg,useRef:OI,useState:function(){return bg(uc)},useDebugValue:iy,useDeferredValue:function(t){var e=ur();return De===null?e.memoizedState=t:LI(e,De.memoizedState,t)},useTransition:function(){var t=bg(uc)[0],e=ur().memoizedState;return[t,e]},useMutableSource:EI,useSyncExternalStore:_I,useId:qI,unstable_isNewReconciler:!1};function _r(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function pm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ye({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Yl={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pt(),i=pi(t),s=En(n,i);s.payload=e,r!=null&&(s.callback=r),e=ui(t,s,i),e!==null&&(kr(e,t,i,n),fl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pt(),i=pi(t),s=En(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=ui(t,s,i),e!==null&&(kr(e,t,i,n),fl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pt(),n=pi(t),i=En(r,n);i.tag=2,e!=null&&(i.callback=e),e=ui(t,i,n),e!==null&&(kr(e,t,n,r),fl(e,t,n))}};function e_(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!rc(r,n)||!rc(i,s):!0}function VI(t,e,r){var n=!1,i=fi,s=e.contextType;return typeof s=="object"&&s!==null?s=cr(s):(i=Ot(e)?is:ct.current,n=e.contextTypes,s=(n=n!=null)?fo(t,i):fi),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function t_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Yl.enqueueReplaceState(e,e.state,null)}function dm(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Qm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cr(s):(s=Ot(e)?is:ct.current,i.context=fo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pm(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yl.enqueueReplaceState(i,i.state,null),zl(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yo(t,e){try{var r="",n=e;do r+=tN(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Og(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function hm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Iz=typeof WeakMap=="function"?WeakMap:Map;function WI(t,e,r){r=En(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Fl||(Fl=!0,Rm=n),hm(t,e)},r}function HI(t,e,r){r=En(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){hm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){hm(t,e),typeof n!="function"&&(li===null?li=new Set([this]):li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function r_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Iz;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Bz.bind(null,t,e,r),e.then(t,t))}function n_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function i_(t,e,r,n,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=En(-1,1),e.tag=2,ui(r,e,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var Tz=kn.ReactCurrentOwner,kt=!1;function Ct(t,e,r,n){e.child=t===null?CI(e,null,r,n):go(e,t.child,r,n)}function s_(t,e,r,n,i){r=r.render;var s=e.ref;return lo(e,i),n=ty(t,e,r,n,s,i),r=ry(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,An(t,e,i)):(fe&&r&&Vm(e),e.flags|=1,Ct(t,e,n,i),e.child)}function o_(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!dy(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,$I(t,e,s,n,i)):(t=Cl(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:rc,r(o,n)&&t.ref===e.ref)return An(t,e,i)}return e.flags|=1,t=di(s,n),t.ref=e.ref,t.return=e,e.child=t}function $I(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(rc(s,n)&&t.ref===e.ref)if(kt=!1,e.pendingProps=n=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(kt=!0);else return e.lanes=t.lanes,An(t,e,i)}return fm(t,e,r,n,i)}function KI(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(so,Ut),Ut|=r;else{if((r&1073741824)===0)return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(so,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ce(so,Ut),Ut|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ce(so,Ut),Ut|=n;return Ct(t,e,i,r),e.child}function JI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function fm(t,e,r,n,i){var s=Ot(r)?is:ct.current;return s=fo(e,s),lo(e,i),r=ty(t,e,r,n,s,i),n=ry(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,An(t,e,i)):(fe&&n&&Vm(e),e.flags|=1,Ct(t,e,r,i),e.child)}function a_(t,e,r,n,i){if(Ot(r)){var s=!0;Ol(e)}else s=!1;if(lo(e,i),e.stateNode===null)ml(t,e),VI(e,r,n),dm(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=cr(u):(u=Ot(r)?is:ct.current,u=fo(e,u));var l=r.getDerivedStateFromProps,d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==u)&&t_(e,o,n,u),ei=!1;var f=e.memoizedState;o.state=f,zl(e,n,o,i),c=e.memoizedState,a!==n||f!==c||bt.current||ei?(typeof l=="function"&&(pm(e,r,l,n),c=e.memoizedState),(a=ei||e_(e,r,a,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,wI(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:_r(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=cr(c):(c=Ot(r)?is:ct.current,c=fo(e,c));var y=r.getDerivedStateFromProps;(l=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&t_(e,o,n,c),ei=!1,f=e.memoizedState,o.state=f,zl(e,n,o,i);var C=e.memoizedState;a!==d||f!==C||bt.current||ei?(typeof y=="function"&&(pm(e,r,y,n),C=e.memoizedState),(u=ei||e_(e,r,u,n,f,C,c)||!1)?(l||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,C,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,C,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=C),o.props=n,o.state=C,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return vm(t,e,r,n,s,i)}function vm(t,e,r,n,i,s){JI(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&$0(e,r,!1),An(t,e,s);n=e.stateNode,Tz.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=go(e,t.child,null,s),e.child=go(e,null,a,s)):Ct(t,e,a,s),e.memoizedState=n.state,i&&$0(e,r,!0),e.child}function GI(t){var e=t.stateNode;e.pendingContext?H0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H0(t,e.context,!1),Xm(t,e.containerInfo)}function c_(t,e,r,n,i){return vo(),Hm(i),e.flags|=256,Ct(t,e,r,n),e.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function mm(t){return{baseLanes:t,cachePool:null,transitions:null}}function QI(t,e,r){var n=e.pendingProps,i=ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ce(ge,i&1),t===null)return um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tp(o,n,0,null),t=ns(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mm(r),e.memoizedState=gm,t):sy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Az(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:n.children};return(o&1)===0&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=di(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=di(a,s):(s=ns(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?mm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=gm,n}return s=t.child,t=s.sibling,n=di(s,{mode:"visible",children:n.children}),(e.mode&1)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function sy(t,e){return e=tp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cl(t,e,r,n){return n!==null&&Hm(n),go(e,t.child,null,r),t=sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Az(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Og(Error(R(422))),cl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=tp({mode:"visible",children:n.children},i,0,null),s=ns(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,(e.mode&1)!==0&&go(e,t.child,null,o),e.child.memoizedState=mm(o),e.memoizedState=gm,s);if((e.mode&1)===0)return cl(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(R(419)),n=Og(s,n,void 0),cl(t,e,o,n)}if(a=(o&t.childLanes)!==0,kt||a){if(n=Be,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tn(t,i),kr(n,t,i,-1))}return py(),n=Og(Error(R(421))),cl(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Fz.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Vt=ci(i.nextSibling),Wt=e,fe=!0,Tr=null,t!==null&&(ir[sr++]=wn,ir[sr++]=Rn,ir[sr++]=ss,wn=t.id,Rn=t.overflow,ss=e),e=sy(e,n.children),e.flags|=4096,e)}function u_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),lm(t.return,e,r)}function xg(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function XI(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ct(t,e,n.children,r),n=ge.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u_(t,r,e);else if(t.tag===19)u_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ce(ge,n),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&jl(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),xg(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jl(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}xg(e,!0,r,null,s);break;case"together":xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ml(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,(r&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,r=di(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=di(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function kz(t,e,r){switch(e.tag){case 3:GI(e),vo();break;case 5:RI(e);break;case 1:Ot(e.type)&&Ol(e);break;case 4:Xm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ce(Dl,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ce(ge,ge.current&1),e.flags|=128,null):(r&e.child.childLanes)!==0?QI(t,e,r):(ce(ge,ge.current&1),t=An(t,e,r),t!==null?t.sibling:null);ce(ge,ge.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&128)!==0){if(n)return XI(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(ge,ge.current),n)break;return null;case 22:case 23:return e.lanes=0,KI(t,e,r)}return An(t,e,r)}var YI,ym,ZI,eT;YI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ym=function(){};ZI=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ts(Yr.current);var s=null;switch(r){case"input":i=Bg(t,i),n=Bg(t,n),s=[];break;case"select":i=ye({},i,{value:void 0}),n=ye({},n,{value:void 0}),s=[];break;case"textarea":i=Vg(t,i),n=Vg(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=kl)}Hg(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ga.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(a=i?.[u],n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&le("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};eT=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ma(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function bz(t,e,r){var n=e.pendingProps;switch(Wm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Ot(e.type)&&bl(),ot(e),null;case 3:return n=e.stateNode,mo(),pe(bt),pe(ct),Zm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Tr!==null&&(Im(Tr),Tr=null))),ym(t,e),ot(e),null;case 5:Ym(e);var i=ts(ac.current);if(r=e.type,t!==null&&e.stateNode!=null)ZI(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(R(166));return ot(e),null}if(t=ts(Yr.current),ol(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Qr]=e,n[sc]=s,t=(e.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(i=0;i<qa.length;i++)le(qa[i],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":m0(n,s),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},le("invalid",n);break;case"textarea":S0(n,s),le("invalid",n)}Hg(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&sl(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sl(n.textContent,a,t),i=["children",""+a]):Ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&le("scroll",n)}switch(r){case"input":Ku(n),y0(n,s,!0);break;case"textarea":Ku(n),C0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=kl)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Qr]=e,t[sc]=n,YI(t,e,!1,!1),e.stateNode=t;e:{switch(o=$g(r,n),r){case"dialog":le("cancel",t),le("close",t),i=n;break;case"iframe":case"object":case"embed":le("load",t),i=n;break;case"video":case"audio":for(i=0;i<qa.length;i++)le(qa[i],t);i=n;break;case"source":le("error",t),i=n;break;case"img":case"image":case"link":le("error",t),le("load",t),i=n;break;case"details":le("toggle",t),i=n;break;case"input":m0(t,n),i=Bg(t,n),le("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ye({},n,{value:void 0}),le("invalid",t);break;case"textarea":S0(t,n),i=Vg(t,n),le("invalid",t);break;default:i=n}Hg(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?O_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&k_(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Qa(t,c):typeof c=="number"&&Qa(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ga.hasOwnProperty(s)?c!=null&&s==="onScroll"&&le("scroll",t):c!=null&&km(t,s,c,o))}switch(r){case"input":Ku(t),y0(t,n,!1);break;case"textarea":Ku(t),C0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+hi(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?oo(t,!!n.multiple,s,!1):n.defaultValue!=null&&oo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=kl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)eT(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(R(166));if(r=ts(ac.current),ts(Yr.current),ol(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qr]=e,(s=n.nodeValue!==r)&&(t=Wt,t!==null))switch(t.tag){case 3:sl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sl(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qr]=e,e.stateNode=n}return ot(e),null;case 13:if(pe(ge),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&Vt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)yI(),vo(),e.flags|=98560,s=!1;else if(s=ol(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[Qr]=e}else vo(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ot(e),s=!1}else Tr!==null&&(Im(Tr),Tr=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(ge.current&1)!==0?Ne===0&&(Ne=3):py())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return mo(),ym(t,e),t===null&&nc(e.stateNode.containerInfo),ot(e),null;case 10:return Jm(e.type._context),ot(e),null;case 17:return Ot(e.type)&&bl(),ot(e),null;case 19:if(pe(ge),s=e.memoizedState,s===null)return ot(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Ma(s,!1);else{if(Ne!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=jl(t),o!==null){for(e.flags|=128,Ma(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ce(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&Re()>So&&(e.flags|=128,n=!0,Ma(s,!1),e.lanes=4194304)}else{if(!n)if(t=jl(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ma(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!fe)return ot(e),null}else 2*Re()-s.renderingStartTime>So&&r!==1073741824&&(e.flags|=128,n=!0,Ma(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Re(),e.sibling=null,r=ge.current,ce(ge,n?r&1|2:r&1),e):(ot(e),null);case 22:case 23:return ly(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(Ut&1073741824)!==0&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Oz(t,e){switch(Wm(e),e.tag){case 1:return Ot(e.type)&&bl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mo(),pe(bt),pe(ct),Zm(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Ym(e),null;case 13:if(pe(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ge),null;case 4:return mo(),null;case 10:return Jm(e.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var ul=!1,at=!1,xz=typeof WeakSet=="function"?WeakSet:Set,b=null;function io(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ce(t,e,n)}else r.current=null}function Sm(t,e,r){try{r()}catch(n){Ce(t,e,n)}}var l_=!1;function Mz(t,e){if(rm=Il,t=sI(),Um(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,c=-1,u=0,l=0,d=t,f=null;t:for(;;){for(var y;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++l===n&&(c=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(nm={focusedElem:t,selectionRange:r},Il=!1,b=e;b!==null;)if(e=b,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,b=t;else for(;b!==null;){e=b;try{var C=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var S=C.memoizedProps,M=C.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:_r(e.type,S),M);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(P){Ce(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,b=t;break}b=e.return}return C=l_,l_=!1,C}function $a(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sm(e,r,s)}i=i.next}while(i!==n)}}function Zl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Cm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function tT(t){var e=t.alternate;e!==null&&(t.alternate=null,tT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[sc],delete e[om],delete e[vz],delete e[gz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rT(t){return t.tag===5||t.tag===3||t.tag===4}function p_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=kl));else if(n!==4&&(t=t.child,t!==null))for(Pm(t,e,r),t=t.sibling;t!==null;)Pm(t,e,r),t=t.sibling}function wm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(wm(t,e,r),t=t.sibling;t!==null;)wm(t,e,r),t=t.sibling}var $e=null,Ir=!1;function Yn(t,e,r){for(r=r.child;r!==null;)nT(t,e,r),r=r.sibling}function nT(t,e,r){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Hl,r)}catch{}switch(r.tag){case 5:at||io(r,e);case 6:var n=$e,i=Ir;$e=null,Yn(t,e,r),$e=n,Ir=i,$e!==null&&(Ir?(t=$e,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$e.removeChild(r.stateNode));break;case 18:$e!==null&&(Ir?(t=$e,r=r.stateNode,t.nodeType===8?_g(t.parentNode,r):t.nodeType===1&&_g(t,r),ec(t)):_g($e,r.stateNode));break;case 4:n=$e,i=Ir,$e=r.stateNode.containerInfo,Ir=!0,Yn(t,e,r),$e=n,Ir=i;break;case 0:case 11:case 14:case 15:if(!at&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Sm(r,e,o),i=i.next}while(i!==n)}Yn(t,e,r);break;case 1:if(!at&&(io(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ce(r,e,a)}Yn(t,e,r);break;case 21:Yn(t,e,r);break;case 22:r.mode&1?(at=(n=at)||r.memoizedState!==null,Yn(t,e,r),at=n):Yn(t,e,r);break;default:Yn(t,e,r)}}function d_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new xz),e.forEach(function(n){var i=Uz.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Er(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Ir=!1;break e;case 3:$e=a.stateNode.containerInfo,Ir=!0;break e;case 4:$e=a.stateNode.containerInfo,Ir=!0;break e}a=a.return}if($e===null)throw Error(R(160));nT(s,o,i),$e=null,Ir=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iT(e,t),e=e.sibling}function iT(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(e,t),Jr(t),n&4){try{$a(3,t,t.return),Zl(3,t)}catch(S){Ce(t,t.return,S)}try{$a(5,t,t.return)}catch(S){Ce(t,t.return,S)}}break;case 1:Er(e,t),Jr(t),n&512&&r!==null&&io(r,r.return);break;case 5:if(Er(e,t),Jr(t),n&512&&r!==null&&io(r,r.return),t.flags&32){var i=t.stateNode;try{Qa(i,"")}catch(S){Ce(t,t.return,S)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&I_(i,s),$g(a,o);var u=$g(a,s);for(o=0;o<c.length;o+=2){var l=c[o],d=c[o+1];l==="style"?O_(i,d):l==="dangerouslySetInnerHTML"?k_(i,d):l==="children"?Qa(i,d):km(i,l,d,u)}switch(a){case"input":Fg(i,s);break;case"textarea":T_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?oo(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?oo(i,!!s.multiple,s.defaultValue,!0):oo(i,!!s.multiple,s.multiple?[]:"",!1))}i[sc]=s}catch(S){Ce(t,t.return,S)}}break;case 6:if(Er(e,t),Jr(t),n&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Ce(t,t.return,S)}}break;case 3:if(Er(e,t),Jr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ec(e.containerInfo)}catch(S){Ce(t,t.return,S)}break;case 4:Er(e,t),Jr(t);break;case 13:Er(e,t),Jr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cy=Re())),n&4&&d_(t);break;case 22:if(l=r!==null&&r.memoizedState!==null,t.mode&1?(at=(u=at)||l,Er(e,t),at=u):Er(e,t),Jr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&(t.mode&1)!==0)for(b=t,l=t.child;l!==null;){for(d=b=l;b!==null;){switch(f=b,y=f.child,f.tag){case 0:case 11:case 14:case 15:$a(4,f,f.return);break;case 1:io(f,f.return);var C=f.stateNode;if(typeof C.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(S){Ce(n,r,S)}}break;case 5:io(f,f.return);break;case 22:if(f.memoizedState!==null){f_(d);continue}}y!==null?(y.return=f,b=y):f_(d)}l=l.sibling}e:for(l=null,d=t;;){if(d.tag===5){if(l===null){l=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=b_("display",o))}catch(S){Ce(t,t.return,S)}}}else if(d.tag===6){if(l===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){Ce(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Er(e,t),Jr(t),n&4&&d_(t);break;case 21:break;default:Er(e,t),Jr(t)}}function Jr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(rT(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Qa(i,""),n.flags&=-33);var s=p_(t);wm(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=p_(t);Pm(t,a,o);break;default:throw Error(R(161))}}catch(c){Ce(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dz(t,e,r){b=t,sT(t,e,r)}function sT(t,e,r){for(var n=(t.mode&1)!==0;b!==null;){var i=b,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||ul;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||at;a=ul;var u=at;if(ul=o,(at=c)&&!u)for(b=i;b!==null;)o=b,c=o.child,o.tag===22&&o.memoizedState!==null?v_(i):c!==null?(c.return=o,b=c):v_(i);for(;s!==null;)b=s,sT(s,e,r),s=s.sibling;b=i,ul=a,at=u}h_(t,e,r)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,b=s):h_(t,e,r)}}function h_(t){for(;b!==null;){var e=b;if((e.flags&8772)!==0){var r=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:at||Zl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!at)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:_r(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&X0(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}X0(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var d=l.dehydrated;d!==null&&ec(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}at||e.flags&512&&Cm(e)}catch(f){Ce(e,e.return,f)}}if(e===t){b=null;break}if(r=e.sibling,r!==null){r.return=e.return,b=r;break}b=e.return}}function f_(t){for(;b!==null;){var e=b;if(e===t){b=null;break}var r=e.sibling;if(r!==null){r.return=e.return,b=r;break}b=e.return}}function v_(t){for(;b!==null;){var e=b;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Zl(4,e)}catch(c){Ce(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Ce(e,i,c)}}var s=e.return;try{Cm(e)}catch(c){Ce(e,s,c)}break;case 5:var o=e.return;try{Cm(e)}catch(c){Ce(e,o,c)}}}catch(c){Ce(e,e.return,c)}if(e===t){b=null;break}var a=e.sibling;if(a!==null){a.return=e.return,b=a;break}b=e.return}}var Nz=Math.ceil,Bl=kn.ReactCurrentDispatcher,oy=kn.ReactCurrentOwner,ar=kn.ReactCurrentBatchConfig,G=0,Be=null,Ae=null,Ke=0,Ut=0,so=gi(0),Ne=0,pc=null,as=0,ep=0,ay=0,Ka=null,At=null,cy=0,So=1/0,Cn=null,Fl=!1,Rm=null,li=null,ll=!1,ii=null,Ul=0,Ja=0,Em=null,yl=-1,Sl=0;function Pt(){return(G&6)!==0?Re():yl!==-1?yl:yl=Re()}function pi(t){return(t.mode&1)===0?1:(G&2)!==0&&Ke!==0?Ke&-Ke:yz.transition!==null?(Sl===0&&(Sl=V_()),Sl):(t=se,t!==0||(t=window.event,t=t===void 0?16:Q_(t.type)),t)}function kr(t,e,r,n){if(50<Ja)throw Ja=0,Em=null,Error(R(185));dc(t,r,n),((G&2)===0||t!==Be)&&(t===Be&&((G&2)===0&&(ep|=r),Ne===4&&ri(t,Ke)),xt(t,n),r===1&&G===0&&(e.mode&1)===0&&(So=Re()+500,Ql&&mi()))}function xt(t,e){var r=t.callbackNode;CN(t,e);var n=_l(t,t===Be?Ke:0);if(n===0)r!==null&&R0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&R0(r),e===1)t.tag===0?mz(g_.bind(null,t)):vI(g_.bind(null,t)),hz(function(){(G&6)===0&&mi()}),r=null;else{switch(W_(n)){case 1:r=Dm;break;case 4:r=F_;break;case 16:r=El;break;case 536870912:r=U_;break;default:r=El}r=hT(r,oT.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function oT(t,e){if(yl=-1,Sl=0,(G&6)!==0)throw Error(R(327));var r=t.callbackNode;if(po()&&t.callbackNode!==r)return null;var n=_l(t,t===Be?Ke:0);if(n===0)return null;if((n&30)!==0||(n&t.expiredLanes)!==0||e)e=Vl(t,n);else{e=n;var i=G;G|=2;var s=cT();(Be!==t||Ke!==e)&&(Cn=null,So=Re()+500,rs(t,e));do try{Lz();break}catch(a){aT(t,a)}while(!0);Km(),Bl.current=s,G=i,Ae!==null?e=0:(Be=null,Ke=0,e=Ne)}if(e!==0){if(e===2&&(i=Xg(t),i!==0&&(n=i,e=_m(t,i))),e===1)throw r=pc,rs(t,0),ri(t,n),xt(t,Re()),r;if(e===6)ri(t,n);else{if(i=t.current.alternate,(n&30)===0&&!zz(i)&&(e=Vl(t,n),e===2&&(s=Xg(t),s!==0&&(n=s,e=_m(t,s))),e===1))throw r=pc,rs(t,0),ri(t,n),xt(t,Re()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(R(345));case 2:Yi(t,At,Cn);break;case 3:if(ri(t,n),(n&130023424)===n&&(e=cy+500-Re(),10<e)){if(_l(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sm(Yi.bind(null,t,At,Cn),e);break}Yi(t,At,Cn);break;case 4:if(ri(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Ar(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Re()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nz(n/1960))-n,10<n){t.timeoutHandle=sm(Yi.bind(null,t,At,Cn),n);break}Yi(t,At,Cn);break;case 5:Yi(t,At,Cn);break;default:throw Error(R(329))}}}return xt(t,Re()),t.callbackNode===r?oT.bind(null,t):null}function _m(t,e){var r=Ka;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=Vl(t,e),t!==2&&(e=At,At=r,e!==null&&Im(e)),t}function Im(t){At===null?At=t:At.push.apply(At,t)}function zz(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!br(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ri(t,e){for(e&=~ay,e&=~ep,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ar(e),n=1<<r;t[r]=-1,e&=~n}}function g_(t){if((G&6)!==0)throw Error(R(327));po();var e=_l(t,0);if((e&1)===0)return xt(t,Re()),null;var r=Vl(t,e);if(t.tag!==0&&r===2){var n=Xg(t);n!==0&&(e=n,r=_m(t,n))}if(r===1)throw r=pc,rs(t,0),ri(t,e),xt(t,Re()),r;if(r===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yi(t,At,Cn),xt(t,Re()),null}function uy(t,e){var r=G;G|=1;try{return t(e)}finally{G=r,G===0&&(So=Re()+500,Ql&&mi())}}function cs(t){ii!==null&&ii.tag===0&&(G&6)===0&&po();var e=G;G|=1;var r=ar.transition,n=se;try{if(ar.transition=null,se=1,t)return t()}finally{se=n,ar.transition=r,G=e,(G&6)===0&&mi()}}function ly(){Ut=so.current,pe(so)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,dz(r)),Ae!==null)for(r=Ae.return;r!==null;){var n=r;switch(Wm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bl();break;case 3:mo(),pe(bt),pe(ct),Zm();break;case 5:Ym(n);break;case 4:mo();break;case 13:pe(ge);break;case 19:pe(ge);break;case 10:Jm(n.type._context);break;case 22:case 23:ly()}r=r.return}if(Be=t,Ae=t=di(t.current,null),Ke=Ut=e,Ne=0,pc=null,ay=ep=as=0,At=Ka=null,es!==null){for(e=0;e<es.length;e++)if(r=es[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}es=null}return t}function aT(t,e){do{var r=Ae;try{if(Km(),vl.current=ql,Ll){for(var n=me.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ll=!1}if(os=0,qe=De=me=null,Ha=!1,cc=0,oy.current=null,r===null||r.return===null){Ne=1,pc=e,Ae=null;break}e:{var s=t,o=r.return,a=r,c=e;if(e=Ke,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=a,d=l.tag;if((l.mode&1)===0&&(d===0||d===11||d===15)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var y=n_(o);if(y!==null){y.flags&=-257,i_(y,o,a,s,e),y.mode&1&&r_(s,u,e),e=y,c=u;var C=e.updateQueue;if(C===null){var S=new Set;S.add(c),e.updateQueue=S}else C.add(c);break e}else{if((e&1)===0){r_(s,u,e),py();break e}c=Error(R(426))}}else if(fe&&a.mode&1){var M=n_(o);if(M!==null){(M.flags&65536)===0&&(M.flags|=256),i_(M,o,a,s,e),Hm(yo(c,a));break e}}s=c=yo(c,a),Ne!==4&&(Ne=2),Ka===null?Ka=[s]:Ka.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=WI(s,c,e);Q0(s,g);break e;case 1:a=c;var v=s.type,m=s.stateNode;if((s.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(li===null||!li.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=HI(s,a,e);Q0(s,P);break e}}s=s.return}while(s!==null)}lT(r)}catch(I){e=I,Ae===r&&r!==null&&(Ae=r=r.return);continue}break}while(!0)}function cT(){var t=Bl.current;return Bl.current=ql,t===null?ql:t}function py(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Be===null||(as&268435455)===0&&(ep&268435455)===0||ri(Be,Ke)}function Vl(t,e){var r=G;G|=2;var n=cT();(Be!==t||Ke!==e)&&(Cn=null,rs(t,e));do try{jz();break}catch(i){aT(t,i)}while(!0);if(Km(),G=r,Bl.current=n,Ae!==null)throw Error(R(261));return Be=null,Ke=0,Ne}function jz(){for(;Ae!==null;)uT(Ae)}function Lz(){for(;Ae!==null&&!pN();)uT(Ae)}function uT(t){var e=dT(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?lT(t):Ae=e,oy.current=null}function lT(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&32768)===0){if(r=bz(r,e,Ut),r!==null){Ae=r;return}}else{if(r=Oz(r,e),r!==null){r.flags&=32767,Ae=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ne=6,Ae=null;return}}if(e=e.sibling,e!==null){Ae=e;return}Ae=e=t}while(e!==null);Ne===0&&(Ne=5)}function Yi(t,e,r){var n=se,i=ar.transition;try{ar.transition=null,se=1,qz(t,e,r,n)}finally{ar.transition=i,se=n}return null}function qz(t,e,r,n){do po();while(ii!==null);if((G&6)!==0)throw Error(R(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(PN(t,s),t===Be&&(Ae=Be=null,Ke=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||ll||(ll=!0,hT(El,function(){return po(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=ar.transition,ar.transition=null;var o=se;se=1;var a=G;G|=4,oy.current=null,Mz(t,r),iT(r,t),az(nm),Il=!!rm,nm=rm=null,t.current=r,Dz(r,t,i),dN(),G=a,se=o,ar.transition=s}else t.current=r;if(ll&&(ll=!1,ii=t,Ul=i),s=t.pendingLanes,s===0&&(li=null),vN(r.stateNode,n),xt(t,Re()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Fl)throw Fl=!1,t=Rm,Rm=null,t;return(Ul&1)!==0&&t.tag!==0&&po(),s=t.pendingLanes,(s&1)!==0?t===Em?Ja++:(Ja=0,Em=t):Ja=0,mi(),null}function po(){if(ii!==null){var t=W_(Ul),e=ar.transition,r=se;try{if(ar.transition=null,se=16>t?16:t,ii===null)var n=!1;else{if(t=ii,ii=null,Ul=0,(G&6)!==0)throw Error(R(331));var i=G;for(G|=4,b=t.current;b!==null;){var s=b,o=s.child;if((b.flags&16)!==0){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(b=u;b!==null;){var l=b;switch(l.tag){case 0:case 11:case 15:$a(8,l,s)}var d=l.child;if(d!==null)d.return=l,b=d;else for(;b!==null;){l=b;var f=l.sibling,y=l.return;if(tT(l),l===u){b=null;break}if(f!==null){f.return=y,b=f;break}b=y}}}var C=s.alternate;if(C!==null){var S=C.child;if(S!==null){C.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}b=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,b=o;else e:for(;b!==null;){if(s=b,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:$a(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,b=g;break e}b=s.return}}var v=t.current;for(b=v;b!==null;){o=b;var m=o.child;if((o.subtreeFlags&2064)!==0&&m!==null)m.return=o,b=m;else e:for(o=v;b!==null;){if(a=b,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Zl(9,a)}}catch(I){Ce(a,a.return,I)}if(a===o){b=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,b=P;break e}b=a.return}}if(G=i,mi(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Hl,t)}catch{}n=!0}return n}finally{se=r,ar.transition=e}}return!1}function m_(t,e,r){e=yo(r,e),e=WI(t,e,1),t=ui(t,e,1),e=Pt(),t!==null&&(dc(t,1,e),xt(t,e))}function Ce(t,e,r){if(t.tag===3)m_(t,t,r);else for(;e!==null;){if(e.tag===3){m_(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(li===null||!li.has(n))){t=yo(r,t),t=HI(e,t,1),e=ui(e,t,1),t=Pt(),e!==null&&(dc(e,1,t),xt(e,t));break}}e=e.return}}function Bz(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&r,Be===t&&(Ke&r)===r&&(Ne===4||Ne===3&&(Ke&130023424)===Ke&&500>Re()-cy?rs(t,0):ay|=r),xt(t,e)}function pT(t,e){e===0&&((t.mode&1)===0?e=1:(e=Qu,Qu<<=1,(Qu&130023424)===0&&(Qu=4194304)));var r=Pt();t=Tn(t,e),t!==null&&(dc(t,e,r),xt(t,r))}function Fz(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),pT(t,r)}function Uz(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(e),pT(t,r)}var dT;dT=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)kt=!0;else{if((t.lanes&r)===0&&(e.flags&128)===0)return kt=!1,kz(t,e,r);kt=(t.flags&131072)!==0}else kt=!1,fe&&(e.flags&1048576)!==0&&gI(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ml(t,e),t=e.pendingProps;var i=fo(e,ct.current);lo(e,r),i=ty(null,e,n,t,i,r);var s=ry();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(n)?(s=!0,Ol(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qm(e),i.updater=Yl,e.stateNode=i,i._reactInternals=e,dm(e,n,t,r),e=vm(null,e,n,!0,s,r)):(e.tag=0,fe&&s&&Vm(e),Ct(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ml(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Wz(n),t=_r(n,t),i){case 0:e=fm(null,e,n,t,r);break e;case 1:e=a_(null,e,n,t,r);break e;case 11:e=s_(null,e,n,t,r);break e;case 14:e=o_(null,e,n,_r(n.type,t),r);break e}throw Error(R(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_r(n,i),fm(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_r(n,i),a_(t,e,n,i,r);case 3:e:{if(GI(e),t===null)throw Error(R(387));n=e.pendingProps,s=e.memoizedState,i=s.element,wI(t,e),zl(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=yo(Error(R(423)),e),e=c_(t,e,n,r,i);break e}else if(n!==i){i=yo(Error(R(424)),e),e=c_(t,e,n,r,i);break e}else for(Vt=ci(e.stateNode.containerInfo.firstChild),Wt=e,fe=!0,Tr=null,r=CI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vo(),n===i){e=An(t,e,r);break e}Ct(t,e,n,r)}e=e.child}return e;case 5:return RI(e),t===null&&um(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,im(n,i)?o=null:s!==null&&im(n,s)&&(e.flags|=32),JI(t,e),Ct(t,e,o,r),e.child;case 6:return t===null&&um(e),null;case 13:return QI(t,e,r);case 4:return Xm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=go(e,null,n,r):Ct(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_r(n,i),s_(t,e,n,i,r);case 7:return Ct(t,e,e.pendingProps,r),e.child;case 8:return Ct(t,e,e.pendingProps.children,r),e.child;case 12:return Ct(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ce(Dl,n._currentValue),n._currentValue=o,s!==null)if(br(s.value,o)){if(s.children===i.children&&!bt.current){e=An(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=En(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),lm(s.return,r,e),a.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(R(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),lm(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ct(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,lo(e,r),i=cr(i),n=n(i),e.flags|=1,Ct(t,e,n,r),e.child;case 14:return n=e.type,i=_r(n,e.pendingProps),i=_r(n.type,i),o_(t,e,n,i,r);case 15:return $I(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_r(n,i),ml(t,e),e.tag=1,Ot(n)?(t=!0,Ol(e)):t=!1,lo(e,r),VI(e,n,i),dm(e,n,i,r),vm(null,e,n,!0,t,r);case 19:return XI(t,e,r);case 22:return KI(t,e,r)}throw Error(R(156,e.tag))};function hT(t,e){return B_(t,e)}function Vz(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(t,e,r,n){return new Vz(t,e,r,n)}function dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wz(t){if(typeof t=="function")return dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Om)return 11;if(t===xm)return 14}return 2}function di(t,e){var r=t.alternate;return r===null?(r=or(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Cl(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")dy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gs:return ns(r.children,i,s,e);case bm:o=8,i|=8;break;case zg:return t=or(12,r,e,i|2),t.elementType=zg,t.lanes=s,t;case jg:return t=or(13,r,e,i),t.elementType=jg,t.lanes=s,t;case Lg:return t=or(19,r,e,i),t.elementType=Lg,t.lanes=s,t;case R_:return tp(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P_:o=10;break e;case w_:o=9;break e;case Om:o=11;break e;case xm:o=14;break e;case Zn:o=16,n=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=or(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ns(t,e,r,n){return t=or(7,t,n,e),t.lanes=r,t}function tp(t,e,r,n){return t=or(22,t,n,e),t.elementType=R_,t.lanes=r,t.stateNode={isHidden:!1},t}function Mg(t,e,r){return t=or(6,t,null,e),t.lanes=r,t}function Dg(t,e,r){return e=or(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hz(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hy(t,e,r,n,i,s,o,a,c){return t=new Hz(t,e,r,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=or(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qm(s),t}function $z(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function fT(t){if(!t)return fi;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var r=t.type;if(Ot(r))return fI(t,r,e)}return e}function vT(t,e,r,n,i,s,o,a,c){return t=hy(r,n,!0,t,i,s,o,a,c),t.context=fT(null),r=t.current,n=Pt(),i=pi(r),s=En(n,i),s.callback=e??null,ui(r,s,i),t.current.lanes=i,dc(t,i,n),xt(t,n),t}function rp(t,e,r,n){var i=e.current,s=Pt(),o=pi(i);return r=fT(r),e.context===null?e.context=r:e.pendingContext=r,e=En(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ui(i,e,o),t!==null&&(kr(t,i,o,s),fl(t,i,o)),o}function Wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function y_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function fy(t,e){y_(t,e),(t=t.alternate)&&y_(t,e)}function Kz(){return null}var gT=typeof reportError=="function"?reportError:function(t){console.error(t)};function vy(t){this._internalRoot=t}np.prototype.render=vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));rp(t,e,null,null)};np.prototype.unmount=vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){rp(null,t,null,null)}),e[In]=null}};function np(t){this._internalRoot=t}np.prototype.unstable_scheduleHydration=function(t){if(t){var e=K_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ti.length&&e!==0&&e<ti[r].priority;r++);ti.splice(r,0,t),r===0&&G_(t)}};function gy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S_(){}function Jz(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Wl(o);s.call(u)}}var o=vT(e,n,t,0,null,!1,!1,"",S_);return t._reactRootContainer=o,t[In]=o.current,nc(t.nodeType===8?t.parentNode:t),cs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Wl(c);a.call(u)}}var c=hy(t,0,!1,null,null,!1,!1,"",S_);return t._reactRootContainer=c,t[In]=c.current,nc(t.nodeType===8?t.parentNode:t),cs(function(){rp(e,c,r,n)}),c}function sp(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Wl(o);a.call(c)}}rp(e,o,t,i)}else o=Jz(r,e,t,i,n);return Wl(o)}H_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=La(e.pendingLanes);r!==0&&(Nm(e,r|1),xt(e,Re()),(G&6)===0&&(So=Re()+500,mi()))}break;case 13:cs(function(){var n=Tn(t,1);if(n!==null){var i=Pt();kr(n,t,1,i)}}),fy(t,1)}};zm=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var r=Pt();kr(e,t,134217728,r)}fy(t,134217728)}};$_=function(t){if(t.tag===13){var e=pi(t),r=Tn(t,e);if(r!==null){var n=Pt();kr(r,t,e,n)}fy(t,e)}};K_=function(){return se};J_=function(t,e){var r=se;try{return se=t,e()}finally{se=r}};Jg=function(t,e,r){switch(e){case"input":if(Fg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Gl(n);if(!i)throw Error(R(90));__(n),Fg(n,i)}}}break;case"textarea":T_(t,r);break;case"select":e=r.value,e!=null&&oo(t,!!r.multiple,e,!1)}};D_=uy;N_=cs;var Gz={usingClientEntryPoint:!1,Events:[fc,Zs,Gl,x_,M_,uy]},Da={findFiberByHostInstance:Zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qz={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=L_(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||Kz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Na=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Na.isDisabled&&Na.supportsFiber))try{Hl=Na.inject(Qz),Xr=Na}catch{}var Na;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gz;Kt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gy(e))throw Error(R(200));return $z(t,e,null,r)};Kt.createRoot=function(t,e){if(!gy(t))throw Error(R(299));var r=!1,n="",i=gT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hy(t,1,!1,null,null,r,!1,n,i),t[In]=e.current,nc(t.nodeType===8?t.parentNode:t),new vy(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=L_(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return cs(t)};Kt.hydrate=function(t,e,r){if(!ip(e))throw Error(R(200));return sp(null,t,e,!0,r)};Kt.hydrateRoot=function(t,e,r){if(!gy(t))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=gT;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=vT(e,null,t,1,r??null,i,!1,s,o),t[In]=e.current,nc(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new np(e)};Kt.render=function(t,e,r){if(!ip(e))throw Error(R(200));return sp(null,t,e,!1,r)};Kt.unmountComponentAtNode=function(t){if(!ip(t))throw Error(R(40));return t._reactRootContainer?(cs(function(){sp(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Kt.unstable_batchedUpdates=uy;Kt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ip(r))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return sp(t,e,r,!1,n)};Kt.version="18.3.1-next-f1338f8080-20240426"});var CT=p((bU,ST)=>{"use strict";function yT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yT)}catch(t){console.error(t)}}yT(),ST.exports=mT()});var Ry=p(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});wy.default=mj;var fp,gj=new Uint8Array(16);function mj(){if(!fp&&(fp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fp(gj)}});var t1=p(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.default=void 0;var yj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;vp.default=yj});var Pc=p(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.default=void 0;var Sj=Cj(t1());function Cj(t){return t&&t.__esModule?t:{default:t}}function Pj(t){return typeof t=="string"&&Sj.default.test(t)}var wj=Pj;gp.default=wj});var Rc=p(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.default=void 0;wc.unsafeStringify=r1;var Rj=Ej(Pc());function Ej(t){return t&&t.__esModule?t:{default:t}}var Qe=[];for(let t=0;t<256;++t)Qe.push((t+256).toString(16).slice(1));function r1(t,e=0){return Qe[t[e+0]]+Qe[t[e+1]]+Qe[t[e+2]]+Qe[t[e+3]]+"-"+Qe[t[e+4]]+Qe[t[e+5]]+"-"+Qe[t[e+6]]+Qe[t[e+7]]+"-"+Qe[t[e+8]]+Qe[t[e+9]]+"-"+Qe[t[e+10]]+Qe[t[e+11]]+Qe[t[e+12]]+Qe[t[e+13]]+Qe[t[e+14]]+Qe[t[e+15]]}function _j(t,e=0){let r=r1(t,e);if(!(0,Rj.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Ij=_j;wc.default=Ij});var i1=p(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.default=void 0;var Tj=kj(Ry()),Aj=Rc();function kj(t){return t&&t.__esModule?t:{default:t}}var n1,Ey,_y=0,Iy=0;function bj(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let s=t.node||n1,o=t.clockseq!==void 0?t.clockseq:Ey;if(s==null||o==null){let f=t.random||(t.rng||Tj.default)();s==null&&(s=n1=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),o==null&&(o=Ey=(f[6]<<8|f[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Iy+1,u=a-_y+(c-Iy)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||a>_y)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_y=a,Iy=c,Ey=o,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let f=0;f<6;++f)i[n+f]=s[f];return e||(0,Aj.unsafeStringify)(i)}var Oj=bj;mp.default=Oj});var Ty=p(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.default=void 0;var xj=Mj(Pc());function Mj(t){return t&&t.__esModule?t:{default:t}}function Dj(t){if(!(0,xj.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Nj=Dj;yp.default=Nj});var Ay=p(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.URL=hs.DNS=void 0;hs.default=Bj;var zj=Rc(),jj=Lj(Ty());function Lj(t){return t&&t.__esModule?t:{default:t}}function qj(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var s1="6ba7b810-9dad-11d1-80b4-00c04fd430c8";hs.DNS=s1;var o1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";hs.URL=o1;function Bj(t,e,r){function n(i,s,o,a){var c;if(typeof i=="string"&&(i=qj(i)),typeof s=="string"&&(s=(0,jj.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=u[l];return o}return(0,zj.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=s1,n.URL=o1,n}});var c1=p(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.default=void 0;function Fj(t){if(typeof t=="string"){let e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Uj(Vj(Wj(t),t.length*8))}function Uj(t){let e=[],r=t.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){let s=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function a1(t){return(t+64>>>9<<4)+14+1}function Vj(t,e){t[e>>5]|=128<<e%32,t[a1(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){let a=r,c=n,u=i,l=s;r=ut(r,n,i,s,t[o],7,-680876936),s=ut(s,r,n,i,t[o+1],12,-389564586),i=ut(i,s,r,n,t[o+2],17,606105819),n=ut(n,i,s,r,t[o+3],22,-1044525330),r=ut(r,n,i,s,t[o+4],7,-176418897),s=ut(s,r,n,i,t[o+5],12,1200080426),i=ut(i,s,r,n,t[o+6],17,-1473231341),n=ut(n,i,s,r,t[o+7],22,-45705983),r=ut(r,n,i,s,t[o+8],7,1770035416),s=ut(s,r,n,i,t[o+9],12,-1958414417),i=ut(i,s,r,n,t[o+10],17,-42063),n=ut(n,i,s,r,t[o+11],22,-1990404162),r=ut(r,n,i,s,t[o+12],7,1804603682),s=ut(s,r,n,i,t[o+13],12,-40341101),i=ut(i,s,r,n,t[o+14],17,-1502002290),n=ut(n,i,s,r,t[o+15],22,1236535329),r=lt(r,n,i,s,t[o+1],5,-165796510),s=lt(s,r,n,i,t[o+6],9,-1069501632),i=lt(i,s,r,n,t[o+11],14,643717713),n=lt(n,i,s,r,t[o],20,-373897302),r=lt(r,n,i,s,t[o+5],5,-701558691),s=lt(s,r,n,i,t[o+10],9,38016083),i=lt(i,s,r,n,t[o+15],14,-660478335),n=lt(n,i,s,r,t[o+4],20,-405537848),r=lt(r,n,i,s,t[o+9],5,568446438),s=lt(s,r,n,i,t[o+14],9,-1019803690),i=lt(i,s,r,n,t[o+3],14,-187363961),n=lt(n,i,s,r,t[o+8],20,1163531501),r=lt(r,n,i,s,t[o+13],5,-1444681467),s=lt(s,r,n,i,t[o+2],9,-51403784),i=lt(i,s,r,n,t[o+7],14,1735328473),n=lt(n,i,s,r,t[o+12],20,-1926607734),r=pt(r,n,i,s,t[o+5],4,-378558),s=pt(s,r,n,i,t[o+8],11,-2022574463),i=pt(i,s,r,n,t[o+11],16,1839030562),n=pt(n,i,s,r,t[o+14],23,-35309556),r=pt(r,n,i,s,t[o+1],4,-1530992060),s=pt(s,r,n,i,t[o+4],11,1272893353),i=pt(i,s,r,n,t[o+7],16,-155497632),n=pt(n,i,s,r,t[o+10],23,-1094730640),r=pt(r,n,i,s,t[o+13],4,681279174),s=pt(s,r,n,i,t[o],11,-358537222),i=pt(i,s,r,n,t[o+3],16,-722521979),n=pt(n,i,s,r,t[o+6],23,76029189),r=pt(r,n,i,s,t[o+9],4,-640364487),s=pt(s,r,n,i,t[o+12],11,-421815835),i=pt(i,s,r,n,t[o+15],16,530742520),n=pt(n,i,s,r,t[o+2],23,-995338651),r=dt(r,n,i,s,t[o],6,-198630844),s=dt(s,r,n,i,t[o+7],10,1126891415),i=dt(i,s,r,n,t[o+14],15,-1416354905),n=dt(n,i,s,r,t[o+5],21,-57434055),r=dt(r,n,i,s,t[o+12],6,1700485571),s=dt(s,r,n,i,t[o+3],10,-1894986606),i=dt(i,s,r,n,t[o+10],15,-1051523),n=dt(n,i,s,r,t[o+1],21,-2054922799),r=dt(r,n,i,s,t[o+8],6,1873313359),s=dt(s,r,n,i,t[o+15],10,-30611744),i=dt(i,s,r,n,t[o+6],15,-1560198380),n=dt(n,i,s,r,t[o+13],21,1309151649),r=dt(r,n,i,s,t[o+4],6,-145523070),s=dt(s,r,n,i,t[o+11],10,-1120210379),i=dt(i,s,r,n,t[o+2],15,718787259),n=dt(n,i,s,r,t[o+9],21,-343485551),r=Si(r,a),n=Si(n,c),i=Si(i,u),s=Si(s,l)}return[r,n,i,s]}function Wj(t){if(t.length===0)return[];let e=t.length*8,r=new Uint32Array(a1(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function Si(t,e){let r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function Hj(t,e){return t<<e|t>>>32-e}function Sp(t,e,r,n,i,s){return Si(Hj(Si(Si(e,t),Si(n,s)),i),r)}function ut(t,e,r,n,i,s,o){return Sp(e&r|~e&n,t,e,i,s,o)}function lt(t,e,r,n,i,s,o){return Sp(e&n|r&~n,t,e,i,s,o)}function pt(t,e,r,n,i,s,o){return Sp(e^r^n,t,e,i,s,o)}function dt(t,e,r,n,i,s,o){return Sp(r^(e|~n),t,e,i,s,o)}var $j=Fj;Cp.default=$j});var l1=p(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.default=void 0;var Kj=u1(Ay()),Jj=u1(c1());function u1(t){return t&&t.__esModule?t:{default:t}}var Gj=(0,Kj.default)("v3",48,Jj.default),Qj=Gj;Pp.default=Qj});var p1=p(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});wp.default=void 0;var Xj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yj={randomUUID:Xj};wp.default=Yj});var f1=p(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.default=void 0;var d1=h1(p1()),Zj=h1(Ry()),eL=Rc();function h1(t){return t&&t.__esModule?t:{default:t}}function tL(t,e,r){if(d1.default.randomUUID&&!e&&!t)return d1.default.randomUUID();t=t||{};let n=t.random||(t.rng||Zj.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,eL.unsafeStringify)(n)}var rL=tL;Rp.default=rL});var v1=p(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.default=void 0;function nL(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function ky(t,e){return t<<e|t>>>32-e}function iL(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let o=unescape(encodeURIComponent(t));t=[];for(let a=0;a<o.length;++a)t.push(o.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let n=t.length/4+2,i=Math.ceil(n/16),s=new Array(i);for(let o=0;o<i;++o){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=t[o*64+c*4]<<24|t[o*64+c*4+1]<<16|t[o*64+c*4+2]<<8|t[o*64+c*4+3];s[o]=a}s[i-1][14]=(t.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(t.length-1)*8&4294967295;for(let o=0;o<i;++o){let a=new Uint32Array(80);for(let y=0;y<16;++y)a[y]=s[o][y];for(let y=16;y<80;++y)a[y]=ky(a[y-3]^a[y-8]^a[y-14]^a[y-16],1);let c=r[0],u=r[1],l=r[2],d=r[3],f=r[4];for(let y=0;y<80;++y){let C=Math.floor(y/20),S=ky(c,5)+nL(C,u,l,d)+f+e[C]+a[y]>>>0;f=d,d=l,l=ky(u,30)>>>0,u=c,c=S}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var sL=iL;Ep.default=sL});var m1=p(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.default=void 0;var oL=g1(Ay()),aL=g1(v1());function g1(t){return t&&t.__esModule?t:{default:t}}var cL=(0,oL.default)("v5",80,aL.default),uL=cL;_p.default=uL});var y1=p(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.default=void 0;var lL="00000000-0000-0000-0000-000000000000";Ip.default=lL});var S1=p(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.default=void 0;var pL=dL(Pc());function dL(t){return t&&t.__esModule?t:{default:t}}function hL(t){if(!(0,pL.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var fL=hL;Tp.default=fL});var C1=p(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Object.defineProperty(Or,"NIL",{enumerable:!0,get:function(){return SL.default}});Object.defineProperty(Or,"parse",{enumerable:!0,get:function(){return RL.default}});Object.defineProperty(Or,"stringify",{enumerable:!0,get:function(){return wL.default}});Object.defineProperty(Or,"v1",{enumerable:!0,get:function(){return vL.default}});Object.defineProperty(Or,"v3",{enumerable:!0,get:function(){return gL.default}});Object.defineProperty(Or,"v4",{enumerable:!0,get:function(){return mL.default}});Object.defineProperty(Or,"v5",{enumerable:!0,get:function(){return yL.default}});Object.defineProperty(Or,"validate",{enumerable:!0,get:function(){return PL.default}});Object.defineProperty(Or,"version",{enumerable:!0,get:function(){return CL.default}});var vL=bn(i1()),gL=bn(l1()),mL=bn(f1()),yL=bn(m1()),SL=bn(y1()),CL=bn(S1()),PL=bn(Pc()),wL=bn(Rc()),RL=bn(Ty());function bn(t){return t&&t.__esModule?t:{default:t}}});var Ci=p(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.createNoDashGuid=xo.createGuid=void 0;var EL=C1(),P1=()=>(0,EL.v4)();xo.createGuid=P1;var _L=()=>P1().replace(new RegExp("-","g"),"").toUpperCase();xo.createNoDashGuid=_L});var Mo=p(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.PlatformEvent=fs.EventType=void 0;var IL=Ci(),TL;(function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.None=4]="None"})(TL=fs.EventType||(fs.EventType={}));var by=class{constructor(e,r){this.privName=e,this.privEventId=(0,IL.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=r,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}};fs.PlatformEvent=by});var w1=p(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.AudioStreamNodeErrorEvent=Pe.AudioStreamNodeDetachedEvent=Pe.AudioStreamNodeAttachedEvent=Pe.AudioStreamNodeAttachingEvent=Pe.AudioStreamNodeEvent=Pe.AudioSourceErrorEvent=Pe.AudioSourceOffEvent=Pe.AudioSourceReadyEvent=Pe.AudioSourceInitializingEvent=Pe.AudioSourceEvent=void 0;var Oy=Mo(),Pi=class extends Oy.PlatformEvent{constructor(e,r,n=Oy.EventType.Info){super(e,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}};Pe.AudioSourceEvent=Pi;var xy=class extends Pi{constructor(e){super("AudioSourceInitializingEvent",e)}};Pe.AudioSourceInitializingEvent=xy;var My=class extends Pi{constructor(e){super("AudioSourceReadyEvent",e)}};Pe.AudioSourceReadyEvent=My;var Dy=class extends Pi{constructor(e){super("AudioSourceOffEvent",e)}};Pe.AudioSourceOffEvent=Dy;var Ny=class extends Pi{constructor(e,r){super("AudioSourceErrorEvent",e,Oy.EventType.Error),this.privError=r}get error(){return this.privError}};Pe.AudioSourceErrorEvent=Ny;var vs=class extends Pi{constructor(e,r,n){super(e,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}};Pe.AudioStreamNodeEvent=vs;var zy=class extends vs{constructor(e,r){super("AudioStreamNodeAttachingEvent",e,r)}};Pe.AudioStreamNodeAttachingEvent=zy;var jy=class extends vs{constructor(e,r){super("AudioStreamNodeAttachedEvent",e,r)}};Pe.AudioStreamNodeAttachedEvent=jy;var Ly=class extends vs{constructor(e,r){super("AudioStreamNodeDetachedEvent",e,r)}};Pe.AudioStreamNodeDetachedEvent=Ly;var qy=class extends vs{constructor(e,r,n){super("AudioStreamNodeErrorEvent",e,r),this.privError=n}get error(){return this.privError}};Pe.AudioStreamNodeErrorEvent=qy});var R1=p(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.ConnectionRedirectEvent=we.ConnectionMessageSentEvent=we.ConnectionMessageReceivedEvent=we.ConnectionEstablishErrorEvent=we.ConnectionErrorEvent=we.ConnectionClosedEvent=we.ConnectionEstablishedEvent=we.ConnectionStartEvent=we.ConnectionEvent=we.ServiceEvent=void 0;var wi=Mo(),By=class extends wi.PlatformEvent{constructor(e,r,n=wi.EventType.Info){super(e,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}};we.ServiceEvent=By;var xr=class extends wi.PlatformEvent{constructor(e,r,n=wi.EventType.Info){super(e,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}};we.ConnectionEvent=xr;var Fy=class extends xr{constructor(e,r,n){super("ConnectionStartEvent",e),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}};we.ConnectionStartEvent=Fy;var Uy=class extends xr{constructor(e){super("ConnectionEstablishedEvent",e)}};we.ConnectionEstablishedEvent=Uy;var Vy=class extends xr{constructor(e,r,n){super("ConnectionClosedEvent",e,wi.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};we.ConnectionClosedEvent=Vy;var Wy=class extends xr{constructor(e,r,n){super("ConnectionErrorEvent",e,wi.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}};we.ConnectionErrorEvent=Wy;var Hy=class extends xr{constructor(e,r,n){super("ConnectionEstablishErrorEvent",e,wi.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};we.ConnectionEstablishErrorEvent=Hy;var $y=class extends xr{constructor(e,r,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};we.ConnectionMessageReceivedEvent=$y;var Ky=class extends xr{constructor(e,r,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}};we.ConnectionMessageSentEvent=Ky;var Jy=class extends xr{constructor(e,r,n,i){super("ConnectionRedirectEvent",e,wi.EventType.Info),this.privRedirectUrl=r,this.privOriginalUrl=n,this.privContext=i}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}};we.ConnectionRedirectEvent=Jy});var Mr=p(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.ObjectDisposedError=Ri.InvalidOperationError=Ri.ArgumentNullError=void 0;var Gy=class extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}};Ri.ArgumentNullError=Gy;var Qy=class extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}};Ri.InvalidOperationError=Qy;var Xy=class extends Error{constructor(e,r){super(r),this.name=e+"ObjectDisposed",this.message=r}};Ri.ObjectDisposedError=Xy});var Zy=p(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.ConnectionMessage=ms.MessageType=void 0;var Ap=Mr(),AL=Ci(),gs;(function(t){t[t.Text=0]="Text",t[t.Binary=1]="Binary"})(gs=ms.MessageType||(ms.MessageType={}));var Yy=class{constructor(e,r,n,i){if(this.privBody=null,e===gs.Text&&r&&typeof r!="string")throw new Ap.InvalidOperationError("Payload must be a string");if(e===gs.Binary&&r&&!(r instanceof ArrayBuffer))throw new Ap.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=r,this.privHeaders=n||{},this.privId=i||(0,AL.createNoDashGuid)(),this.messageType){case gs.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case gs.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===gs.Binary)throw new Ap.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===gs.Text)throw new Ap.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}};ms.ConnectionMessage=Yy});var E1=p(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.ConnectionOpenResponse=void 0;var eS=class{constructor(e,r){this.privStatusCode=e,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};kp.ConnectionOpenResponse=eS});var _1=p(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.DeferralMap=void 0;var tS=class{constructor(){this.privMap={}}add(e,r){this.privMap[e]=r}getId(e){return this.privMap[e]}complete(e,r){try{this.privMap[e].resolve(r)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}};bp.DeferralMap=tS});var nS=p(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.SendingAgentContextMessageEvent=Do.DialogEvent=void 0;var I1=Mo(),Op=class extends I1.PlatformEvent{constructor(e,r=I1.EventType.Info){super(e,r)}};Do.DialogEvent=Op;var rS=class extends Op{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}};Do.SendingAgentContextMessageEvent=rS});var sS=p(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.EventSource=void 0;var kL=Mr(),bL=Ci(),iS=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new kL.ObjectDisposedError("EventSource");if(this.metadata)for(let r in this.metadata)r&&e.metadata&&(e.metadata[r]||(e.metadata[r]=this.metadata[r]));for(let r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](e)}attach(e){let r=(0,bL.createNoDashGuid)();return this.privEventListeners[r]=e,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(e){return this.attach(r=>e.onEvent(r))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>e.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};xp.EventSource=iS});var T1=p(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.Events=void 0;var OL=Mr(),xL=sS(),Mp=class t{static setEventSource(e){if(!e)throw new OL.ArgumentNullError("eventSource");t.privInstance=e}static get instance(){return t.privInstance}};Dp.Events=Mp;Mp.privInstance=new xL.EventSource});var k1=p(A1=>{"use strict";Object.defineProperty(A1,"__esModule",{value:!0})});var b1=p(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.ConnectionState=void 0;var ML;(function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"})(ML=Ec.ConnectionState||(Ec.ConnectionState={}))});var x1=p(O1=>{"use strict";Object.defineProperty(O1,"__esModule",{value:!0})});var D1=p(M1=>{"use strict";Object.defineProperty(M1,"__esModule",{value:!0})});var z1=p(N1=>{"use strict";Object.defineProperty(N1,"__esModule",{value:!0})});var L1=p(j1=>{"use strict";Object.defineProperty(j1,"__esModule",{value:!0})});var B1=p(q1=>{"use strict";Object.defineProperty(q1,"__esModule",{value:!0})});var U1=p(F1=>{"use strict";Object.defineProperty(F1,"__esModule",{value:!0})});var W1=p(V1=>{"use strict";Object.defineProperty(V1,"__esModule",{value:!0})});var $1=p(H1=>{"use strict";Object.defineProperty(H1,"__esModule",{value:!0})});var aS=p(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.List=void 0;var DL=Mr(),oS=class t{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(let r of e)this.privList.push(r)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,r){this.throwIfDisposed(),e===0?this.privList.unshift(r):e===this.privList.length?this.privList.push(r):this.privList.splice(e,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,r){this.throwIfDisposed();let n=this.privList.splice(e,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();let r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=e,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();let r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=e,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();let r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=e,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){let e=Array();return this.privList.forEach(r=>{e.push(r)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let r=0;r<this.length();r++)e(this.privList[r],r)}select(e){this.throwIfDisposed();let r=[];for(let n=0;n<this.privList.length;n++)r.push(e(this.privList[n],n));return new t(r)}where(e){this.throwIfDisposed();let r=new t;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(e){this.throwIfDisposed();let n=this.toArray().sort(e);return new t(n)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((r,n)=>e(n,r))}clone(){return this.throwIfDisposed(),new t(this.toArray())}concat(e){return this.throwIfDisposed(),new t(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new t(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new DL.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(let r in e)r&&e[r]()}};Np.List=oS});var lS=p(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.marshalPromiseToCallbacks=It.Sink=It.Deferred=It.PromiseResultEventSource=It.PromiseResult=It.PromiseState=void 0;var On;(function(t){t[t.None=0]="None",t[t.Resolved=1]="Resolved",t[t.Rejected=2]="Rejected"})(On=It.PromiseState||(It.PromiseState={}));var zp=class{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on(r=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=r)},r=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=r)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}};It.PromiseResult=zp;var jp=class{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,r)=>{this.privOnSetResult=e,this.privOnSetError=r}}};It.PromiseResultEventSource=jp;var cS=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise((e,r)=>{this.privResolve=e,this.privReject=r})}get promise(){return this.privPromise}};It.Deferred=cS;var uS=class{constructor(){this.privState=On.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new jp,this.privPromiseResult=new zp(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==On.None)throw new Error("'Cannot resolve a completed promise'");this.privState=On.Resolved,this.privPromiseResultEvents.setResult(e);for(let r=0;r<this.privSuccessHandlers.length;r++)this.executeSuccessCallback(e,this.privSuccessHandlers[r],this.privErrorHandlers[r]);this.detachHandlers()}reject(e){if(this.privState!==On.None)throw new Error("'Cannot reject a completed promise'");this.privState=On.Rejected,this.privPromiseResultEvents.setError(e);for(let r of this.privErrorHandlers)this.executeErrorCallback(e,r);this.detachHandlers()}on(e,r){e==null&&(e=()=>{}),this.privState===On.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(r)):(this.privState===On.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,r):this.privState===On.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,r),this.detachHandlers())}executeSuccessCallback(e,r,n){try{r(e)}catch(i){this.executeErrorCallback(`'Unhandled callback error: ${i}'`,n)}}executeErrorCallback(e,r){if(r)try{r(e)}catch(n){throw new Error(`'Unhandled callback error: ${n}. InnerError: ${e}'`)}else throw new Error(`'Unhandled error: ${e}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}};It.Sink=uS;function NL(t,e,r){t.then(n=>{try{e&&e(n)}catch(i){if(r)try{if(i instanceof Error){let s=i;r(s.name+": "+s.message)}else r(i)}catch{}}},n=>{if(r)try{if(n instanceof Error){let i=n;r(i.name+": "+i.message)}else r(n)}catch{}})}It.marshalPromiseToCallbacks=NL});var fS=p(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.Queue=void 0;var pS=Mr(),dS=aS(),K1=lS(),_c;(function(t){t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek"})(_c||(_c={}));var hS=class{constructor(e){this.privPromiseStore=new dS.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new dS.List,this.privDetachables=[],this.privSubscribers=new dS.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();let e=new K1.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:_c.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();let e=new K1.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:_c.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;let n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(let i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&e){let i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{e(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;let e=this.privSubscribers,r=this.privList;if(e&&r){for(;r.length()>0&&e.length()>0&&!this.privIsDisposing;){let n=e.removeFirst();if(n.type===_c.Peek)n.deferral.resolve(r.first());else{let i=r.removeFirst();n.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new pS.InvalidOperationError(this.privDisposeReason):new pS.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new pS.InvalidOperationError("Queue disposing")}};Lp.Queue=hS});var J1=p(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.RawWebsocketMessage=void 0;var qp=Zy(),Ic=Mr(),zL=Ci(),vS=class{constructor(e,r,n){if(this.privPayload=null,!r)throw new Ic.ArgumentNullError("payload");if(e===qp.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new Ic.InvalidOperationError("Payload must be ArrayBuffer");if(e===qp.MessageType.Text&&typeof r!="string")throw new Ic.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=r,this.privId=n||(0,zL.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===qp.MessageType.Binary)throw new Ic.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===qp.MessageType.Text)throw new Ic.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};Bp.RawWebsocketMessage=vS});var G1=p(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.RiffPcmEncoder=void 0;var gS=class{constructor(e,r){this.privActualSampleRate=e,this.privDesiredSampleRate=r}encode(e){let r=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;let n=r.length*2,i=new ArrayBuffer(n),s=new DataView(i);return this.floatTo16BitPCM(s,0,r),i}setString(e,r,n){for(let i=0;i<n.length;i++)e.setUint8(r+i,n.charCodeAt(i))}floatTo16BitPCM(e,r,n){for(let i=0;i<n.length;i++,r+=2){let s=Math.max(-1,Math.min(1,n[i]));e.setInt16(r,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(e,r,n){if(!e)return null;if(n===r||n>r)return e;let i=r/n,s=Math.round(e.length/i),o=new Float32Array(s),a=0,c=0;for(;c<s;){let u=Math.round((c+1)*i),l=0,d=0;for(;a<u&&a<e.length;)l+=e[a++],d++;o[c++]=l/d}return o}};Fp.RiffPcmEncoder=gS});var Y1=p(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.Stream=void 0;var Q1=Mr(),jL=Ci(),X1=fS(),mS=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||(0,jL.createNoDashGuid)(),this.privReaderQueue=new X1.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new Q1.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new X1.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Q1.InvalidOperationError("Stream closed")}};Up.Stream=mS});var Vp=p(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.TranslationStatus=void 0;var LL;(function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"})(LL=Tc.TranslationStatus||(Tc.TranslationStatus={}))});var Z1=p(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.ChunkedArrayBufferStream=void 0;var qL=D(),yS=class extends qL.Stream{constructor(e,r){super(r),this.privTargetChunkSize=Math.round(e),this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||this.privNextBufferReadyBytes===0&&e.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(e);return}let r=0;for(;r<e.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);let n=Math.min(e.buffer.byteLength-r,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),s=new Uint8Array(e.buffer.slice(r,n+r));i.set(s,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,r+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};Wp.ChunkedArrayBufferStream=yS});var tA=p(eA=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0})});var rA=p(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.Timeout=void 0;var tn=class t{static load(){let e=new Map([[0,()=>{}]]),r=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:c})=>{if(t.isCallNotification(c)){let{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){let d=r.get(l);if(d===void 0||d!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(t.isClearResponse(c)){let{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),e.delete(l)}else{let{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{let u=Math.random();r.set(u,c),e.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{let l=Math.random();return e.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(t.workerTimers!==null||(t.workerTimers=t.load()),t.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}};Hp.Timeout=tn;tn.workerTimers=null;tn.clearTimeout=t=>tn.timers().clearTimeout(t);tn.setTimeout=(t,e)=>tn.timers().setTimeout(t,e);tn.timers=tn.loadWorkerTimers()});var nA=p($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.OCSPCacheUpdateErrorEvent=$.OCSPResponseRetrievedEvent=$.OCSPCacheFetchErrorEvent=$.OCSPVerificationFailedEvent=$.OCSPCacheHitEvent=$.OCSPCacheEntryNeedsRefreshEvent=$.OCSPCacheEntryExpiredEvent=$.OCSPWSUpgradeStartedEvent=$.OCSPStapleReceivedEvent=$.OCSPCacheUpdateCompleteEvent=$.OCSPDiskCacheStoreEvent=$.OCSPMemoryCacheStoreEvent=$.OCSPCacheUpdateNeededEvent=$.OCSPDiskCacheHitEvent=$.OCSPCacheMissEvent=$.OCSPMemoryCacheHitEvent=$.OCSPEvent=void 0;var Xe=Mo(),ze=class extends Xe.PlatformEvent{constructor(e,r,n){super(e,r),this.privSignature=n}};$.OCSPEvent=ze;var SS=class extends ze{constructor(e){super("OCSPMemoryCacheHitEvent",Xe.EventType.Debug,e)}};$.OCSPMemoryCacheHitEvent=SS;var CS=class extends ze{constructor(e){super("OCSPCacheMissEvent",Xe.EventType.Debug,e)}};$.OCSPCacheMissEvent=CS;var PS=class extends ze{constructor(e){super("OCSPDiskCacheHitEvent",Xe.EventType.Debug,e)}};$.OCSPDiskCacheHitEvent=PS;var wS=class extends ze{constructor(e){super("OCSPCacheUpdateNeededEvent",Xe.EventType.Debug,e)}};$.OCSPCacheUpdateNeededEvent=wS;var RS=class extends ze{constructor(e){super("OCSPMemoryCacheStoreEvent",Xe.EventType.Debug,e)}};$.OCSPMemoryCacheStoreEvent=RS;var ES=class extends ze{constructor(e){super("OCSPDiskCacheStoreEvent",Xe.EventType.Debug,e)}};$.OCSPDiskCacheStoreEvent=ES;var _S=class extends ze{constructor(e){super("OCSPCacheUpdateCompleteEvent",Xe.EventType.Debug,e)}};$.OCSPCacheUpdateCompleteEvent=_S;var IS=class extends ze{constructor(){super("OCSPStapleReceivedEvent",Xe.EventType.Debug,"")}};$.OCSPStapleReceivedEvent=IS;var TS=class extends ze{constructor(e){super("OCSPWSUpgradeStartedEvent",Xe.EventType.Debug,e)}};$.OCSPWSUpgradeStartedEvent=TS;var AS=class extends ze{constructor(e,r){super("OCSPCacheEntryExpiredEvent",Xe.EventType.Debug,e),this.privExpireTime=r}};$.OCSPCacheEntryExpiredEvent=AS;var kS=class extends ze{constructor(e,r,n){super("OCSPCacheEntryNeedsRefreshEvent",Xe.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=r}};$.OCSPCacheEntryNeedsRefreshEvent=kS;var bS=class extends ze{constructor(e,r,n){super("OCSPCacheHitEvent",Xe.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}};$.OCSPCacheHitEvent=bS;var OS=class extends ze{constructor(e,r){super("OCSPVerificationFailedEvent",Xe.EventType.Debug,e),this.privError=r}};$.OCSPVerificationFailedEvent=OS;var xS=class extends ze{constructor(e,r){super("OCSPCacheFetchErrorEvent",Xe.EventType.Debug,e),this.privError=r}};$.OCSPCacheFetchErrorEvent=xS;var MS=class extends ze{constructor(e){super("OCSPResponseRetrievedEvent",Xe.EventType.Debug,e)}};$.OCSPResponseRetrievedEvent=MS;var DS=class extends ze{constructor(e,r){super("OCSPCacheUpdateErrorEvent",Xe.EventType.Debug,e),this.privError=r}};$.OCSPCacheUpdateErrorEvent=DS});var sA=p($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.BackgroundEvent=void 0;var iA=D(),NS=class extends iA.PlatformEvent{constructor(e){super("BackgroundEvent",iA.EventType.Error),this.privError=e}get error(){return this.privError}};$p.BackgroundEvent=NS});var D=p(U=>{"use strict";var BL=U&&U.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Z=U&&U.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BL(e,t,r)};Object.defineProperty(U,"__esModule",{value:!0});U.TranslationStatus=void 0;Z(w1(),U);Z(R1(),U);Z(Zy(),U);Z(E1(),U);Z(_1(),U);Z(nS(),U);Z(Mr(),U);Z(T1(),U);Z(sS(),U);Z(Ci(),U);Z(k1(),U);Z(b1(),U);Z(x1(),U);Z(D1(),U);Z(z1(),U);Z(L1(),U);Z(B1(),U);Z(U1(),U);Z(W1(),U);Z($1(),U);Z(aS(),U);Z(Mo(),U);Z(lS(),U);Z(fS(),U);Z(J1(),U);Z(G1(),U);Z(Y1(),U);var FL=Vp();Object.defineProperty(U,"TranslationStatus",{enumerable:!0,get:function(){return FL.TranslationStatus}});Z(Z1(),U);Z(tA(),U);Z(rA(),U);Z(nA(),U);Z(sA(),U)});var ht=p(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.HeaderNames=void 0;var Jt=class{};Kp.HeaderNames=Jt;Jt.AuthKey="Ocp-Apim-Subscription-Key";Jt.Authorization="Authorization";Jt.SpIDAuthKey="Apim-Subscription-Id";Jt.ConnectionId="X-ConnectionId";Jt.ContentType="Content-Type";Jt.CustomCommandsAppId="X-CommandsAppId";Jt.Path="Path";Jt.RequestId="X-RequestId";Jt.RequestStreamId="X-StreamId";Jt.RequestTimestamp="X-Timestamp"});var Gp=p(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.AuthInfo=void 0;var zS=class{constructor(e,r){this.privHeaderName=e,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}};Jp.AuthInfo=zS});var oA=p(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.CognitiveSubscriptionKeyAuthentication=void 0;var UL=D(),VL=ht(),WL=Gp(),jS=class{constructor(e){if(!e)throw new UL.ArgumentNullError("subscriptionKey");this.privAuthInfo=new WL.AuthInfo(VL.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}};Qp.CognitiveSubscriptionKeyAuthentication=jS});var lA=p(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.CognitiveTokenAuthentication=void 0;var aA=D(),cA=Gp(),uA=ht(),Xp=class t{constructor(e,r){if(!e)throw new aA.ArgumentNullError("fetchCallback");if(!r)throw new aA.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=r}fetch(e){return this.privFetchCallback(e).then(r=>new cA.AuthInfo(uA.HeaderNames.Authorization,r===void 0?void 0:t.privTokenPrefix+r))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(r=>new cA.AuthInfo(uA.HeaderNames.Authorization,r===void 0?void 0:t.privTokenPrefix+r))}};Yp.CognitiveTokenAuthentication=Xp;Xp.privTokenPrefix="Bearer "});var dA=p(pA=>{"use strict";Object.defineProperty(pA,"__esModule",{value:!0})});var fA=p(hA=>{"use strict";Object.defineProperty(hA,"__esModule",{value:!0})});var LS=p(()=>{});var qS=p(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.LogLevel=void 0;var HL=D();Object.defineProperty(Zp,"LogLevel",{enumerable:!0,get:function(){return HL.EventType}})});var q=p(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.Contracts=void 0;var BS=class t{static throwIfNullOrUndefined(e,r){if(e==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(e,r){if(e===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(e,r){if(t.throwIfNullOrUndefined(e,r),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(e,r,n){if(t.throwIfNullOrUndefined(e,r),(""+e).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(e,r,n){if(t.throwIfNullOrUndefined(e,r),(""+e).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,r){if(t.throwIfNullOrUndefined(e,r),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(let n of e)t.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(e,r){t.throwIfNullOrWhitespace(e,r)}static throwIfNotUndefined(e,r){if(e!==void 0)throw new Error("throwIfNotUndefined:"+r)}static throwIfNumberOutOfRange(e,r,n,i){if(t.throwIfNullOrUndefined(e,r),e<n||e>i)throw new Error("throwIfNumberOutOfRange:"+r+" (must be between "+n.toString()+" and "+i.toString()+")")}};ed.Contracts=BS});var gA=p(rn=>{"use strict";var $L=rn&&rn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KL=rn&&rn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JL=rn&&rn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$L(e,t,r);return KL(e,t),e};Object.defineProperty(rn,"__esModule",{value:!0});rn.ConsoleLoggingListener=void 0;var vA=JL(LS()),Ac=qS(),GL=q(),FS=class{constructor(e=Ac.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){GL.Contracts.throwIfNullOrUndefined(vA.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){let r=this.toString(e);if(this.logCallback&&this.logCallback(r),this.privLogPath&&vA.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case Ac.LogLevel.Debug:console.debug(r);break;case Ac.LogLevel.Info:console.info(r);break;case Ac.LogLevel.Warning:console.warn(r);break;case Ac.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(e){let r=[`${e.eventTime}`,`${e.name}`],n=e;for(let i in n)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){let s=n[i],o="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?o=s.toString():o=JSON.stringify(s)),r.push(`${i}: ${o}`)}return r.join(" | ")}};rn.ConsoleLoggingListener=FS});var yA=p(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0})});var Ei=p(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.AudioStreamFormatImpl=xn.AudioStreamFormat=xn.AudioFormatTag=void 0;var kc;(function(t){t[t.PCM=1]="PCM",t[t.MuLaw=2]="MuLaw",t[t.Siren=3]="Siren",t[t.MP3=4]="MP3",t[t.SILKSkype=5]="SILKSkype",t[t.OGG_OPUS=6]="OGG_OPUS",t[t.WEBM_OPUS=7]="WEBM_OPUS",t[t.ALaw=8]="ALaw",t[t.FLAC=9]="FLAC",t[t.OPUS=10]="OPUS",t[t.AMR_WB=11]="AMR_WB",t[t.G722=12]="G722"})(kc=xn.AudioFormatTag||(xn.AudioFormatTag={}));var td=class{static getDefaultInputFormat(){return No.getDefaultInputFormat()}static getWaveFormat(e,r,n,i){return new No(e,r,n,i)}static getWaveFormatPCM(e,r,n){return new No(e,r,n)}};xn.AudioStreamFormat=td;var No=class t extends td{constructor(e=16e3,r=16,n=1,i=kc.PCM){super();let s=!0;switch(i){case kc.PCM:this.formatTag=1;break;case kc.ALaw:this.formatTag=6;break;case kc.MuLaw:this.formatTag=7;break;default:s=!1}if(this.bitsPerSample=r,this.samplesPerSec=e,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),s){this.privHeader=new ArrayBuffer(44);let o=new DataView(this.privHeader);this.setString(o,0,"RIFF"),o.setUint32(4,0,!0),this.setString(o,8,"WAVEfmt "),o.setUint32(16,16,!0),o.setUint16(20,this.formatTag,!0),o.setUint16(22,this.channels,!0),o.setUint32(24,this.samplesPerSec,!0),o.setUint32(28,this.avgBytesPerSec,!0),o.setUint16(32,this.channels*(this.bitsPerSample/8),!0),o.setUint16(34,this.bitsPerSample,!0),this.setString(o,36,"data"),o.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new t}static getAudioContext(e){let r=window.AudioContext||window.webkitAudioContext||!1;if(r)return e!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new r({sampleRate:e}):new r;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,r,n){for(let i=0;i<n.length;i++)e.setUint8(r+i,n.charCodeAt(i))}};xn.AudioStreamFormatImpl=No});var PA=p(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.MicAudioSource=ys.AudioWorkletSourceURLPropertyName=void 0;var SA=O(),Ye=D(),CA=Ei();ys.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var rd=class t{constructor(e,r,n,i){this.privRecorder=e,this.deviceId=r,this.privStreams={},this.privOutputChunkSize=t.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||(0,Ye.createNoDashGuid)(),this.privEvents=new Ye.EventSource,this.privMediaStream=i||null,this.privIsClosing=!1}get format(){return Promise.resolve(t.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new Ye.Deferred;try{this.createAudioContext()}catch(n){if(n instanceof Error){let i=n;this.privInitializeDeferral.reject(i.name+": "+i.message)}else this.privInitializeDeferral.reject(n);return this.privInitializeDeferral.promise}let e=window.navigator,r=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(r=(n,i,s)=>{e.mediaDevices.getUserMedia(n).then(i).catch(s)}),r){let n=()=>{this.onEvent(new Ye.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new Ye.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):r({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},i=>{this.privMediaStream=i,this.onEvent(new Ye.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},i=>{let s=`Error occurred during microphone initialization: ${i}`;this.privInitializeDeferral.reject(s),this.onEvent(new Ye.AudioSourceErrorEvent(this.privId,s))})};this.privContext.state==="suspended"?this.privContext.resume().then(n).catch(i=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${i}`)}):n()}else{let n="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(n),this.onEvent(new Ye.AudioSourceErrorEvent(n,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new Ye.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(r=>(this.onEvent(new Ye.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:async()=>(r.readEnded(),delete this.privStreams[e],this.onEvent(new Ye.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>r.read()}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new Ye.AudioStreamNodeDetachedEvent(this.privId,e)))}async turnOff(){for(let e in this.privStreams)if(e){let r=this.privStreams[e];r&&r.close()}this.onEvent(new Ye.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(e=>({bitspersample:t.AUDIOFORMAT.bitsPerSample,channelcount:t.AUDIOFORMAT.channels,connectivity:SA.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:t.AUDIOFORMAT.samplesPerSec,type:SA.type.Microphones}))}setProperty(e,r){if(e===ys.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(r);else throw new Error("Property '"+e+"' is not supported on Microphone.")}getMicrophoneLabel(){let e="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;let r=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(r===void 0)return Promise.resolve(this.privMicrophoneLabel);let n=new Ye.Deferred;return navigator.mediaDevices.enumerateDevices().then(i=>{for(let s of i)if(s.deviceId===r){this.privMicrophoneLabel=s.label;break}n.resolve(this.privMicrophoneLabel)},()=>n.resolve(this.privMicrophoneLabel)),n.promise}async listen(e){await this.turnOn();let r=new Ye.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=r;try{this.privRecorder.record(this.privContext,this.privMediaStream,r)}catch(i){throw this.onEvent(new Ye.AudioStreamNodeErrorEvent(this.privId,e,i)),i}return r}onEvent(e){this.privEvents.onEvent(e),Ye.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=CA.AudioStreamFormatImpl.getAudioContext(t.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}};ys.MicAudioSource=rd;rd.AUDIOFORMAT=CA.AudioStreamFormat.getDefaultInputFormat()});var RA=p(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.FileAudioSource=void 0;var wA=O(),Mt=D(),QL=Ei(),US=class{constructor(e,r,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||(0,Mt.createNoDashGuid)(),this.privEvents=new Mt.EventSource,this.privSource=e,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=r||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){let e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new Mt.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new Mt.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Mt.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(e){this.onEvent(new Mt.AudioStreamNodeAttachingEvent(this.privId,e));let r=await this.upload(e);return this.onEvent(new Mt.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:async()=>{r.readEnded(),delete this.privStreams[e],this.onEvent(new Mt.AudioStreamNodeDetachedEvent(this.privId,e)),await this.turnOff()},id:()=>e,read:()=>r.read()})}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new Mt.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(let e in this.privStreams)if(e){let r=this.privStreams[e];r&&!r.isClosed&&r.close()}return this.onEvent(new Mt.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:wA.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:wA.type.File}))}readHeader(){let r=this.privSource.slice(0,4296),n=new Mt.Deferred,i=s=>{let o=new DataView(s),a=y=>String.fromCharCode(o.getUint8(y),o.getUint8(y+1),o.getUint8(y+2),o.getUint8(y+3));if(a(0)!=="RIFF"){n.reject("Invalid WAV header in file, RIFF was not found");return}if(a(8)!=="WAVE"||a(12)!=="fmt "){n.reject("Invalid WAV header in file, WAVEfmt was not found");return}let c=o.getInt32(16,!0),u=o.getUint16(22,!0),l=o.getUint32(24,!0),d=o.getUint16(34,!0),f=36+Math.max(c-16,0);for(;a(f)!=="data";f+=2)if(f>4288){n.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=f+8,n.resolve(QL.AudioStreamFormat.getWaveFormatPCM(l,d,u))};if(typeof window<"u"&&typeof Blob<"u"&&r instanceof Blob){let s=new FileReader;s.onload=o=>{let a=o.target.result;i(a)},s.readAsArrayBuffer(r)}else{let s=r;i(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength))}return n.promise}async upload(e){let r=n=>{let i=`Error occurred while processing '${this.privFilename}'. ${n}`;throw this.onEvent(new Mt.AudioStreamNodeErrorEvent(this.privId,e,i)),new Error(i)};try{await this.turnOn();let n=await this.privAudioFormatPromise,i=new Mt.ChunkedArrayBufferStream(n.avgBytesPerSec/10,e);this.privStreams[e]=i;let s=this.privSource.slice(this.privHeaderEnd),o=a=>{i.isClosed||(i.writeStreamChunk({buffer:a,isEnd:!1,timeReceived:Date.now()}),i.close())};if(typeof window<"u"&&typeof Blob<"u"&&s instanceof Blob){let a=new FileReader;a.onerror=c=>r(c.toString()),a.onload=c=>{let u=c.target.result;o(u)},a.readAsArrayBuffer(s)}else{let a=s;o(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}return i}catch(n){r(n)}}onEvent(e){this.privEvents.onEvent(e),Mt.Events.instance.onEvent(e)}};nd.FileAudioSource=US});var EA=p(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.PcmRecorder=void 0;var XL=D(),VS=class{constructor(e){this.privStopInputOnRelease=e}record(e,r,n){let s=new XL.RiffPcmEncoder(e.sampleRate,16e3),o=e.createMediaStreamSource(r),a=()=>{let u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let f=e.sampleRate;for(;l<16384&&f>=32e3;)l<<=1,f>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{let d=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){let f=s.encode(d);f&&n.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()})}},o.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:o,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){let u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{let u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{let d=l.data;if(n&&!n.isClosed){let f=s.encode(d);f&&n.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()})}},o.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:o,stream:r}}).catch(()=>{a()})}else try{a()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}};id.PcmRecorder=VS});var _A=p(()=>{});var IA=p(()=>{});var TA=p(()=>{});var AA=p(()=>{});var kA=p(()=>{});var HS=p(pr=>{"use strict";var YL=pr&&pr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZL=pr&&pr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bA=pr&&pr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YL(e,t,r);return ZL(e,t),e},WS=pr&&pr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pr,"__esModule",{value:!0});pr.WebsocketMessageAdapter=void 0;var eq=bA(_A()),tq=bA(IA()),rq=WS(TA()),nq=WS(AA()),iq=WS(kA()),sq=ht(),B=D(),sd=class t{constructor(e,r,n,i,s,o){if(!e)throw new B.ArgumentNullError("uri");if(!n)throw new B.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new B.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=B.ConnectionState.None,this.privUri=e,this.privHeaders=s,this.privEnableCompression=o,this.privHeaders[sq.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===B.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new B.Deferred,this.privCertificateValidatedDeferral=new B.Deferred,this.privConnectionState=B.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!t.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let r=new URL(this.privUri).protocol;r?.toLocaleLowerCase()==="wss:"?r="https:":r?.toLocaleLowerCase()==="ws:"&&(r="http:");let n={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:r.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),n.agent=this.getAgent(),n.agent.protocol=r,this.privWebsocketClient=new iq.default(this.privUri,n),this.privWebsocketClient.on("redirect",i=>{let s=new B.ConnectionRedirectEvent(this.privConnectionId,i,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${i}'`);B.Events.instance.onEvent(s)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new B.Queue,this.privDisconnectDeferral=new B.Deferred,this.privSendMessageQueue=new B.Queue,this.processSendQueue().catch(e=>{B.Events.instance.onEvent(new B.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new B.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new B.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=B.ConnectionState.Connected,this.onEvent(new B.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new B.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new B.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===B.ConnectionState.Connecting?(this.privConnectionState=B.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new B.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=B.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new B.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(r=>{B.Events.instance.onEvent(new B.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=e=>{let r=new Date().toISOString();if(this.privConnectionState===B.ConnectionState.Connected){let n=new B.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){let i=new B.RawWebsocketMessage(B.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new B.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid binary message format. Error: ${s}`)})}else{let i=new B.RawWebsocketMessage(B.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new B.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==B.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${B.ConnectionState[this.privConnectionState]} state`);let r=new B.Deferred,n=new B.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{n.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:r})},i=>{n.reject(`Error formatting the message. ${i}`)}),r.promise}read(){return this.privConnectionState!==B.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==B.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new B.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(e,r){let n=`Connection closed. ${e}: ${r}`;this.privConnectionState=B.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){let r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(e){this.privConnectionEvents.onEvent(e),B.Events.instance.onEvent(e)}getAgent(){let e=new rq.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){let r={host:e.HostName,port:e.Port};return e.UserName?r.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new nq.default(r)}createConnection(e,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){let s=t.GetProxyAgent(this.proxyInfo);n=new Promise((o,a)=>{s.callback(e,r,(c,u)=>{c?a(c):o(u)})})}else r.secureEndpoint?n=Promise.resolve(tq.connect(r)):n=Promise.resolve(eq.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};pr.WebsocketMessageAdapter=sd;sd.forceNpmWebSocket=!1});var OA=p(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.WebsocketConnection=void 0;var $S=D(),oq=HS(),KS=class{constructor(e,r,n,i,s,o=!1,a){if(this.privIsDisposed=!1,!e)throw new $S.ArgumentNullError("uri");if(!i)throw new $S.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(r){for(let l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";let d=encodeURIComponent(l);c+=d;let f=r[l];f&&(f=encodeURIComponent(f),c+=`=${f}`),u++}}if(n){for(let l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";let d=encodeURIComponent(n[l]);c+=`${l}=${d}`,u++}}this.privUri=e+c,this.privId=a||(0,$S.createNoDashGuid)(),this.privConnectionMessageAdapter=new oq.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,o)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};od.WebsocketConnection=KS});var xA=p(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.ReplayableAudioNode=void 0;var JS=class{constructor(e,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){let e=this.privReplayOffset-this.privBufferStartOffset,r=Math.round(e*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){let i=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&this.privBuffers&&(this.privBuffers.push(new GS(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;let r=e-this.privBufferStartOffset,n=Math.round(r*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(let r of this.privBuffers){let n=r.byteOffset/this.privBytesPerSecond*1e7,i=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=i)return r.chunk.timeReceived}return 0}};ad.ReplayableAudioNode=JS;var GS=class{constructor(e,r,n){this.chunk=e,this.serial=r,this.byteOffset=n}}});var YS=p(nn=>{"use strict";var aq=nn&&nn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cq=nn&&nn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uq=nn&&nn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aq(e,t,r);return cq(e,t),e};Object.defineProperty(nn,"__esModule",{value:!0});nn.AudioFileWriter=void 0;var bc=uq(LS()),QS=q(),XS=class{constructor(e){QS.Contracts.throwIfNullOrUndefined(bc.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=bc.openSync(e,"w")}set format(e){QS.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=bc.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(e){QS.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),bc.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),bc.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};nn.AudioFileWriter=XS});var ZS=p(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.PullAudioInputStreamImpl=dr.PullAudioInputStream=dr.PushAudioInputStreamImpl=dr.PushAudioInputStream=dr.AudioInputStream=void 0;var cd=O(),Ze=D(),MA=Ci(),lq=w(),pq=Ei(),Oc=class{constructor(){}static createPushStream(e){return xc.create(e)}static createPullStream(e,r){return Mc.create(e,r)}};dr.AudioInputStream=Oc;var xc=class extends Oc{static create(e){return new ud(e)}};dr.PushAudioInputStream=xc;var ud=class extends xc{constructor(e){super(),e===void 0?this.privFormat=pq.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=e,this.privEvents=new Ze.EventSource,this.privId=(0,MA.createNoDashGuid)(),this.privStream=new Ze.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new Ze.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Ze.AudioSourceReadyEvent(this.privId))}async attach(e){this.onEvent(new Ze.AudioStreamNodeAttachingEvent(this.privId,e)),await this.turnOn();let r=this.privStream;return this.onEvent(new Ze.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:async()=>(this.onEvent(new Ze.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>r.read()}}detach(e){this.onEvent(new Ze.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:cd.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:cd.type.Stream})}onEvent(e){this.privEvents.onEvent(e),Ze.Events.instance.onEvent(e)}toBuffer(e){let r=Buffer.alloc(e.byteLength),n=new Uint8Array(e);for(let i=0;i<r.length;++i)r[i]=n[i];return r}};dr.PushAudioInputStreamImpl=ud;var Mc=class extends Oc{constructor(){super()}static create(e,r){return new ld(e,r)}};dr.PullAudioInputStream=Mc;var ld=class extends Mc{constructor(e,r){super(),r===void 0?this.privFormat=lq.AudioStreamFormat.getDefaultInputFormat():this.privFormat=r,this.privEvents=new Ze.EventSource,this.privId=(0,MA.createNoDashGuid)(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new Ze.AudioSourceInitializingEvent(this.privId)),this.onEvent(new Ze.AudioSourceReadyEvent(this.privId))}async attach(e){return this.onEvent(new Ze.AudioStreamNodeAttachingEvent(this.privId,e)),await this.turnOn(),this.onEvent(new Ze.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new Ze.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let r=0,n;for(;r<this.privBufferSize;){let i=new ArrayBuffer(this.privBufferSize-r),s=this.privCallback.read(i);if(n===void 0?n=i:new Int8Array(n).set(new Int8Array(i),r),s===0)break;r+=s}return Promise.resolve({buffer:n.slice(0,r),isEnd:this.privIsClosed||r===0,timeReceived:Date.now()})}}}detach(e){this.onEvent(new Ze.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:cd.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:cd.type.Stream})}onEvent(e){this.privEvents.onEvent(e),Ze.Events.instance.onEvent(e)}};dr.PullAudioInputStreamImpl=ld});var eC=p(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.SpeechSynthesisOutputFormat=void 0;var dq;(function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(dq=Dc.SpeechSynthesisOutputFormat||(Dc.SpeechSynthesisOutputFormat={}))});var zo=p(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.AudioOutputFormatImpl=void 0;var V=eC(),F=Ei(),pd=class t extends F.AudioStreamFormatImpl{constructor(e,r,n,i,s,o,a,c,u){super(n,o,r,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=a,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?t.getDefaultOutputFormat():t.fromSpeechSynthesisOutputFormatString(t.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new t(F.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new t(F.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new t(F.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new t(F.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new t(F.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new t(F.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new t(F.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new t(F.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new t(F.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new t(F.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new t(F.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new t(F.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new t(F.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new t(F.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new t(F.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new t(F.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new t(F.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new t(F.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new t(F.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new t(F.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new t(F.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new t(F.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new t(F.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new t(F.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return t.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){let r=new DataView(this.privHeader);r.setUint32(4,e+this.privHeader.byteLength-8,!0),r.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);let r=new Uint8Array(e.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(e),this.header.byteLength),r.buffer}};dd.AudioOutputFormatImpl=pd;pd.SpeechSynthesisOutputFormatToString={[V.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[V.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[V.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[V.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[V.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[V.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[V.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[V.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[V.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[V.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[V.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[V.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[V.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[V.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"}});var Ss=p(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.PushAudioOutputStreamImpl=hr.PushAudioOutputStream=hr.PullAudioOutputStreamImpl=hr.PullAudioOutputStream=hr.AudioOutputStream=void 0;var tC=D(),hq=q(),fq=zo(),Nc=class{constructor(){}static createPullStream(){return zc.create()}};hr.AudioOutputStream=Nc;var zc=class extends Nc{static create(){return new hd}};hr.PullAudioOutputStream=zc;var hd=class extends zc{constructor(){super(),this.privId=(0,tC.createNoDashGuid)(),this.privStream=new tC.Stream}set format(e){e==null&&(this.privFormat=fq.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){let r=new Int8Array(e),n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return r.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){let i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>e.byteLength-n?(s=i.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-n))):s=i.buffer,r.set(new Int8Array(s),n),n+=s.byteLength}else this.privStream.readEnded()}return n}write(e){hq.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}};hr.PullAudioOutputStreamImpl=hd;var fd=class extends Nc{constructor(){super()}static create(e){return new vd(e)}};hr.PushAudioOutputStream=fd;var vd=class extends fd{constructor(e){super(),this.privId=(0,tC.createNoDashGuid)(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}};hr.PushAudioOutputStreamImpl=vd});var rC=p(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.AudioOutputConfigImpl=_i.AudioConfigImpl=_i.AudioConfig=void 0;var Cs=je(),vq=q(),Ps=w(),gq=YS(),mq=ZS(),yq=Ss(),jc=class t{static fromDefaultMicrophoneInput(){let e=new Cs.PcmRecorder(!0);return new Mn(new Cs.MicAudioSource(e))}static fromMicrophoneInput(e){let r=new Cs.PcmRecorder(!0);return new Mn(new Cs.MicAudioSource(r,e))}static fromWavFileInput(e,r="unnamedBuffer.wav"){return new Mn(new Cs.FileAudioSource(e,r))}static fromStreamInput(e){if(e instanceof Ps.PullAudioInputStreamCallback)return new Mn(new mq.PullAudioInputStreamImpl(e));if(e instanceof Ps.AudioInputStream)return new Mn(e);if(typeof MediaStream<"u"&&e instanceof MediaStream){let r=new Cs.PcmRecorder(!1);return new Mn(new Cs.MicAudioSource(r,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new Dn(new Ps.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(e===void 0)return t.fromDefaultSpeakerOutput();if(e instanceof Ps.SpeakerAudioDestination)return new Dn(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new Dn(new gq.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof Ps.PushAudioOutputStreamCallback)return new Dn(new yq.PushAudioOutputStreamImpl(e));if(e instanceof Ps.PushAudioOutputStream)return new Dn(e);if(e instanceof Ps.PullAudioOutputStream)return new Dn(e);throw new Error("Not Supported Type")}};_i.AudioConfig=jc;var Mn=class extends jc{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,r){this.privSource.turnOff().then(()=>{e&&e()},n=>{r&&r(n)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,r){if(vq.Contracts.throwIfNull(r,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(e,r);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,r){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(e,r);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}};_i.AudioConfigImpl=Mn;var Dn=class extends jc{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}};_i.AudioOutputConfigImpl=Dn});var DA=p(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.CancellationReason=void 0;var Sq;(function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"})(Sq=Lc.CancellationReason||(Lc.CancellationReason={}))});var NA=p(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.PullAudioInputStreamCallback=void 0;var nC=class{};gd.PullAudioInputStreamCallback=nC});var zA=p(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.PushAudioOutputStreamCallback=void 0;var iC=class{};md.PushAudioOutputStreamCallback=iC});var LA=p(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.KeywordRecognitionModel=void 0;var jA=q(),sC=class{constructor(){this.privDisposed=!1}static fromFile(e){throw jA.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw jA.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};yd.KeywordRecognitionModel=sC});var qA=p(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.SessionEventArgs=void 0;var oC=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}};Sd.SessionEventArgs=oC});var BA=p(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.RecognitionEventArgs=void 0;var Cq=w(),aC=class extends Cq.SessionEventArgs{constructor(e,r){super(r),this.privOffset=e}get offset(){return this.privOffset}};Cd.RecognitionEventArgs=aC});var FA=p(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.OutputFormat=void 0;var Pq;(function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"})(Pq=qc.OutputFormat||(qc.OutputFormat={}))});var UA=p(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.IntentRecognitionEventArgs=void 0;var wq=w(),cC=class extends wq.RecognitionEventArgs{constructor(e,r,n){super(r,n),this.privResult=e}get result(){return this.privResult}};Pd.IntentRecognitionEventArgs=cC});var VA=p(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.RecognitionResult=void 0;var uC=class{constructor(e,r,n,i,s,o,a,c,u,l){this.privResultId=e,this.privReason=r,this.privText=n,this.privDuration=i,this.privOffset=s,this.privLanguage=o,this.privLanguageDetectionConfidence=a,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};wd.RecognitionResult=uC});var WA=p(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.SpeechRecognitionResult=void 0;var Rq=w(),lC=class extends Rq.RecognitionResult{constructor(e,r,n,i,s,o,a,c,u,l,d){super(e,r,n,i,s,o,a,u,l,d),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};Rd.SpeechRecognitionResult=lC});var HA=p(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.IntentRecognitionResult=void 0;var Eq=w(),pC=class extends Eq.SpeechRecognitionResult{constructor(e,r,n,i,s,o,a,c,u,l,d){super(r,n,i,s,o,a,c,void 0,u,l,d),this.privIntentId=e}get intentId(){return this.privIntentId}};Ed.IntentRecognitionResult=pC});var $A=p(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.LanguageUnderstandingModelImpl=qo.LanguageUnderstandingModel=void 0;var jo=q(),_d=class{constructor(){}static fromEndpoint(e){jo.Contracts.throwIfNull(e,"uri"),jo.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");let r=new Lo,n=e.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=e.host.substr(0,n);let i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=e.pathname.substr(i),r.subscriptionKey=e.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(e){jo.Contracts.throwIfNullOrWhitespace(e,"appId");let r=new Lo;return r.appId=e,r}static fromSubscription(e,r,n){jo.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),jo.Contracts.throwIfNullOrWhitespace(r,"appId"),jo.Contracts.throwIfNullOrWhitespace(n,"region");let i=new Lo;return i.appId=r,i.region=n,i.subscriptionKey=e,i}};qo.LanguageUnderstandingModel=_d;var Lo=class extends _d{};qo.LanguageUnderstandingModelImpl=Lo});var JA=p(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.MeetingTranscriptionEventArgs=Ii.ConversationTranscriptionEventArgs=Ii.SpeechRecognitionEventArgs=void 0;var KA=w(),Id=class extends KA.RecognitionEventArgs{constructor(e,r,n){super(r,n),this.privResult=e}get result(){return this.privResult}};Ii.SpeechRecognitionEventArgs=Id;var dC=class extends KA.RecognitionEventArgs{constructor(e,r,n){super(r,n),this.privResult=e}get result(){return this.privResult}};Ii.ConversationTranscriptionEventArgs=dC;var hC=class extends Id{};Ii.MeetingTranscriptionEventArgs=hC});var Bo=p(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.CancellationEventArgsBase=void 0;var _q=w(),fC=class extends _q.RecognitionEventArgs{constructor(e,r,n,i,s){super(i,s),this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Td.CancellationEventArgsBase=fC});var GA=p(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.SpeechRecognitionCanceledEventArgs=void 0;var Iq=Bo(),vC=class extends Iq.CancellationEventArgsBase{};Ad.SpeechRecognitionCanceledEventArgs=vC});var QA=p(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.TranslationRecognitionEventArgs=void 0;var Tq=w(),gC=class extends Tq.RecognitionEventArgs{constructor(e,r,n){super(r,n),this.privResult=e}get result(){return this.privResult}};kd.TranslationRecognitionEventArgs=gC});var XA=p(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.TranslationSynthesisEventArgs=void 0;var Aq=w(),mC=class extends Aq.SessionEventArgs{constructor(e,r){super(r),this.privResult=e}get result(){return this.privResult}};bd.TranslationSynthesisEventArgs=mC});var SC=p(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});Od.TranslationRecognitionResult=void 0;var kq=w(),yC=class t extends kq.SpeechRecognitionResult{constructor(e,r,n,i,s,o,a,c,u,l,d){super(r,n,i,s,o,a,c,void 0,u,l,d),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new t(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}};Od.TranslationRecognitionResult=yC});var YA=p(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.TranslationSynthesisResult=void 0;var CC=class{constructor(e,r){this.privReason=e,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}};xd.TranslationSynthesisResult=CC});var ZA=p(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.ResultReason=void 0;var bq;(function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"})(bq=Bc.ResultReason||(Bc.ResultReason={}))});var ek=p(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.SpeechConfigImpl=Uo.SpeechConfig=void 0;var Fo=O(),ws=q(),j=w(),Md=class{constructor(){}static fromSubscription(e,r){ws.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),ws.Contracts.throwIfNullOrWhitespace(r,"region");let n=new sn;return n.setProperty(j.PropertyId.SpeechServiceConnection_Region,r),n.setProperty(j.PropertyId.SpeechServiceConnection_IntentRegion,r),n.setProperty(j.PropertyId.SpeechServiceConnection_Key,e),n}static fromEndpoint(e,r){ws.Contracts.throwIfNull(e,"endpoint");let n=typeof r=="string"&&r.trim().length>0,i=typeof r=="object"&&r!==null&&typeof r.getToken=="function",s=typeof r=="object"&&r!==null&&typeof r.key=="string";if(r!==void 0&&!n&&!i&&!s)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let o;return typeof r=="string"?(o=new sn,o.setProperty(j.PropertyId.SpeechServiceConnection_Key,r)):typeof r=="object"&&typeof r.getToken=="function"?o=new sn(r):typeof r=="object"&&typeof r.key=="string"?(o=new sn,o.setProperty(j.PropertyId.SpeechServiceConnection_Key,r.key)):o=new sn,o.setProperty(j.PropertyId.SpeechServiceConnection_Endpoint,e.href),o}static fromHost(e,r){ws.Contracts.throwIfNull(e,"hostName");let n=new sn;return n.setProperty(j.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),n.setProperty(j.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),r!==void 0&&n.setProperty(j.PropertyId.SpeechServiceConnection_Key,r),n}static fromAuthorizationToken(e,r){ws.Contracts.throwIfNull(e,"authorizationToken"),ws.Contracts.throwIfNullOrWhitespace(r,"region");let n=new sn;return n.setProperty(j.PropertyId.SpeechServiceConnection_Region,r),n.setProperty(j.PropertyId.SpeechServiceConnection_IntentRegion,r),n.authorizationToken=e,n}close(){}};Uo.SpeechConfig=Md;var sn=class t extends Md{constructor(e){super(),this.privProperties=new j.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=j.OutputFormat.Simple,this.privTokenCredential=e}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return j.OutputFormat[this.privProperties.getProperty(Fo.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(Fo.OutputFormatPropertyName,j.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_EndpointId,e)}get tokenCredential(){return this.privTokenCredential}setProperty(e,r){ws.Contracts.throwIfNull(r,"value"),this.privProperties.setProperty(e,r)}getProperty(e,r){return this.privProperties.getProperty(e,r)}setProxy(e,r,n,i){this.setProperty(j.PropertyId[j.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(j.PropertyId[j.PropertyId.SpeechServiceConnection_ProxyPort],r),this.setProperty(j.PropertyId[j.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(j.PropertyId[j.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(e,r){let n=JSON.parse(this.privProperties.getProperty(Fo.ServicePropertiesPropertyName,"{}"));n[e]=r,this.privProperties.setProperty(Fo.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceResponse_ProfanityOption,j.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(j.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(Fo.OutputFormatPropertyName,j.OutputFormat[j.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(Fo.ForceDictationPropertyName,"true")}clone(){let e=new t(this.tokenCredential);return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return j.SpeechSynthesisOutputFormat[this.privProperties.getProperty(j.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(j.PropertyId.SpeechServiceConnection_SynthOutputFormat,j.SpeechSynthesisOutputFormat[e])}};Uo.SpeechConfigImpl=sn});var tk=p(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.SpeechTranslationConfigImpl=Vo.SpeechTranslationConfig=void 0;var Fc=O(),an=q(),z=w(),Dd=class extends z.SpeechConfig{constructor(){super()}static fromSubscription(e,r){an.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),an.Contracts.throwIfNullOrWhitespace(r,"region");let n=new on;return n.properties.setProperty(z.PropertyId.SpeechServiceConnection_Key,e),n.properties.setProperty(z.PropertyId.SpeechServiceConnection_Region,r),n}static fromAuthorizationToken(e,r){an.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),an.Contracts.throwIfNullOrWhitespace(r,"region");let n=new on;return n.properties.setProperty(z.PropertyId.SpeechServiceAuthorization_Token,e),n.properties.setProperty(z.PropertyId.SpeechServiceConnection_Region,r),n}static fromHost(e,r){an.Contracts.throwIfNull(e,"hostName");let n=new on;return n.setProperty(z.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(e.port===""?"":":"+e.port)),r!==void 0&&n.setProperty(z.PropertyId.SpeechServiceConnection_Key,r),n}static fromEndpoint(e,r){an.Contracts.throwIfNull(e,"endpoint");let n=typeof r=="string"&&r.trim().length>0,i=typeof r=="object"&&r!==null&&typeof r.getToken=="function",s=typeof r=="object"&&r!==null&&typeof r.key=="string";if(r!==void 0&&!n&&!i&&!s)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let o;return typeof r=="string"?(o=new on,o.setProperty(z.PropertyId.SpeechServiceConnection_Key,r)):typeof r=="object"&&typeof r.getToken=="function"?o=new on(r):typeof r=="object"&&typeof r.key=="string"?(o=new on,o.setProperty(z.PropertyId.SpeechServiceConnection_Key,r.key)):o=new on,o.setProperty(z.PropertyId.SpeechServiceConnection_Endpoint,e.href),o}};Vo.SpeechTranslationConfig=Dd;var on=class extends Dd{constructor(e){super(),this.privSpeechProperties=new z.PropertyCollection,this.outputFormat=z.OutputFormat.Simple,this.privTokenCredential=e}set authorizationToken(e){an.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){an.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return z.OutputFormat[this.privSpeechProperties.getProperty(Fc.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(Fc.OutputFormatPropertyName,z.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){an.Contracts.throwIfNullOrWhitespace(e,"value");let r=this.targetLanguages;r.includes(e)||(r.push(e),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_TranslationToLanguages,r.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){an.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(e,r,n,i){this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyPort],r),this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(z.PropertyId[z.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,r){return this.privSpeechProperties.getProperty(e,r)}setProperty(e,r){this.privSpeechProperties.setProperty(e,r)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,r){let n=JSON.parse(this.privSpeechProperties.getProperty(Fc.ServicePropertiesPropertyName,"{}"));n[e]=r,this.privSpeechProperties.setProperty(Fc.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceResponse_ProfanityOption,z.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(Fc.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return z.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(z.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(z.PropertyId.SpeechServiceConnection_SynthOutputFormat,z.SpeechSynthesisOutputFormat[e])}};Vo.SpeechTranslationConfigImpl=on});var wC=p(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.PropertyCollection=void 0;var rk=w(),PC=class t{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,r){let n;typeof e=="string"?n=e:n=rk.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return this.privValues[i];if(r!==void 0)return String(r)}setProperty(e,r){let n;typeof e=="string"?n=e:n=rk.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n){this.privValues[i]=r;return}this.privKeys.push(n),this.privValues.push(r)}clone(){let e=new t;for(let r=0;r<this.privKeys.length;r++)e.privKeys.push(this.privKeys[r]),e.privValues.push(this.privValues[r]);return e}mergeTo(e){this.privKeys.forEach(r=>{if(e.getProperty(r,void 0)===void 0){let n=this.getProperty(r);e.setProperty(r,n)}})}get keys(){return this.privKeys}};Nd.PropertyCollection=PC});var zd=p(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.PropertyId=void 0;var Oq;(function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=50]="Conversation_ApplicationId",t[t.Conversation_DialogType=51]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=53]="Conversation_From_Id",t[t.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=60]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=61]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=63]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=71]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"})(Oq=Uc.PropertyId||(Uc.PropertyId={}))});var ik=p(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.Recognizer=void 0;var Ti=O(),nk=D(),jd=q(),Ld=w(),RC=class t{constructor(e,r,n,i){this.audioConfig=e!==void 0?e:Ld.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=r.clone(),this.privConnectionFactory=n,this.tokenCredential=i,this.implCommonRecognizerSetup()}close(e,r){jd.Contracts.throwIfDisposed(this.privDisposed),(0,nk.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}get internalData(){return this.privReco}async dispose(e){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return Ti.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){Ti.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e=typeof window<"u"?"Browser":"Node",r="unknown",n="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);let i=this.createRecognizerConfig(new Ti.SpeechServiceConfig(new Ti.Context(new Ti.OS(e,r,n))));this.privReco=this.createServiceRecognizer(t.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,i)}async recognizeOnceAsyncImpl(e){jd.Contracts.throwIfDisposed(this.privDisposed);let r=new nk.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(e,r.resolve,r.reject);let n=await r.promise;return await this.implRecognizerStop(),n}async startContinuousRecognitionAsyncImpl(e){jd.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(e,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){jd.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(e,r){let n=e.getProperty(Ld.PropertyId.SpeechServiceConnection_Key,void 0);return n&&n!==""?new Ti.CognitiveSubscriptionKeyAuthentication(n):r?new Ti.CognitiveTokenAuthentication(async()=>{try{return(await r.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(i){throw i}},async()=>{try{return(await r.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(i){throw i}}):new Ti.CognitiveTokenAuthentication(()=>{let i=e.getProperty(Ld.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)},()=>{let i=e.getProperty(Ld.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(i)})}};qd.Recognizer=RC});var Gt=p(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.RecognitionMode=void 0;var xq;(function(t){t.Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None"})(xq=Vc.RecognitionMode||(Vc.RecognitionMode={}))});var sk=p(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.SpeechRecognizer=void 0;var Wc=O(),EC=Gt(),Bd=D(),Ai=q(),Dt=w(),_C=class t extends Dt.Recognizer{constructor(e,r){let n=e;Ai.Contracts.throwIfNull(n,"speechConfig"),Ai.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(Dt.PropertyId.SpeechServiceConnection_RecoLanguage),Dt.PropertyId[Dt.PropertyId.SpeechServiceConnection_RecoLanguage]),super(r,n.properties,new Wc.SpeechConnectionFactory,e.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(e,r,n){let i=e;return r.properties.mergeTo(i.properties),new t(e,n)}get endpointId(){return Ai.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Dt.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(Dt.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Ai.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Dt.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return Ai.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Dt.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Ai.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Wc.OutputFormatPropertyName,Dt.OutputFormat[Dt.OutputFormat.Simple])===Dt.OutputFormat[Dt.OutputFormat.Simple]?Dt.OutputFormat.Simple:Dt.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,r){(0,Bd.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(EC.RecognitionMode.Interactive),e,r)}startContinuousRecognitionAsync(e,r){(0,Bd.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(Wc.ForceDictationPropertyName,void 0)===void 0?EC.RecognitionMode.Conversation:EC.RecognitionMode.Dictation),e,r)}stopContinuousRecognitionAsync(e,r){(0,Bd.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,r)}startKeywordRecognitionAsync(e,r,n){Ai.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,r){Ai.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,Bd.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new Wc.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return new Wc.SpeechServiceRecognizer(e,r,s,i,this)}};Fd.SpeechRecognizer=_C});var ak=p(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});Vd.IntentRecognizer=void 0;var Hc=O(),ok=Gt(),Ud=D(),ft=q(),Nn=w(),IC=class extends Nn.Recognizer{constructor(e,r){ft.Contracts.throwIfNullOrUndefined(e,"speechConfig");let n=e;ft.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(r,n.properties,new Hc.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=n.properties,ft.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(Nn.PropertyId.SpeechServiceConnection_RecoLanguage),Nn.PropertyId[Nn.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return ft.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(Nn.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(Nn.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(Nn.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,r){if(ft.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let n=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=n.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(n.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,Ud.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(ok.RecognitionMode.Interactive),e,r)}startContinuousRecognitionAsync(e,r){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){let n=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=n.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(n.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,Ud.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(ok.RecognitionMode.Conversation),e,r)}stopContinuousRecognitionAsync(e,r){(0,Ud.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,r)}startKeywordRecognitionAsync(e,r,n){ft.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e,r){if(e)try{e()}catch(n){r&&r(n)}}addIntent(e,r){ft.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),ft.Contracts.throwIfNullOrWhitespace(r,"intentId"),ft.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([r,e])}addIntentWithLanguageModel(e,r,n){ft.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),ft.Contracts.throwIfNullOrWhitespace(e,"intentId"),ft.Contracts.throwIfNull(r,"model");let i=r;ft.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privAddedLmIntents[e]=new Hc.AddedLmIntent(i,n)}addAllIntents(e,r){ft.Contracts.throwIfNull(e,"model");let n=e;ft.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privUmbrellaIntent=new Hc.AddedLmIntent(n,r)}close(e,r){ft.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,Ud.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}createRecognizerConfig(e){return new Hc.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return new Hc.IntentServiceRecognizer(e,r,s,i,this)}async dispose(e){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,await super.dispose(e))}buildSpeechContext(){let e,r,n,i=[];this.privUmbrellaIntent!==void 0&&(e=this.privUmbrellaIntent.modelImpl.appId,r=this.privUmbrellaIntent.modelImpl.region,n=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(let s of Object.keys(this.privAddedLmIntents)){let o=this.privAddedLmIntents[s];if(e===void 0)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(r===void 0)r=o.modelImpl.region;else if(r!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(n===void 0)n=o.modelImpl.subscriptionKey;else if(n!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");let a="luis/"+e+"-PRODUCTION#"+s;i.push(a)}return{Intent:{id:e,key:n===void 0?this.privProperties.getProperty(Nn.PropertyId[Nn.PropertyId.SpeechServiceConnection_Key]):n,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?i:["luis/"+e+"-PRODUCTION"]}}};Vd.IntentRecognizer=IC});var ck=p($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.VoiceProfileType=void 0;var Mq;(function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"})(Mq=$c.VoiceProfileType||($c.VoiceProfileType={}))});var kC=p(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ConnectionMessageImpl=Wo.ConnectionMessage=void 0;var uk=ht(),lk=D(),Dq=wC(),Nq=zd(),TC=class{};Wo.ConnectionMessage=TC;var AC=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new Dq.PropertyCollection,this.privConnectionMessage.headers[uk.HeaderNames.ConnectionId]&&this.privProperties.setProperty(Nq.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[uk.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(r=>{this.privProperties.setProperty(r,this.privConnectionMessage.headers[r])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(e=>e.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===lk.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===lk.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}};Wo.ConnectionMessageImpl=AC});var MC=p(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.Connection=void 0;var bC=O(),OC=D(),pk=kC(),zq=q(),Kc=w(),xC=class t{static fromRecognizer(e){let r=e.internalData,n=new t;return n.privInternalData=r,n.setupEvents(),n}static fromSynthesizer(e){let r=e.internalData,n=new t;return n.privInternalData=r,n.setupEvents(),n}openConnection(e,r){(0,OC.marshalPromiseToCallbacks)(this.privInternalData.connect(),e,r)}closeConnection(e,r){if(this.privInternalData instanceof bC.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,OC.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),e,r)}setMessageProperty(e,r,n){if(zq.Contracts.throwIfNullOrWhitespace(r,"propertyName"),this.privInternalData instanceof bC.ServiceRecognizerBase){if(e.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{let i=this.privInternalData.speechContext.getContext();i[r]=n}}else if(this.privInternalData instanceof bC.SynthesisAdapterBase){if(e.toLowerCase()!=="speech.config"&&e.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(e.toLowerCase()==="speech.config"){if(r.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(n)}else this.privInternalData.synthesisContext.setSection(r,n)}}sendMessageAsync(e,r,n,i){(0,OC.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(e,r),n,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(e=>{e.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new Kc.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new Kc.ConnectionEventArgs(e.connectionId)):e.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new Kc.ConnectionMessageEventArgs(new pk.ConnectionMessageImpl(e.message))):e.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new Kc.ConnectionMessageEventArgs(new pk.ConnectionMessageImpl(e.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new Kc.ServiceEventArgs(e.jsonString,e.name))})}};Wd.Connection=xC});var hk=p(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.TranslationRecognizer=void 0;var Hd=O(),dk=Gt(),$d=D(),jq=MC(),Dr=q(),de=w(),DC=class t extends de.Recognizer{constructor(e,r,n){let i=e;Dr.Contracts.throwIfNull(i,"speechConfig"),super(r,i.properties,n||new Hd.TranslationConnectionFactory,e.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&Dr.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationVoice),de.PropertyId[de.PropertyId.SpeechServiceConnection_TranslationVoice]),Dr.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages),de.PropertyId[de.PropertyId.SpeechServiceConnection_TranslationToLanguages]),Dr.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(de.PropertyId.SpeechServiceConnection_RecoLanguage),de.PropertyId[de.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,r,n){let i=e;return r.properties.mergeTo(i.properties),r.properties.getProperty(de.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===Hd.AutoDetectSourceLanguagesOpenRangeOptionName&&i.properties.setProperty(de.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new t(e,n)}get speechRecognitionLanguage(){return Dr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(de.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return Dr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return Dr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(de.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(de.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,r){Dr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,$d.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(dk.RecognitionMode.Interactive),e,r)}startContinuousRecognitionAsync(e,r){(0,$d.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(dk.RecognitionMode.Conversation),e,r)}stopContinuousRecognitionAsync(e,r){(0,$d.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,r)}removeTargetLanguage(e){if(Dr.Contracts.throwIfNullOrUndefined(e,"language to be removed"),this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){let r=this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n=r.indexOf(e);n>-1&&(r.splice(n,1),this.properties.setProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages,r.join(",")),this.updateLanguages(r))}}addTargetLanguage(e){Dr.Contracts.throwIfNullOrUndefined(e,"language to be added");let r=[];this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(r=this.properties.getProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),r.includes(e)||(r.push(e),this.properties.setProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages,r.join(",")))):(this.properties.setProperty(de.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),r=[e]),this.updateLanguages(r)}close(e,r){Dr.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,$d.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}onConnection(){}async dispose(e){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(await this.implRecognizerStop(),await super.dispose(e)))}createRecognizerConfig(e){return new Hd.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return new Hd.TranslationServiceRecognizer(e,r,s,i,this)}updateLanguages(e){let r=jq.Connection.fromRecognizer(this);r&&(r.setMessageProperty("speech.context","translationcontext",{to:e}),r.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}};Kd.TranslationRecognizer=DC});var fk=p(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.Translations=void 0;var Lq=w(),NC=class{constructor(){this.privMap=new Lq.PropertyCollection}get languages(){return this.privMap.keys}get(e,r){return this.privMap.getProperty(e,r)}set(e,r){this.privMap.setProperty(e,r)}};Jd.Translations=NC});var vk=p(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.NoMatchReason=void 0;var qq;(function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(qq=Jc.NoMatchReason||(Jc.NoMatchReason={}))});var gk=p(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.NoMatchDetails=void 0;var zC=O(),Gd=w(),jC=class t{constructor(e){this.privReason=e}static fromResult(e){let r=zC.SimpleSpeechPhrase.fromJSON(e.json,0),n=Gd.NoMatchReason.NotRecognized;switch(r.RecognitionStatus){case zC.RecognitionStatus.BabbleTimeout:n=Gd.NoMatchReason.InitialBabbleTimeout;break;case zC.RecognitionStatus.InitialSilenceTimeout:n=Gd.NoMatchReason.InitialSilenceTimeout;break;default:n=Gd.NoMatchReason.NotRecognized;break}return new t(n)}get reason(){return this.privReason}};Qd.NoMatchDetails=jC});var mk=p(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.TranslationRecognitionCanceledEventArgs=void 0;var LC=class{constructor(e,r,n,i,s){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=s,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Xd.TranslationRecognitionCanceledEventArgs=LC});var yk=p(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.IntentRecognitionCanceledEventArgs=void 0;var Bq=w(),qC=class extends Bq.IntentRecognitionEventArgs{constructor(e,r,n,i,s,o){super(i,s,o),this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};Yd.IntentRecognitionCanceledEventArgs=qC});var FC=p(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.CancellationDetailsBase=void 0;var BC=class{constructor(e,r,n){this.privReason=e,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};Zd.CancellationDetailsBase=BC});var Sk=p(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.CancellationDetails=void 0;var eh=O(),Fq=FC(),Ho=w(),UC=class t extends Fq.CancellationDetailsBase{constructor(e,r,n){super(e,r,n)}static fromResult(e){let r=Ho.CancellationReason.Error,n=Ho.CancellationErrorCode.NoError;if(e instanceof Ho.RecognitionResult&&e.json){let i=eh.SimpleSpeechPhrase.fromJSON(e.json,0);r=eh.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(n=Ho.CancellationErrorCode[e.properties.getProperty(eh.CancellationErrorCodePropertyName,Ho.CancellationErrorCode[Ho.CancellationErrorCode.NoError])]),new t(r,e.errorDetails||eh.EnumTranslation.implTranslateErrorDetails(n),n)}};th.CancellationDetails=UC});var Ck=p(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.CancellationErrorCode=void 0;var Uq;(function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"})(Uq=Gc.CancellationErrorCode||(Gc.CancellationErrorCode={}))});var Pk=p(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.ConnectionEventArgs=void 0;var Vq=w(),VC=class extends Vq.SessionEventArgs{};rh.ConnectionEventArgs=VC});var wk=p(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.ServiceEventArgs=void 0;var Wq=w(),WC=class extends Wq.SessionEventArgs{constructor(e,r,n){super(n),this.privJsonResult=e,this.privEventName=r}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};nh.ServiceEventArgs=WC});var Rk=p(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.PhraseListGrammar=void 0;var Hq=q(),HC=class t{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){let r=e.internalData;return new t(r)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(e){Hq.Contracts.throwIfNumberOutOfRange(e,"weight",0,2),this.privGrammerBuilder.setWeight(e)}};ih.PhraseListGrammar=HC});var oh=p($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.DialogServiceConfigImpl=$o.DialogServiceConfig=void 0;var $q=q(),Qc=w(),sh=class{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};$o.DialogServiceConfig=sh;var $C=class extends sh{constructor(){super(),this.privSpeechConfig=new Qc.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){$q.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,r){this.privSpeechConfig.setProperty(e,r)}getProperty(e,r){return this.privSpeechConfig.getProperty(e)}setProxy(e,r,n,i){this.setProperty(Qc.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(Qc.PropertyId.SpeechServiceConnection_ProxyPort,`${r}`),n&&this.setProperty(Qc.PropertyId.SpeechServiceConnection_ProxyUserName,n),i&&this.setProperty(Qc.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,r,n){this.privSpeechConfig.setServiceProperty(e,r)}close(){}};$o.DialogServiceConfigImpl=$C});var Ek=p(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.BotFrameworkConfig=void 0;var Rs=q(),zn=oh(),Nt=w(),KC=class extends zn.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,r,n){Rs.Contracts.throwIfNullOrWhitespace(e,"subscription"),Rs.Contracts.throwIfNullOrWhitespace(r,"region");let i=new zn.DialogServiceConfigImpl;return i.setProperty(Nt.PropertyId.Conversation_DialogType,zn.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(Nt.PropertyId.SpeechServiceConnection_Key,e),i.setProperty(Nt.PropertyId.SpeechServiceConnection_Region,r),n&&i.setProperty(Nt.PropertyId.Conversation_ApplicationId,n),i}static fromAuthorizationToken(e,r,n){Rs.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),Rs.Contracts.throwIfNullOrWhitespace(r,"region");let i=new zn.DialogServiceConfigImpl;return i.setProperty(Nt.PropertyId.Conversation_DialogType,zn.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(Nt.PropertyId.SpeechServiceAuthorization_Token,e),i.setProperty(Nt.PropertyId.SpeechServiceConnection_Region,r),n&&i.setProperty(Nt.PropertyId.Conversation_ApplicationId,n),i}static fromHost(e,r,n){Rs.Contracts.throwIfNullOrUndefined(e,"host");let i=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);Rs.Contracts.throwIfNullOrUndefined(i,"resolvedHost");let s=new zn.DialogServiceConfigImpl;return s.setProperty(Nt.PropertyId.Conversation_DialogType,zn.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(Nt.PropertyId.SpeechServiceConnection_Host,i.toString()),r!==void 0&&s.setProperty(Nt.PropertyId.SpeechServiceConnection_Key,r),s}static fromEndpoint(e,r){Rs.Contracts.throwIfNull(e,"endpoint");let n=new zn.DialogServiceConfigImpl;return n.setProperty(Nt.PropertyId.Conversation_DialogType,zn.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(Nt.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),r!==void 0&&n.setProperty(Nt.PropertyId.SpeechServiceConnection_Key,r),n}};ah.BotFrameworkConfig=KC});var _k=p(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.CustomCommandsConfig=void 0;var Es=q(),Xc=oh(),cn=w(),JC=class extends Xc.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,r,n){Es.Contracts.throwIfNullOrWhitespace(e,"applicationId"),Es.Contracts.throwIfNullOrWhitespace(r,"subscription"),Es.Contracts.throwIfNullOrWhitespace(n,"region");let i=new Xc.DialogServiceConfigImpl;return i.setProperty(cn.PropertyId.Conversation_DialogType,Xc.DialogServiceConfig.DialogTypes.CustomCommands),i.setProperty(cn.PropertyId.Conversation_ApplicationId,e),i.setProperty(cn.PropertyId.SpeechServiceConnection_Key,r),i.setProperty(cn.PropertyId.SpeechServiceConnection_Region,n),i}static fromAuthorizationToken(e,r,n){Es.Contracts.throwIfNullOrWhitespace(e,"applicationId"),Es.Contracts.throwIfNullOrWhitespace(r,"authorizationToken"),Es.Contracts.throwIfNullOrWhitespace(n,"region");let i=new Xc.DialogServiceConfigImpl;return i.setProperty(cn.PropertyId.Conversation_DialogType,Xc.DialogServiceConfig.DialogTypes.CustomCommands),i.setProperty(cn.PropertyId.Conversation_ApplicationId,e),i.setProperty(cn.PropertyId.SpeechServiceAuthorization_Token,r),i.setProperty(cn.PropertyId.SpeechServiceConnection_Region,n),i}set applicationId(e){Es.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(cn.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(cn.PropertyId.Conversation_ApplicationId)}};ch.CustomCommandsConfig=JC});var jn=p(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.QueryParameterNames=void 0;var ue=class{};uh.QueryParameterNames=ue;ue.BotId="botid";ue.CustomSpeechDeploymentId="cid";ue.CustomVoiceDeploymentId="deploymentId";ue.EnableAudioLogging="storeAudio";ue.EnableLanguageId="lidEnabled";ue.EnableWordLevelTimestamps="wordLevelTimestamps";ue.EndSilenceTimeoutMs="endSilenceTimeoutMs";ue.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";ue.SegmentationMaximumTimeMs="segmentationMaximumTimeMs";ue.SegmentationStrategy="segmentationStrategy";ue.Format="format";ue.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";ue.Language="language";ue.Profanity="profanity";ue.RequestBotStatusMessages="enableBotMessageStatus";ue.StableIntermediateThreshold="stableIntermediateThreshold";ue.StableTranslation="stableTranslation";ue.TestHooks="testhooks";ue.Postprocessing="postprocessing";ue.CtsMeetingId="meetingId";ue.CtsDeviceId="deviceId";ue.CtsIsParticipant="isParticipant";ue.EnableAvatar="enableTalkingAvatar"});var fr=p(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.ConnectionFactoryBase=void 0;var Kq=O(),lh=D(),ki=w(),bi=jn(),GC=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,r,n){new Map([[ki.PropertyId.Speech_SegmentationSilenceTimeoutMs,bi.QueryParameterNames.SegmentationSilenceTimeoutMs],[ki.PropertyId.SpeechServiceConnection_EnableAudioLogging,bi.QueryParameterNames.EnableAudioLogging],[ki.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,bi.QueryParameterNames.EndSilenceTimeoutMs],[ki.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,bi.QueryParameterNames.InitialSilenceTimeoutMs],[ki.PropertyId.SpeechServiceResponse_PostProcessingOption,bi.QueryParameterNames.Postprocessing],[ki.PropertyId.SpeechServiceResponse_ProfanityOption,bi.QueryParameterNames.Profanity],[ki.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,bi.QueryParameterNames.EnableWordLevelTimestamps],[ki.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,bi.QueryParameterNames.StableIntermediateThreshold]]).forEach((o,a)=>{this.setUrlParameter(a,o,e,r,n)});let s=JSON.parse(e.parameters.getProperty(Kq.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(o=>{r[o]=s[o]})}setUrlParameter(e,r,n,i,s){let o=n.parameters.getProperty(e,void 0);o&&(!s||s.search(r)===-1)&&(i[r]=o.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(e){let r=new URL(e);r.protocol="https:",r.port="443",r.searchParams.append("GenerateRedirectResponse","true");let i=r.toString();lh.Events.instance.onEvent(new lh.ConnectionRedirectEvent("",i,void 0,"ConnectionFactoryBase: redirectUrl request"));let s=await fetch(i);if(s.status!==200)return e;let o=await s.text();lh.Events.instance.onEvent(new lh.ConnectionRedirectEvent("",o,e,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(o.trim()).toString()}catch{return e}}};ph.ConnectionFactoryBase=GC});var kk=p(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.DialogConnectionFactory=void 0;var Ik=je(),Jq=O(),Qt=w(),Tk=fr(),Gq=O(),Ak=ht(),dh=jn(),Yc=class t extends Tk.ConnectionFactoryBase{create(e,r,n){let i=e.parameters.getProperty(Qt.PropertyId.Conversation_ApplicationId,""),s=e.parameters.getProperty(Qt.PropertyId.Conversation_DialogType),o=e.parameters.getProperty(Qt.PropertyId.SpeechServiceConnection_Region),a=e.parameters.getProperty(Qt.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),c=e.parameters.getProperty(Qt.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),u={};u[Ak.HeaderNames.ConnectionId]=n,u[dh.QueryParameterNames.Format]=e.parameters.getProperty(Jq.OutputFormatPropertyName,Qt.OutputFormat[Qt.OutputFormat.Simple]).toLowerCase(),u[dh.QueryParameterNames.Language]=a,u[dh.QueryParameterNames.RequestBotStatusMessages]=c,i&&(u[dh.QueryParameterNames.BotId]=i,s===Qt.DialogServiceConfig.DialogTypes.CustomCommands&&(u[Ak.HeaderNames.CustomCommandsAppId]=i));let l=s===Qt.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",d=s===Qt.DialogServiceConfig.DialogTypes.CustomCommands?"v1":s===Qt.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",f={};r.token!=null&&r.token!==""&&(f[r.headerName]=r.token);let y=e.parameters.getProperty(Qt.PropertyId.SpeechServiceConnection_Endpoint,"");if(!y){let S=Tk.ConnectionFactoryBase.getHostSuffix(o),M=e.parameters.getProperty(Qt.PropertyId.SpeechServiceConnection_Host,`wss://${o}.${t.BaseUrl}${S}`);y=`${M.endsWith("/")?M:M+"/"}${l}${t.ApiKey}/${d}`}this.setCommonUrlParams(e,u,y);let C=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new Ik.WebsocketConnection(y,u,f,new Gq.WebsocketMessageFormatter,Ik.ProxyInfo.fromRecognizerConfig(e),C,n))}};hh.DialogConnectionFactory=Yc;Yc.ApiKey="api";Yc.BaseUrl="convai.speech"});var Ok=p(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.DialogServiceConnector=void 0;var Qq=kk(),bk=O(),Xq=Gt(),Ko=D(),fh=q(),Yq=w(),Oi=zd(),QC=class extends Yq.Recognizer{constructor(e,r){let n=e;fh.Contracts.throwIfNull(e,"dialogConfig"),super(r,n.properties,new Qq.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=n.properties.clone();let i=this.buildAgentConfig();this.privReco.agentConfig.set(i)}connect(e,r){(0,Ko.marshalPromiseToCallbacks)(this.privReco.connect(),e,r)}disconnect(e,r){(0,Ko.marshalPromiseToCallbacks)(this.privReco.disconnect(),e,r)}get authorizationToken(){return this.properties.getProperty(Oi.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){fh.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Oi.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(Oi.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(Oi.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,r){if(this.isTurnComplete){fh.Contracts.throwIfDisposed(this.privIsDisposed);let i=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;let s=new Ko.Deferred;await this.privReco.recognize(Xq.RecognitionMode.Conversation,s.resolve,s.reject);let o=await s.promise;return await this.implRecognizerStop(),o})();i.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,Ko.marshalPromiseToCallbacks)(i.finally(()=>{this.isTurnComplete=!0}),e,r)}}sendActivityAsync(e,r,n){(0,Ko.marshalPromiseToCallbacks)(this.privReco.sendMessage(e),r,n)}close(e,r){fh.Contracts.throwIfDisposed(this.privIsDisposed),(0,Ko.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}async dispose(e){this.privIsDisposed||e&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(e))}createRecognizerConfig(e){return new bk.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return new bk.DialogServiceAdapter(e,r,s,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(Oi.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(Oi.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(Oi.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(Oi.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};vh.DialogServiceConnector=QC});var xk=p(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.ActivityReceivedEventArgs=void 0;var XC=class{constructor(e,r){this.privActivity=e,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};gh.ActivityReceivedEventArgs=XC});var Mk=p(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.TurnStatusResponsePayload=void 0;var YC=class t{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}};mh.TurnStatusResponsePayload=YC});var Dk=p(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.TurnStatusReceivedEventArgs=void 0;var Zq=Mk(),ZC=class{constructor(e){this.privTurnStatus=Zq.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};yh.TurnStatusReceivedEventArgs=ZC});var Nk=p(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ServicePropertyChannel=void 0;var e2;(function(t){t[t.UriQueryParameter=0]="UriQueryParameter"})(e2=Zc.ServicePropertyChannel||(Zc.ServicePropertyChannel={}))});var zk=p(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.ProfanityOption=void 0;var t2;(function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"})(t2=eu.ProfanityOption||(eu.ProfanityOption={}))});var jk=p(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.BaseAudioPlayer=void 0;var r2=Mr(),n2=w(),i2=Ei(),eP=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,e===void 0&&(e=n2.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,r,n){try{this.ensureInitializedContext();let i=this.formatAudioData(e),s=new Float32Array(this.samples.length+i.length);s.set(this.samples,0),s.set(i,this.samples.length),this.samples=s,r&&r()}catch(i){n&&n(i)}}stopAudio(e,r){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{e&&e()},n=>{r&&r(n)}),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();let e=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},e)}}createAudioContext(){this.audioContext=i2.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new r2.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,r){let n=new Float32Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i]/r;return n}updateAudioBuffer(){if(this.samples.length===0)return;let e=this.audioFormat.channels,r=this.audioContext.createBufferSource(),n=this.samples.length/e,i=this.audioContext.createBuffer(e,n,this.audioFormat.samplesPerSec);for(let s=0;s<e;s++){let o=s,a=i.getChannelData(s);for(let c=0;c<this.samples.length;c++,o+=e)a[c]=this.samples[o]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),r.buffer=i,r.connect(this.gainNode),r.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}async playAudio(e){this.audioContext===null&&this.createAudioContext();let r=this.audioContext.createBufferSource(),n=this.audioContext.destination;await this.audioContext.decodeAudioData(e,i=>{r.buffer=i,r.connect(n),r.start(0)})}};Sh.BaseAudioPlayer=eP});var Lk=p(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.ConnectionMessageEventArgs=void 0;var tP=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};Ch.ConnectionMessageEventArgs=tP});var qk=p(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.VoiceProfile=void 0;var rP=class{constructor(e,r){this.privId=e,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}};Ph.VoiceProfile=rP});var Fk=p(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.VoiceProfileEnrollmentCancellationDetails=Jo.VoiceProfileEnrollmentResult=void 0;var Bk=O(),et=w(),nP=class t{constructor(e,r,n){this.privReason=e,this.privProperties=new et.PropertyCollection,this.privReason!==et.ResultReason.Canceled?r&&(this.privDetails=JSON.parse(r),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=et.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=n,this.privProperties.setProperty(Bk.CancellationErrorCodePropertyName,et.CancellationErrorCode[et.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){let r=[];for(let n of e.value){let i=n.enrollmentStatus.toLowerCase()==="enrolling"?et.ResultReason.EnrollingVoiceProfile:n.enrollmentStatus.toLowerCase()==="enrolled"?et.ResultReason.EnrolledVoiceProfile:et.ResultReason.Canceled,s=new t(i,null,null);s.privDetails=this.getIdentificationDetails(n),r.push(s)}return r}static FromVerificationProfileList(e){let r=[];for(let n of e.value){let i=n.enrollmentStatus.toLowerCase()==="enrolling"?et.ResultReason.EnrollingVoiceProfile:n.enrollmentStatus.toLowerCase()==="enrolled"?et.ResultReason.EnrolledVoiceProfile:et.ResultReason.Canceled,s=new t(i,null,null);s.privDetails=this.getVerificationDetails(n),r.push(s)}return r}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}};Jo.VoiceProfileEnrollmentResult=nP;var iP=class t extends et.CancellationDetailsBase{constructor(e,r,n){super(e,r,n)}static fromResult(e){let r=et.CancellationReason.Error,n=et.CancellationErrorCode.NoError;return e.properties&&(n=et.CancellationErrorCode[e.properties.getProperty(Bk.CancellationErrorCodePropertyName,et.CancellationErrorCode[et.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)}};Jo.VoiceProfileEnrollmentCancellationDetails=iP});var Vk=p(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.VoiceProfileCancellationDetails=Go.VoiceProfileResult=void 0;var Uk=O(),s2=q(),un=w(),sP=class{constructor(e,r){this.privReason=e,this.privProperties=new un.PropertyCollection,e===un.ResultReason.Canceled&&(s2.Contracts.throwIfNullOrUndefined(r,"statusText"),this.privErrorDetails=r,this.privProperties.setProperty(Uk.CancellationErrorCodePropertyName,un.CancellationErrorCode[un.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Go.VoiceProfileResult=sP;var oP=class t extends un.CancellationDetailsBase{constructor(e,r,n){super(e,r,n)}static fromResult(e){let r=un.CancellationReason.Error,n=un.CancellationErrorCode.NoError;return e.properties&&(n=un.CancellationErrorCode[e.properties.getProperty(Uk.CancellationErrorCodePropertyName,un.CancellationErrorCode[un.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)}};Go.VoiceProfileCancellationDetails=oP});var Wk=p(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.VoiceProfilePhraseResult=void 0;var o2=q(),a2=w(),aP=class extends a2.VoiceProfileResult{constructor(e,r,n,i){super(e,r),this.privPhrases=[],o2.Contracts.throwIfNullOrUndefined(i,"phrase array"),this.privType=n,i&&i[0]&&(this.privPhrases=i)}get phrases(){return this.privPhrases}get type(){return this.privType}};wh.VoiceProfilePhraseResult=aP});var Hk=p(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.VoiceProfileClient=void 0;var cP=O(),c2=rC(),Rh=q(),_s=w(),uP=class extends _s.Recognizer{constructor(e){Rh.Contracts.throwIfNullOrUndefined(e,"speechConfig");let r=e;Rh.Contracts.throwIfNull(r,"speechConfig"),super(c2.AudioConfig.fromStreamInput(_s.AudioInputStream.createPushStream()),r.properties,new cP.VoiceProfileConnectionFactory),this.privProperties=r.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(_s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Rh.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(_s.PropertyId.SpeechServiceAuthorization_Token,e)}async createProfileAsync(e,r){let n=await this.privVoiceAdapter.createProfile(e,r);return new _s.VoiceProfile(n[0],e)}async retrieveEnrollmentResultAsync(e){return this.privVoiceAdapter.retrieveEnrollmentResult(e)}async getAllProfilesAsync(e){return this.privVoiceAdapter.getAllProfiles(e)}async getActivationPhrasesAsync(e,r){return this.privVoiceAdapter.getActivationPhrases(e,r)}async enrollProfileAsync(e,r){let n=r;return Rh.Contracts.throwIfNullOrUndefined(n,"audioConfig"),this.audioConfig=r,this.privVoiceAdapter.SpeakerAudioSource=n,this.privVoiceAdapter.enrollProfile(e)}async deleteProfileAsync(e){return this.privVoiceAdapter.deleteProfile(e)}async resetProfileAsync(e){return this.privVoiceAdapter.resetProfile(e)}async close(){await this.dispose(!0)}createServiceRecognizer(e,r,n,i){let s=n;return new cP.VoiceServiceRecognizer(e,r,s,i,this)}async dispose(e){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&await super.dispose(e))}createRecognizerConfig(e){return new cP.RecognizerConfig(e,this.properties)}getResult(e,r){return new _s.VoiceProfileResult(e.ok?r:_s.ResultReason.Canceled,e.statusText)}};Eh.VoiceProfileClient=uP});var $k=p(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.SpeakerRecognizer=void 0;var lP=O(),Is=q(),pP=w(),dP=class extends pP.Recognizer{constructor(e,r){Is.Contracts.throwIfNullOrUndefined(e,"speechConfig");let n=e;Is.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(r,n.properties,new lP.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=r,Is.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=n.properties}get authorizationToken(){return this.properties.getProperty(pP.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Is.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(pP.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}async recognizeOnceAsync(e){return Is.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)}async close(){Is.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(e){Is.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();let r=await this.privReco.recognizeSpeaker(e);return await this.implRecognizerStop(),r}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(e){return new lP.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return new lP.SpeakerServiceRecognizer(e,r,s,i,this)}async dispose(e){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(e))}};_h.SpeakerRecognizer=dP});var Kk=p(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.SpeakerIdentificationModel=void 0;var u2=q(),l2=w(),hP=class t{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],u2.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),e.length===0)throw new Error("Empty Voice Profiles array");for(let r of e){if(r.profileType!==l2.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+r.profileId);this.privVoiceProfiles.push(r),this.privProfileIds.push(r.profileId)}}static fromProfiles(e){return new t(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};Ih.SpeakerIdentificationModel=hP});var Gk=p(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.SpeakerVerificationModel=void 0;var p2=q(),Jk=w(),fP=class t{constructor(e){if(p2.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===Jk.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new t(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===Jk.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};Th.SpeakerVerificationModel=fP});var vP=p(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.LanguageIdMode=void 0;var d2;(function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"})(d2=tu.LanguageIdMode||(tu.LanguageIdMode={}))});var Xk=p(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.AutoDetectSourceLanguageConfig=void 0;var h2=O(),f2=q(),Nr=w(),Qk=vP(),gP=class t{constructor(){this.privProperties=new Nr.PropertyCollection,this.privProperties.setProperty(Nr.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=Qk.LanguageIdMode.AtStart}static fromOpenRange(){let e=new t;return e.properties.setProperty(Nr.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,h2.AutoDetectSourceLanguagesOpenRangeOptionName),e.properties.setProperty(Nr.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),e}static fromLanguages(e){f2.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");let r=new t;return r.properties.setProperty(Nr.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),r}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");let r=new t,n=[];return e.forEach(i=>{if(n.push(i.language),i.endpointId!==void 0&&i.endpointId!==""){let s=i.language+Nr.PropertyId.SpeechServiceConnection_EndpointId.toString();r.properties.setProperty(s,i.endpointId)}}),r.properties.setProperty(Nr.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),r}get properties(){return this.privProperties}set mode(e){e===Qk.LanguageIdMode.Continuous?(this.privProperties.setProperty(Nr.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(Nr.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(Nr.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(Nr.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}};Ah.AutoDetectSourceLanguageConfig=gP});var Zk=p(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.AutoDetectSourceLanguageResult=void 0;var Yk=q(),mP=class t{constructor(e,r){Yk.Contracts.throwIfNullOrUndefined(e,"language"),Yk.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=r}static fromResult(e){return new t(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new t(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};kh.AutoDetectSourceLanguageResult=mP});var eb=p(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.SourceLanguageConfig=void 0;var v2=q(),yP=class t{constructor(e,r){v2.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=r}static fromLanguage(e,r){return new t(e,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};bh.SourceLanguageConfig=yP});var rb=p(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.SpeakerRecognitionCancellationDetails=Ln.SpeakerRecognitionResult=Ln.SpeakerRecognitionResultType=void 0;var tb=O(),zt=w(),Oh;(function(t){t[t.Verify=0]="Verify",t[t.Identify=1]="Identify"})(Oh=Ln.SpeakerRecognitionResultType||(Ln.SpeakerRecognitionResultType={}));var SP=class{constructor(e,r=zt.ResultReason.RecognizedSpeaker,n=zt.CancellationErrorCode.NoError,i=""){this.privProperties=new zt.PropertyCollection;let s=e.scenario==="TextIndependentIdentification"?Oh.Identify:Oh.Verify;this.privReason=r,this.privReason!==zt.ResultReason.Canceled?s===Oh.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=zt.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,e.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=zt.ResultReason.NoMatch),e.verificationResult.profileId!==void 0&&e.verificationResult.profileId!==""&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=i,this.privProperties.setProperty(tb.CancellationErrorCodePropertyName,zt.CancellationErrorCode[n])),this.privProperties.setProperty(zt.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};Ln.SpeakerRecognitionResult=SP;var CP=class t extends zt.CancellationDetailsBase{constructor(e,r,n){super(e,r,n)}static fromResult(e){let r=zt.CancellationReason.Error,n=zt.CancellationErrorCode.NoError;return e.properties&&(n=zt.CancellationErrorCode[e.properties.getProperty(tb.CancellationErrorCodePropertyName,zt.CancellationErrorCode[zt.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)}};Ln.SpeakerRecognitionCancellationDetails=CP});var PP=p(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.ConversationImpl=Qo.Conversation=void 0;var re=O(),ru=D(),A=q(),te=w(),xh=class{constructor(){}static createConversationAsync(e,r,n,i){A.Contracts.throwIfNullOrUndefined(e,re.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),A.Contracts.throwIfNullOrUndefined(e.region,re.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!e.subscriptionKey&&!e.getProperty(te.PropertyId[te.PropertyId.SpeechServiceAuthorization_Token])&&A.Contracts.throwIfNullOrUndefined(e.subscriptionKey,re.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let s,o,a;return typeof r=="string"?(s=new nu(e,r),(0,ru.marshalPromiseToCallbacks)((async()=>{})(),n,i)):(s=new nu(e),o=r,a=n,s.createConversationAsync(()=>{o&&o()},c=>{a&&a(c)})),s}};Qo.Conversation=xh;var nu=class extends xh{constructor(e,r){if(super(),this.privErrors=re.ConversationConnectionConfig.restErrors,this.onConnected=s=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,s)}catch{}},this.onDisconnected=s=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,s)}catch{}finally{this.close(!1)}},this.onCanceled=(s,o)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,o)}catch{}},this.onParticipantUpdateCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.id);if(a!==void 0){switch(o.key){case re.ConversationTranslatorCommandTypes.changeNickname:a.displayName=o.value;break;case re.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=o.value;break;case re.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=o.value;break;case re.ConversationTranslatorCommandTypes.setMute:a.isMuted=o.value;break;case re.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=o.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new te.ConversationParticipantsChangedEventArgs(te.ParticipantChangedReason.Updated,[this.toParticipant(a)],o.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(s,o)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:o.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new te.ConversationParticipantsChangedEventArgs(te.ParticipantChangedReason.Updated,this.toParticipants(!1),o.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(s,o)=>{try{let a=this.privParticipants.addOrUpdateParticipant(o.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new te.ConversationParticipantsChangedEventArgs(te.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],o.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(o.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new te.ConversationParticipantsChangedEventArgs(te.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],o.sessionId)))}catch{}},this.onTranslationReceived=(s,o)=>{try{switch(o.command){case re.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new te.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case re.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new te.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case re.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new te.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break}}catch{}},this.onParticipantsListReceived=(s,o)=>{try{if(o.sessionToken!==void 0&&o.sessionToken!==null&&(this.privRoom.token=o.sessionToken),this.privParticipants.participants=[...o.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new te.ConversationParticipantsChangedEventArgs(te.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),o.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(te.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(s,o)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,o)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new te.PropertyCollection,this.privManager=new re.ConversationManager,e.getProperty(te.PropertyId[te.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(te.PropertyId[te.PropertyId.SpeechServiceConnection_RecoLanguage],re.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(te.PropertyId[te.PropertyId.SpeechServiceConnection_RecoLanguage]),r)this.privConversationId=r;else{e.targetLanguages.length===0&&e.addTargetLanguage(this.privLanguage),e.getProperty(te.PropertyId[te.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(te.ProfanityOption.Masked);let o=e.getProperty(te.PropertyId[te.PropertyId.ConversationTranslator_Name]);o==null&&(o="Host"),A.Contracts.throwIfNullOrTooLong(o,"nickname",50),A.Contracts.throwIfNullOrTooShort(o,"nickname",2),e.setProperty(te.PropertyId[te.PropertyId.ConversationTranslator_Name],o)}this.privConfig=e;let i=e;A.Contracts.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new re.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){let e=this.conversationId,r=this.participants.map(s=>({id:s.id,preferredLanguage:s.preferredLanguage,voice:s.voice})),n={};for(let s of re.ConversationConnectionConfig.transcriptionEventKeys){let o=this.properties.getProperty(s,"");o!==""&&(n[s]=o)}return{id:e,participants:r,conversationProperties:n}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){A.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,r){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),r),this.privManager.createOrJoin(this.privProperties,void 0,n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),r),this.privRoom=n,this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}startConversationAsync(e,r){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),r),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=re.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}addParticipantAsync(e,r,n){A.Contracts.throwIfNullOrUndefined(e,"Participant"),(0,ru.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),r,n)}joinConversationAsync(e,r,n,i,s){try{A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),A.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,o=>{A.Contracts.throwIfNullOrUndefined(o,this.privErrors.permissionDeniedConnect),this.privRoom=o,this.privConfig.authorizationToken=o.cognitiveSpeechAuthToken,i&&i(o.cognitiveSpeechAuthToken)},o=>{this.handleError(o,s)})}catch(o){this.handleError(o,s)}}deleteConversationAsync(e,r){(0,ru.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),e,r)}async deleteConversationImplAsync(){A.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),A.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(e,r){(0,ru.marshalPromiseToCallbacks)(this.endConversationImplAsync(),e,r)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}muteAllParticipantsAsync(e,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}muteParticipantAsync(e,r,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(r,n)},s=>{this.handleError(s,n)})}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,r,n){try{if(A.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,ru.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),r,n);else{A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);let i="";typeof e=="string"?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),A.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(o=>o.id===i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),()=>{this.handleCallback(r,n)},o=>{this.handleError(o,n)})}}catch(i){this.handleError(i,n)}}unlockConversationAsync(e,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}unmuteAllParticipantsAsync(e,r){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}unmuteParticipantAsync(e,r,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(r,n)},s=>{this.handleError(s,n)})}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,r,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(r,n)},i=>{this.handleError(i,n)})}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,r,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(r,n)},i=>{this.handleError(i,n)})}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,r,n){try{A.Contracts.throwIfDisposed(this.privIsDisposed),A.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),A.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),A.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(r,n)},i=>{this.handleError(i,n)})}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(e){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let n=this.conversationInfo;return n.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(n,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let r=this.conversationInfo;return r.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(r,"leave")}async close(e){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(r){throw r}e&&this.dispose()}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){let n=e;r(n.name+": "+n.message)}else r(e)}toParticipants(e){let r=this.privParticipants.participants.map(n=>this.toParticipant(n));return e?r:r.filter(n=>n.isHost===!1)}toParticipant(e){return new te.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:re.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,r){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:re.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.participantCommand,value:r})}getLockCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:re.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:re.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:re.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(e,"nickname"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:re.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:re.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return A.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),A.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),A.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:re.ConversationTranslatorMessageTypes.instantMessage})}};Qo.ConversationImpl=nu});var nb=p(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.ConversationCommon=void 0;var wP=class{constructor(e){this.privAudioConfig=e}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){let n=e;r(n.name+": "+n.message)}else r(e)}};Mh.ConversationCommon=wP});var ib=p(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.ConversationExpirationEventArgs=void 0;var g2=w(),RP=class extends g2.SessionEventArgs{constructor(e,r){super(r),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}};Dh.ConversationExpirationEventArgs=RP});var sb=p(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.ConversationParticipantsChangedEventArgs=void 0;var m2=w(),EP=class extends m2.SessionEventArgs{constructor(e,r,n){super(n),this.privReason=e,this.privParticipant=r}get reason(){return this.privReason}get participants(){return this.privParticipant}};Nh.ConversationParticipantsChangedEventArgs=EP});var ob=p(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.ConversationTranslationCanceledEventArgs=void 0;var y2=Bo(),_P=class extends y2.CancellationEventArgsBase{};zh.ConversationTranslationCanceledEventArgs=_P});var ab=p(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.ConversationTranslationEventArgs=void 0;var S2=w(),IP=class extends S2.RecognitionEventArgs{constructor(e,r,n){super(r,n),this.privResult=e}get result(){return this.privResult}};jh.ConversationTranslationEventArgs=IP});var cb=p(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.ConversationTranslationResult=void 0;var C2=SC(),TP=class extends C2.TranslationRecognitionResult{constructor(e,r,n,i,s,o,a,c,u,l,d){super(r,i,s,o,a,c,void 0,void 0,u,l,d),this.privId=e,this.privOrigLang=n}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};Lh.ConversationTranslationResult=TP});var kP=p(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});qh.StringUtils=void 0;var AP=class{static formatString(e,r){if(!e)return"";if(!r)return e;let n="",i="",s=c=>{n+=c},o=c=>{i+=c},a=s;for(let c=0;c<e.length;c++){let u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(a("{"),c++):a=o;break;case"}":l==="}"?(a("}"),c++):(r.hasOwnProperty(i)&&(n+=r[i]),a=s,i="");break;default:a(u);break}}return n}};qh.StringUtils=AP});var pb=p(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.ConversationTranslatorConnectionFactory=void 0;var bP=je(),ub=kP(),P2=q(),Bh=w(),w2=ht(),vr=jn(),lb=fr(),OP=O(),Fh=class t extends lb.ConnectionFactoryBase{constructor(e){super(),P2.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,r,n){let i=e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",s=this.privConvGetter().room,o=s.cognitiveSpeechRegion||e.parameters.getProperty(Bh.PropertyId.SpeechServiceConnection_Region,""),a={hostSuffix:lb.ConnectionFactoryBase.getHostSuffix(o),path:t.CTS_VIRT_MIC_PATH,region:encodeURIComponent(o)};a[vr.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(Bh.PropertyId.SpeechServiceConnection_RecoLanguage,"")),a[vr.QueryParameterNames.CtsMeetingId]=encodeURIComponent(s.roomId),a[vr.QueryParameterNames.CtsDeviceId]=encodeURIComponent(s.participantId),a[vr.QueryParameterNames.CtsIsParticipant]=s.isHost?"":"&"+vr.QueryParameterNames.CtsIsParticipant;let c="",u={},l={};if(i){c=e.parameters.getProperty(Bh.PropertyId.SpeechServiceConnection_Endpoint),c||(c="wss://"+e.parameters.getProperty(Bh.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),c=ub.StringUtils.formatString(c,a);let f=new URL(c);f.searchParams.forEach((C,S)=>{u[S]=C}),new OP.TranscriberConnectionFactory().setQueryParams(u,e,c),u[vr.QueryParameterNames.CtsMeetingId]=a[vr.QueryParameterNames.CtsMeetingId],u[vr.QueryParameterNames.CtsDeviceId]=a[vr.QueryParameterNames.CtsDeviceId],s.isHost||(u[vr.QueryParameterNames.CtsIsParticipant]=""),vr.QueryParameterNames.Format in u||(u[vr.QueryParameterNames.Format]="simple"),f.searchParams.forEach((C,S)=>{f.searchParams.set(S,u[S]),delete u[S]}),c=f.toString()}else{let f=new OP.TranslationConnectionFactory;c=f.getEndpointUrl(e,!0),c=ub.StringUtils.formatString(c,a),f.setQueryParams(u,e,c)}l[w2.HeaderNames.ConnectionId]=n,l[bP.RestConfigBase.configParams.token]=s.token,r.token&&(l[r.headerName]=r.token);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new bP.WebsocketConnection(c,u,l,new OP.WebsocketMessageFormatter,bP.ProxyInfo.fromRecognizerConfig(e),d,n))}};Uh.ConversationTranslatorConnectionFactory=Fh;Fh.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"});var hb=p(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.ConversationTranslator=Ts.SpeechState=void 0;var iu=O(),R2=pb(),Vh=D(),zr=q(),he=w(),E2=PP(),db=Wh(),jr;(function(t){t[t.Inactive=0]="Inactive",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected"})(jr=Ts.SpeechState||(Ts.SpeechState={}));var xP=class extends he.TranslationRecognizer{constructor(e,r,n,i){super(e,r,new R2.ConversationTranslatorConnectionFactory(i)),this.privSpeechState=jr.Inactive,n&&(this.privTranslator=n,this.sessionStarted=()=>{this.privSpeechState=jr.Connected},this.sessionStopped=()=>{this.privSpeechState=jr.Inactive},this.recognizing=(s,o)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,o)},this.recognized=async(s,o)=>{o.result?.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(o.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,o)},this.canceled=async()=>{if(this.privSpeechState!==jr.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=jr.Inactive}})}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=jr.Connected}async onCancelSpeech(){this.privSpeechState=jr.Inactive,await this.cancelSpeech()}fireCancelEvent(e){try{if(this.privTranslator.canceled){let r=new db.ConversationTranslationCanceledEventArgs(he.CancellationReason.Error,e,he.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,r)}}catch{}}async cancelSpeech(){try{this.stopContinuousRecognitionAsync(),await this.privReco?.disconnect(),this.privSpeechState=jr.Inactive}catch{}}},MP=class extends db.ConversationCommon{constructor(e){super(e),this.privErrors=iu.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new he.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===jr.Connected||this.privCTRecognizer.state===jr.Connecting||this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,r){let n=JSON.parse(this.privProperties.getProperty(iu.ServicePropertiesPropertyName,"{}"));n[e]=r,this.privProperties.setProperty(iu.ServicePropertiesPropertyName,JSON.stringify(n))}joinConversationAsync(e,r,n,i,s){try{if(typeof e=="string"){zr.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),zr.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),s);let o=n;(o==null||o==="")&&(o=iu.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=he.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(he.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(o),this.privSpeechTranslationConfig.setProperty(he.PropertyId[he.PropertyId.SpeechServiceConnection_RecoLanguage],o),this.privSpeechTranslationConfig.setProperty(he.PropertyId[he.PropertyId.ConversationTranslator_Name],r);let a=[he.PropertyId.SpeechServiceConnection_Host,he.PropertyId.ConversationTranslator_Host,he.PropertyId.SpeechServiceConnection_Endpoint,he.PropertyId.SpeechServiceConnection_ProxyHostName,he.PropertyId.SpeechServiceConnection_ProxyPassword,he.PropertyId.SpeechServiceConnection_ProxyPort,he.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(let u of a){let l=this.privProperties.getProperty(u);if(l){let d=typeof u=="string"?u:he.PropertyId[u];this.privSpeechTranslationConfig.setProperty(d,l)}}let c=JSON.parse(this.privProperties.getProperty(iu.ServicePropertiesPropertyName,"{}"));for(let u of Object.keys(c))this.privSpeechTranslationConfig.setServiceProperty(u,c[u],he.ServicePropertyChannel.UriQueryParameter);this.privConversation=new E2.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,r,o,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),s),this.privSpeechTranslationConfig.authorizationToken=u,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(i,s)},l=>{this.handleError(l,s)})},u=>{this.handleError(u,s)})}else typeof e=="object"?(zr.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),zr.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(he.PropertyId.ConversationTranslator_Name,r),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,zr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),zr.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(n,i)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),i)}catch(o){this.handleError(o,typeof n=="string"?s:i)}}leaveConversationAsync(e,r){(0,Vh.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),e,r)}sendTextMessageAsync(e,r,n){try{zr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),zr.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,r,n)}catch(i){this.handleError(i,n)}}startTranscribingAsync(e,r){(0,Vh.marshalPromiseToCallbacks)((async()=>{try{zr.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),zr.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),zr.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(n){throw this.privIsSpeaking=!1,await this.cancelSpeech(),n}})(),e,r)}stopTranscribingAsync(e,r){(0,Vh.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((n,i)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(n,i)})}catch{await this.cancelSpeech()}})(),e,r)}isDisposed(){return this.privIsDisposed}dispose(e,r,n){(0,Vh.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),r,n)}async cancelSpeech(){try{this.privIsSpeaking=!1,await this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=he.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(he.PropertyId[he.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(he.PropertyId[he.PropertyId.SpeechServiceConnection_Key],"");let e=()=>this.privConversation;this.privCTRecognizer=new xP(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw await this.cancelSpeech(),e}}startContinuousRecognition(){return new Promise((e,r)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,r)})}};Ts.ConversationTranslator=MP});var fb=p($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.ConversationTranscriber=void 0;var Hh=O(),_2=Gt(),DP=D(),As=q(),Tt=w(),NP=class t extends Tt.Recognizer{constructor(e,r){let n=e;As.Contracts.throwIfNull(n,"speechConfig"),As.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(Tt.PropertyId.SpeechServiceConnection_RecoLanguage),Tt.PropertyId[Tt.PropertyId.SpeechServiceConnection_RecoLanguage]),super(r,n.properties,new Hh.ConversationTranscriberConnectionFactory,e.tokenCredential),this.privProperties.setProperty(Tt.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,r,n){let i=e;return r.properties.mergeTo(i.properties),new t(e,n)}get endpointId(){return As.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Tt.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(Tt.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){As.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Tt.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return As.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Tt.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return As.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Hh.OutputFormatPropertyName,Tt.OutputFormat[Tt.OutputFormat.Simple])===Tt.OutputFormat[Tt.OutputFormat.Simple]?Tt.OutputFormat.Simple:Tt.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,r){(0,DP.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(_2.RecognitionMode.Conversation),e,r)}stopTranscribingAsync(e,r){(0,DP.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,r)}close(e,r){As.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,DP.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new Hh.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return i.isSpeakerDiarizationEnabled=!0,new Hh.ConversationTranscriptionServiceRecognizer(e,r,s,i,this)}};$h.ConversationTranscriber=NP});var vb=p(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.Participant=Xo.User=void 0;var I2=w(),zP=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};Xo.User=zP;var jP=class t{constructor(e,r,n,i,s,o,a,c){this.privId=e,this.privAvatar=r,this.privDisplayName=n,this.privIsHost=i,this.privIsMuted=s,this.privIsUsingTts=o,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new I2.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,r,n){return new t(e,"",e,!1,!1,!1,r,n)}};Xo.Participant=jP});var gb=p(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.ParticipantChangedReason=void 0;var T2;(function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"})(T2=su.ParticipantChangedReason||(su.ParticipantChangedReason={}))});var mb=p(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.MeetingImpl=Yo.Meeting=void 0;var ne=O(),ou=D(),k=q(),ve=w(),Kh=class{constructor(){}static createMeetingAsync(e,r,n,i){if(k.Contracts.throwIfNullOrUndefined(e,ne.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),k.Contracts.throwIfNullOrUndefined(e.region,ne.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),k.Contracts.throwIfNull(r,"meetingId"),r.length===0)throw new Error("meetingId cannot be empty");!e.subscriptionKey&&!e.getProperty(ve.PropertyId[ve.PropertyId.SpeechServiceAuthorization_Token])&&k.Contracts.throwIfNullOrUndefined(e.subscriptionKey,ne.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let s=new Jh(e,r);return(0,ou.marshalPromiseToCallbacks)((async()=>{})(),n,i),s}};Yo.Meeting=Kh;var Jh=class extends Kh{constructor(e,r){super(),this.privErrors=ne.ConversationConnectionConfig.restErrors,this.onConnected=s=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,s)}catch{}},this.onDisconnected=s=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,s)}catch{}finally{this.close(!1)}},this.onCanceled=(s,o)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,o)}catch{}},this.onParticipantUpdateCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.id);if(a!==void 0){switch(o.key){case ne.ConversationTranslatorCommandTypes.changeNickname:a.displayName=o.value;break;case ne.ConversationTranslatorCommandTypes.setUseTTS:a.isUsingTts=o.value;break;case ne.ConversationTranslatorCommandTypes.setProfanityFiltering:a.profanity=o.value;break;case ne.ConversationTranslatorCommandTypes.setMute:a.isMuted=o.value;break;case ne.ConversationTranslatorCommandTypes.setTranslateToLanguages:a.translateToLanguages=o.value;break}this.privParticipants.addOrUpdateParticipant(a),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ve.ConversationParticipantsChangedEventArgs(ve.ParticipantChangedReason.Updated,[this.toParticipant(a)],o.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(s,o)=>{try{this.privParticipants.participants.forEach(a=>a.isMuted=a.isHost?!1:o.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ve.ConversationParticipantsChangedEventArgs(ve.ParticipantChangedReason.Updated,this.toParticipants(!1),o.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(s,o)=>{try{let a=this.privParticipants.addOrUpdateParticipant(o.participant);a!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ve.ConversationParticipantsChangedEventArgs(ve.ParticipantChangedReason.JoinedConversation,[this.toParticipant(a)],o.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(s,o)=>{try{let a=this.privParticipants.getParticipant(o.participant.id);a!==void 0&&(this.privParticipants.deleteParticipant(o.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ve.ConversationParticipantsChangedEventArgs(ve.ParticipantChangedReason.LeftConversation,[this.toParticipant(a)],o.sessionId)))}catch{}},this.onTranslationReceived=(s,o)=>{try{switch(o.command){case ne.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new ve.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case ne.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new ve.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break;case ne.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new ve.ConversationTranslationEventArgs(o.payload,void 0,o.sessionId));break}}catch{}},this.onParticipantsListReceived=(s,o)=>{try{if(o.sessionToken!==void 0&&o.sessionToken!==null&&(this.privRoom.token=o.sessionToken),this.privParticipants.participants=[...o.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new ve.ConversationParticipantsChangedEventArgs(ve.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),o.sessionId)),this.me.isHost){let a=this.privConversationTranslator?.properties.getProperty(ve.PropertyId.ConversationTranslator_Name);a!==void 0&&a.length>0&&a!==this.me.displayName&&this.changeNicknameAsync(a)}}catch{}},this.onConversationExpiration=(s,o)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,o)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new ve.PropertyCollection,this.privManager=new ne.ConversationManager,e.getProperty(ve.PropertyId[ve.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(ve.PropertyId[ve.PropertyId.SpeechServiceConnection_RecoLanguage],ne.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(ve.PropertyId[ve.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=r,this.privConfig=e;let i=e;k.Contracts.throwIfNull(i,"speechConfig"),this.privProperties=i.properties.clone(),this.privIsConnected=!1,this.privParticipants=new ne.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){let e=this.meetingId,r=this.participants.map(s=>({id:s.id,preferredLanguage:s.preferredLanguage,voice:s.voice})),n={};for(let s of ne.ConversationConnectionConfig.transcriptionEventKeys){let o=this.properties.getProperty(s,"");o!==""&&(n[s]=o)}return{id:e,participants:r,meetingProperties:n}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(e){k.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,r){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),r),this.privManager.createOrJoin(this.privProperties,void 0,n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),r),this.privRoom=n,this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}startMeetingAsync(e,r){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),r),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}addParticipantAsync(e,r,n){k.Contracts.throwIfNullOrUndefined(e,"Participant"),(0,ou.marshalPromiseToCallbacks)(this.addParticipantImplAsync(e),r,n)}joinMeetingAsync(e,r,n,i,s){try{k.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),k.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","nickname")),k.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,o=>{k.Contracts.throwIfNullOrUndefined(o,this.privErrors.permissionDeniedConnect),this.privRoom=o,this.privConfig.authorizationToken=o.cognitiveSpeechAuthToken,i&&i(o.cognitiveSpeechAuthToken)},o=>{this.handleError(o,s)})}catch(o){this.handleError(o,s)}}deleteMeetingAsync(e,r){(0,ou.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),e,r)}async deleteMeetingImplAsync(){k.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),k.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(e,r){(0,ou.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),e,r)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,r){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}muteAllParticipantsAsync(e,r){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}muteParticipantAsync(e,r,n){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),()=>{this.handleCallback(r,n)},s=>{this.handleError(s,n)})}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,r,n){try{if(k.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))(0,ou.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(e),r,n);else{k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);let i="";typeof e=="string"?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),k.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(o=>o.id===i)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),()=>{this.handleCallback(r,n)},o=>{this.handleError(o,n)})}}catch(i){this.handleError(i,n)}}unlockMeetingAsync(e,r){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}unmuteAllParticipantsAsync(e,r){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(e,r)},n=>{this.handleError(n,r)})}catch(n){this.handleError(n,r)}}unmuteParticipantAsync(e,r,n){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),!this.me.isHost&&this.me.id!==e&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),this.privParticipants.getParticipantIndex(e)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),()=>{this.handleCallback(r,n)},s=>{this.handleError(s,n)})}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,r,n){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),()=>{this.handleCallback(r,n)},i=>{this.handleError(i,n)})}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,r,n){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),()=>{this.handleCallback(r,n)},i=>{this.handleError(i,n)})}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,r,n){try{k.Contracts.throwIfDisposed(this.privIsDisposed),k.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),k.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),k.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),()=>{this.handleCallback(r,n)},i=>{this.handleError(i,n)})}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(e){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){let e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(this.privParticipants.addOrUpdateParticipant(e)!==void 0&&this.privTranscriberRecognizer){let n=this.meetingInfo;return n.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(n,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);let r=this.meetingInfo;return r.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(r,"leave")}async close(e){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(r){throw r}e&&this.dispose()}handleCallback(e,r){if(e){try{e()}catch(n){r&&r(n)}e=void 0}}handleError(e,r){if(r)if(e instanceof Error){let n=e;r(n.name+": "+n.message)}else r(e)}toParticipants(e){let r=this.privParticipants.participants.map(n=>this.toParticipant(n));return e?r:r.filter(n=>n.isHost===!1)}toParticipant(e){return new ve.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),k.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:ne.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,r){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),k.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:ne.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.participantCommand,value:r})}getLockCommand(e){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),k.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:ne.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),k.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:ne.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),k.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:ne.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),k.Contracts.throwIfNullOrWhitespace(e,"nickname"),k.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:ne.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:ne.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return k.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),k.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),k.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:ne.ConversationTranslatorMessageTypes.instantMessage})}};Yo.MeetingImpl=Jh});var yb=p(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.MeetingTranscriptionCanceledEventArgs=void 0;var A2=Bo(),LP=class extends A2.CancellationEventArgsBase{};Gh.MeetingTranscriptionCanceledEventArgs=LP});var Sb=p(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.MeetingTranscriber=void 0;var k2=O(),qP=D(),au=q(),cu=w(),b2=Wh(),BP=class{constructor(e){this.privAudioConfig=e,this.privProperties=new cu.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return au.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(cu.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return cu.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(cu.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){au.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(cu.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,r,n){let i=e;au.Contracts.throwIfNullOrUndefined(b2.MeetingImpl,"Meeting"),this.privRecognizer=new k2.TranscriberRecognizer(e.config,this.privAudioConfig),au.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,qP.marshalPromiseToCallbacks)(i.connectTranscriberRecognizer(this.privRecognizer),r,n)}startTranscribingAsync(e,r){this.privRecognizer.startContinuousRecognitionAsync(e,r)}stopTranscribingAsync(e,r){this.privRecognizer.stopContinuousRecognitionAsync(e,r)}leaveMeetingAsync(e,r){this.privRecognizer.disconnectCallbacks(),(0,qP.marshalPromiseToCallbacks)((async()=>{})(),e,r)}close(e,r){au.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,qP.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}async dispose(e){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))}};Qh.MeetingTranscriber=BP});var Cb=p(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.ConversationTranscriptionResult=void 0;var O2=w(),FP=class extends O2.RecognitionResult{constructor(e,r,n,i,s,o,a,c,u,l,d){super(e,r,n,i,s,o,a,u,l,d),this.privSpeakerId=c}get speakerId(){return this.privSpeakerId}};Xh.ConversationTranscriptionResult=FP});var Wh=p(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.ConversationTranscriptionResult=W.MeetingTranscriber=W.MeetingTranscriptionCanceledEventArgs=W.MeetingImpl=W.Meeting=W.ParticipantChangedReason=W.User=W.Participant=W.ConversationTranscriber=W.ConversationTranslator=W.ConversationTranslationResult=W.ConversationTranslationEventArgs=W.ConversationTranslationCanceledEventArgs=W.ConversationParticipantsChangedEventArgs=W.ConversationExpirationEventArgs=W.ConversationCommon=W.ConversationImpl=W.Conversation=void 0;var Pb=PP();Object.defineProperty(W,"Conversation",{enumerable:!0,get:function(){return Pb.Conversation}});Object.defineProperty(W,"ConversationImpl",{enumerable:!0,get:function(){return Pb.ConversationImpl}});var x2=nb();Object.defineProperty(W,"ConversationCommon",{enumerable:!0,get:function(){return x2.ConversationCommon}});var M2=ib();Object.defineProperty(W,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return M2.ConversationExpirationEventArgs}});var D2=sb();Object.defineProperty(W,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return D2.ConversationParticipantsChangedEventArgs}});var N2=ob();Object.defineProperty(W,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return N2.ConversationTranslationCanceledEventArgs}});var z2=ab();Object.defineProperty(W,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return z2.ConversationTranslationEventArgs}});var j2=cb();Object.defineProperty(W,"ConversationTranslationResult",{enumerable:!0,get:function(){return j2.ConversationTranslationResult}});var L2=hb();Object.defineProperty(W,"ConversationTranslator",{enumerable:!0,get:function(){return L2.ConversationTranslator}});var q2=fb();Object.defineProperty(W,"ConversationTranscriber",{enumerable:!0,get:function(){return q2.ConversationTranscriber}});var wb=vb();Object.defineProperty(W,"Participant",{enumerable:!0,get:function(){return wb.Participant}});Object.defineProperty(W,"User",{enumerable:!0,get:function(){return wb.User}});var B2=gb();Object.defineProperty(W,"ParticipantChangedReason",{enumerable:!0,get:function(){return B2.ParticipantChangedReason}});var Rb=mb();Object.defineProperty(W,"Meeting",{enumerable:!0,get:function(){return Rb.Meeting}});Object.defineProperty(W,"MeetingImpl",{enumerable:!0,get:function(){return Rb.MeetingImpl}});var F2=yb();Object.defineProperty(W,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return F2.MeetingTranscriptionCanceledEventArgs}});var U2=Sb();Object.defineProperty(W,"MeetingTranscriber",{enumerable:!0,get:function(){return U2.MeetingTranscriber}});var V2=Cb();Object.defineProperty(W,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return V2.ConversationTranscriptionResult}})});var Yh=p(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.SynthesisRequest=Zo.Synthesizer=void 0;var xi=O(),W2=D(),Eb=q(),Mi=w(),UP=class t{constructor(e){let r=e;Eb.Contracts.throwIfNull(r,"speechConfig"),this.privProperties=r.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new W2.Queue,this.tokenCredential=e.tokenCredential}get authorizationToken(){return this.properties.getProperty(Mi.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Eb.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(Mi.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(Mi.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===xi.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){let r={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"},n=this.properties.getProperty(Mi.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(Mi.PropertyId.SpeechServiceConnection_SynthVoice,""),s=t.XMLEncode(e);return this.autoDetectSourceLanguage?n="en-US":i=i||r[n],i&&(s=`<voice name='${i}'>${s}</voice>`),s=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${n}'>${s}</speak>`,s}async dispose(e){this.privDisposed||(e&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;let e=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}createSynthesizerConfig(e){return new xi.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e=typeof window<"u"?"Browser":"Node",r="unknown",n="unknown";typeof navigator<"u"&&(e=e+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);let i=this.createSynthesizerConfig(new xi.SpeechServiceConfig(new xi.Context(new xi.OS(e,r,n)))),s=this.privProperties.getProperty(Mi.PropertyId.SpeechServiceConnection_Key,void 0),o=s&&s!==""?new xi.CognitiveSubscriptionKeyAuthentication(s):this.tokenCredential?new xi.CognitiveTokenAuthentication(async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(a){throw a}},async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(a){throw a}}):new xi.CognitiveTokenAuthentication(()=>{let a=this.privProperties.getProperty(Mi.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)},()=>{let a=this.privProperties.getProperty(Mi.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(a)});this.privAdapter=this.createSynthesisAdapter(o,this.privConnectionFactory,i),this.privRestAdapter=this.createRestSynthesisAdapter(o,i)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Zo.Synthesizer=UP;var VP=class{constructor(e,r,n,i,s,o){this.requestId=e,this.text=r,this.isSSML=n,this.cb=i,this.err=s,this.dataStream=o}};Zo.SynthesisRequest=VP});var Ib=p(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.SpeechSynthesizer=void 0;var WP=O(),HP=D(),H2=YS(),$2=zo(),K2=Ss(),_b=q(),Di=w(),J2=Yh(),$P=class t extends Di.Synthesizer{constructor(e,r){super(e),r!==null&&(r===void 0?this.audioConfig=typeof window>"u"?void 0:Di.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=r),this.privConnectionFactory=new WP.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,r,n){let i=e;return r.properties.mergeTo(i.properties),new t(e,n)}speakTextAsync(e,r,n,i){this.speakImpl(e,!1,r,n,i)}speakSsmlAsync(e,r,n,i){this.speakImpl(e,!0,r,n,i)}async getVoicesAsync(e=""){return this.getVoices(e)}close(e,r){_b.Contracts.throwIfDisposed(this.privDisposed),(0,HP.marshalPromiseToCallbacks)(this.dispose(!0),e,r)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,r,n){return new WP.SpeechSynthesisAdapter(e,r,n,this,this.audioConfig)}createRestSynthesisAdapter(e,r){return new WP.SynthesisRestAdapter(r,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=$2.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Di.SpeechSynthesisOutputFormat[this.properties.getProperty(Di.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,r,n,i,s){try{_b.Contracts.throwIfDisposed(this.privDisposed);let o=(0,HP.createNoDashGuid)(),a;s instanceof Di.PushAudioOutputStreamCallback?a=new K2.PushAudioOutputStreamImpl(s):s instanceof Di.PullAudioOutputStream?a=s:s!==void 0?a=new H2.AudioFileWriter(s):a=void 0,this.synthesisRequestQueue.enqueue(new J2.SynthesisRequest(o,e,r,c=>{if(this.privSynthesizing=!1,n)try{n(c)}catch(u){i&&i(u)}n=void 0,this.adapterSpeak().catch(()=>{})},c=>{i&&i(c)},a)),this.adapterSpeak().catch(()=>{})}catch(o){if(i)if(o instanceof Error){let a=o;i(a.name+": "+a.message)}else i(o);this.dispose(!0).catch(()=>{})}}async getVoices(e){let r=(0,HP.createNoDashGuid)(),n=await this.privRestAdapter.getVoicesList(r);if(n.ok&&Array.isArray(n.json)){let i=n.json;return e&&e.length>0&&(i=i.filter(s=>!!s.Locale&&s.Locale.toLowerCase()===e.toLowerCase())),new Di.SynthesisVoicesResult(r,i,void 0)}else return new Di.SynthesisVoicesResult(r,void 0,`Error: ${n.status}: ${n.statusText}`)}};Zh.SpeechSynthesizer=$P});var Tb=p(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.SynthesisResult=void 0;var KP=class{constructor(e,r,n,i){this.privResultId=e,this.privReason=r,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};ef.SynthesisResult=KP});var Ab=p(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.SpeechSynthesisResult=void 0;var G2=w(),JP=class extends G2.SynthesisResult{constructor(e,r,n,i,s,o){super(e,r,i,s),this.privAudioData=n,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};tf.SpeechSynthesisResult=JP});var kb=p(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.SpeechSynthesisEventArgs=void 0;var GP=class{constructor(e){this.privResult=e}get result(){return this.privResult}};rf.SpeechSynthesisEventArgs=GP});var bb=p(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.SpeechSynthesisWordBoundaryEventArgs=void 0;var QP=class{constructor(e,r,n,i,s,o){this.privAudioOffset=e,this.privDuration=r,this.privText=n,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};nf.SpeechSynthesisWordBoundaryEventArgs=QP});var Ob=p(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.SpeechSynthesisBookmarkEventArgs=void 0;var XP=class{constructor(e,r){this.privAudioOffset=e,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};sf.SpeechSynthesisBookmarkEventArgs=XP});var xb=p(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.SpeechSynthesisVisemeEventArgs=void 0;var YP=class{constructor(e,r,n){this.privAudioOffset=e,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};of.SpeechSynthesisVisemeEventArgs=YP});var Mb=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.SpeechSynthesisBoundaryType=void 0;var Q2;(function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"})(Q2=uu.SpeechSynthesisBoundaryType||(uu.SpeechSynthesisBoundaryType={}))});var Db=p(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.SynthesisVoicesResult=void 0;var ea=w(),ZP=class extends ea.SynthesisResult{constructor(e,r,n){if(Array.isArray(r)){super(e,ea.ResultReason.VoicesListRetrieved,void 0,new ea.PropertyCollection),this.privVoices=[];for(let i of r)this.privVoices.push(new ea.VoiceInfo(i))}else super(e,ea.ResultReason.Canceled,n||"Error information unavailable",new ea.PropertyCollection)}get voices(){return this.privVoices}};af.SynthesisVoicesResult=ZP});var Nb=p(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.VoiceInfo=ln.SynthesisVoiceType=ln.SynthesisVoiceGender=void 0;var Lr;(function(t){t[t.Unknown=0]="Unknown",t[t.Female=1]="Female",t[t.Male=2]="Male",t[t.Neutral=3]="Neutral"})(Lr=ln.SynthesisVoiceGender||(ln.SynthesisVoiceGender={}));var cf;(function(t){t[t.Unknown=0]="Unknown",t[t.OnlineNeural=1]="OnlineNeural",t[t.OnlineStandard=2]="OnlineStandard",t[t.OfflineNeural=3]="OfflineNeural",t[t.OfflineStandard=4]="OfflineStandard",t[t.OnlineNeuralHD=5]="OnlineNeuralHD"})(cf=ln.SynthesisVoiceType||(ln.SynthesisVoiceType={}));var X2={[Lr[Lr.Neutral]]:Lr.Neutral,[Lr[Lr.Male]]:Lr.Male,[Lr[Lr.Female]]:Lr.Female},Y2={Neural:cf.OnlineNeural,NeuralHD:cf.OnlineNeuralHD},ew=class{constructor(e){if(this.privStyleList=[],e){if(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=Y2[e.VoiceType]||cf.Unknown,this.privGender=X2[e.Gender]||Lr.Unknown,e.StyleList&&Array.isArray(e.StyleList))for(let r of e.StyleList)this.privStyleList.push(r);this.privSampleRateHertz=e.SampleRateHertz,this.privStatus=e.Status,e.ExtendedPropertyMap&&(this.privExtendedPropertyMap=e.ExtendedPropertyMap),this.privWordsPerMinute=e.WordsPerMinute,Array.isArray(e.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...e.SecondaryLocaleList]),Array.isArray(e.RolePlayList)&&(this.privRolePlayList=[...e.RolePlayList]),e.VoiceTag&&(this.privVoiceTag=e.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}};ln.VoiceInfo=ew});var jb=p(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.SpeakerAudioDestination=void 0;var ks=D(),Z2=Ss(),jt=Ei(),e4=1800,zb={[jt.AudioFormatTag.PCM]:"audio/wav",[jt.AudioFormatTag.MuLaw]:"audio/x-wav",[jt.AudioFormatTag.MP3]:"audio/mpeg",[jt.AudioFormatTag.OGG_OPUS]:"audio/ogg",[jt.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[jt.AudioFormatTag.ALaw]:"audio/x-wav",[jt.AudioFormatTag.FLAC]:"audio/flac",[jt.AudioFormatTag.AMR_WB]:"audio/amr-wb",[jt.AudioFormatTag.G722]:"audio/G722"},tw=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||(0,ks.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{r&&r()},i=>{n&&n(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===jt.AudioFormatTag.PCM||this.privFormat.formatTag===jt.AudioFormatTag.MuLaw||this.privFormat.formatTag===jt.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);let i=new Blob([n],{type:zb[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},s=>{r&&r(s)})},i=>{r&&r(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;let r=zb[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${jt.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=e4,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{ks.Events.instance.onEvent(new ks.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{ks.Events.instance.onEvent(new ks.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{ks.Events.instance.onEvent(new ks.BackgroundEvent(n))})):(console.warn(`Format ${jt.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new Z2.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;let e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};uf.SpeakerAudioDestination=tw});var Lb=p(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.ConversationTranscriptionCanceledEventArgs=void 0;var t4=Bo(),rw=class extends t4.CancellationEventArgsBase{};lf.ConversationTranscriptionCanceledEventArgs=rw});var qb=p(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});pf.MeetingTranscriptionCanceledEventArgs=void 0;var r4=Bo(),nw=class extends r4.CancellationEventArgsBase{};pf.MeetingTranscriptionCanceledEventArgs=nw});var Bb=p(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.PronunciationAssessmentGradingSystem=void 0;var n4;(function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"})(n4=lu.PronunciationAssessmentGradingSystem||(lu.PronunciationAssessmentGradingSystem={}))});var Fb=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.PronunciationAssessmentGranularity=void 0;var i4;(function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"})(i4=pu.PronunciationAssessmentGranularity||(pu.PronunciationAssessmentGranularity={}))});var Ub=p(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.PronunciationAssessmentConfig=void 0;var df=q(),Se=w(),iw=class t{constructor(e,r=Se.PronunciationAssessmentGradingSystem.FivePoint,n=Se.PronunciationAssessmentGranularity.Phoneme,i=!1){df.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new Se.PropertyCollection,this.privProperties.setProperty(Se.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(Se.PropertyId.PronunciationAssessment_GradingSystem,Se.PronunciationAssessmentGradingSystem[r]),this.privProperties.setProperty(Se.PropertyId.PronunciationAssessment_Granularity,Se.PronunciationAssessmentGranularity[n]),this.privProperties.setProperty(Se.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}static fromJSON(e){df.Contracts.throwIfNullOrUndefined(e,"json");let r=new t("");return r.privProperties=new Se.PropertyCollection,r.properties.setProperty(Se.PropertyId.PronunciationAssessment_Json,e),r}toJSON(){return this.updateJson(),this.privProperties.getProperty(Se.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();let r=e.internalData;r.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,r.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(Se.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,r.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(Se.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){df.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(Se.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){df.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){let r=e?"true":"false";this.properties.setProperty(Se.PropertyId.PronunciationAssessment_EnableMiscue,r)}get enableMiscue(){return this.properties.getProperty(Se.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){let e=this.privProperties.getProperty(Se.PropertyId.PronunciationAssessment_Json,"{}"),r=JSON.parse(e),n=this.privProperties.getProperty(Se.PropertyId.PronunciationAssessment_ReferenceText);n&&(r.referenceText=n);let i=this.privProperties.getProperty(Se.PropertyId.PronunciationAssessment_GradingSystem);i&&(r.gradingSystem=i);let s=this.privProperties.getProperty(Se.PropertyId.PronunciationAssessment_Granularity);s&&(r.granularity=s),this.privPhonemeAlphabet&&(r.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(r.nbestPhonemeCount=this.privNBestPhonemeCount),r.enableProsodyAssessment=this.privEnableProsodyAssessment,r.dimension="Comprehensive",this.privProperties.getProperty(Se.PropertyId.PronunciationAssessment_EnableMiscue)&&(r.enableMiscue=this.enableMiscue),this.privProperties.setProperty(Se.PropertyId.PronunciationAssessment_Params,JSON.stringify(r))}};hf.PronunciationAssessmentConfig=iw});var Vb=p(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.PronunciationAssessmentResult=ta.ContentAssessmentResult=void 0;var sw=q(),s4=w(),ff=class{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}};ta.ContentAssessmentResult=ff;var ow=class t{constructor(e){let r=JSON.parse(e);sw.Contracts.throwIfNullOrUndefined(r.NBest[0],"NBest"),this.privPronJson=r.NBest[0]}static fromResult(e){sw.Contracts.throwIfNullOrUndefined(e,"result");let r=e.properties.getProperty(s4.PropertyId.SpeechServiceResponse_JsonResult);return sw.Contracts.throwIfNullOrUndefined(r,"json"),new t(r)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new ff(this.detailResult)}};ta.PronunciationAssessmentResult=ow});var Wb=p(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.AvatarConfig=void 0;var o4=q(),a4=w(),aw=class{constructor(e,r,n){this.privCustomized=!1,this.privUseBuiltInVoice=!1,o4.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=r,n===void 0&&(n=new a4.AvatarVideoFormat),this.videoFormat=n}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(e){this.privUseBuiltInVoice=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(e){this.privBackgroundImage=e}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(e){this.privRemoteIceServers=e}};vf.AvatarConfig=aw});var Hb=p(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.AvatarEventArgs=bs.AvatarEventTypes=void 0;var c4;(function(t){t.SwitchedToSpeaking="SwitchedToSpeaking",t.SwitchedToIdle="SwitchedToIdle",t.SessionClosed="SessionClosed"})(c4=bs.AvatarEventTypes||(bs.AvatarEventTypes={}));var cw=class{constructor(e,r){this.privOffset=e,this.privDescription=r}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}};bs.AvatarEventArgs=cw});var lw=p(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.SpeechSynthesisConnectionFactory=void 0;var $b=je(),du=w(),Kb=fr(),u4=O(),l4=ht(),gf=jn(),uw=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(e,r,n){let i=e.parameters.getProperty(du.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(du.PropertyId.SpeechServiceConnection_Region,void 0),o=Kb.ConnectionFactoryBase.getHostSuffix(s),a=e.parameters.getProperty(du.PropertyId.SpeechServiceConnection_EndpointId,void 0),c=a===void 0?"tts":"voice",u=e.parameters.getProperty(du.PropertyId.SpeechServiceConnection_Host,"wss://"+s+"."+c+".speech"+o),l={},d={};if(r.token!==void 0&&r.token!==""&&(d[r.headerName]=r.token),d[l4.HeaderNames.ConnectionId]=n,a!==void 0&&a!==""&&(!i||i.search(gf.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(l[gf.QueryParameterNames.CustomVoiceDeploymentId]=a),e.avatarEnabled&&(!i||i.search(gf.QueryParameterNames.EnableAvatar)===-1)&&(l[gf.QueryParameterNames.EnableAvatar]="true"),i){let y=new URL(i),C=y.pathname;(C===""||C==="/")&&(y.pathname=this.synthesisUri,i=await Kb.ConnectionFactoryBase.getRedirectUrlFromEndpoint(y.toString()))}i||(i=u+this.synthesisUri),e.parameters.setProperty(du.PropertyId.SpeechServiceConnection_Url,i);let f=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new $b.WebsocketConnection(i,l,d,new u4.WebsocketMessageFormatter,$b.ProxyInfo.fromParameters(e.parameters),f,n)}};mf.SpeechSynthesisConnectionFactory=uw});var Jb=p(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.AvatarSynthesizer=void 0;var p4=lw(),d4=O(),_e=D(),h4=zo(),qn=w(),yf=q(),f4=Yh(),pw=class extends qn.Synthesizer{constructor(e,r){super(e),yf.Contracts.throwIfNullOrUndefined(r,"avatarConfig"),this.privConnectionFactory=new p4.SpeechSynthesisConnectionFactory,this.privAvatarConfig=r,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=h4.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(qn.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(e){yf.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,yf.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");let r=new _e.Deferred;e.onicegatheringstatechange=()=>{_e.Events.instance.onEvent(new _e.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,_e.EventType.Debug)),e.iceGatheringState==="complete"&&(_e.Events.instance.onEvent(new _e.PlatformEvent("peer connection: ice gathering complete.",_e.EventType.Info)),r.resolve())},e.onicecandidate=a=>{a.candidate?_e.Events.instance.onEvent(new _e.PlatformEvent("peer connection: ice candidate: "+a.candidate.candidate,_e.EventType.Debug)):(_e.Events.instance.onEvent(new _e.PlatformEvent("peer connection: ice candidate: complete",_e.EventType.Debug)),r.resolve())},setTimeout(()=>{e.iceGatheringState!=="complete"&&(_e.Events.instance.onEvent(new _e.PlatformEvent("peer connection: ice gathering timeout.",_e.EventType.Warning)),r.resolve())},2e3);let n=await e.createOffer();await e.setLocalDescription(n),await r.promise,_e.Events.instance.onEvent(new _e.PlatformEvent("peer connection: got local SDP.",_e.EventType.Info)),this.privProperties.setProperty(qn.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));let i=await this.speak("",!1);if(i.reason!==qn.ResultReason.SynthesizingAudioCompleted)return new qn.SynthesisResult(i.resultId,i.reason,i.errorDetails,i.properties);let s=atob(i.properties.getProperty(qn.PropertyId.TalkingAvatarService_WebRTC_SDP)),o=new RTCSessionDescription(JSON.parse(s));return await e.setRemoteDescription(o),new qn.SynthesisResult(i.resultId,i.reason,void 0,i.properties)}async speakTextAsync(e){let r=await this.speak(e,!1);return new qn.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties)}async speakSsmlAsync(e){let r=await this.speak(e,!0);return new qn.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return yf.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,r,n){return new d4.AvatarSynthesisAdapter(e,r,n,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,r){}createSynthesizerConfig(e){let r=super.createSynthesizerConfig(e);return r.avatarEnabled=!0,r}async speak(e,r){let n=(0,_e.createNoDashGuid)(),i=new _e.Deferred;return this.synthesisRequestQueue.enqueue(new f4.SynthesisRequest(n,e,r,s=>{i.resolve(s),this.privSynthesizing=!1,this.adapterSpeak()},s=>{i.reject(s),this.privSynthesizing=!1})),this.adapterSpeak(),i.promise}};Sf.AvatarSynthesizer=pw});var Gb=p(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.AvatarVideoFormat=ra.Coordinate=void 0;var dw=class{constructor(e,r){this.x=e,this.y=r}};ra.Coordinate=dw;var hw=class{constructor(e="H264",r=2e6,n=1920,i=1080){this.codec=e,this.bitrate=r,this.width=n,this.height=i}setCropRange(e,r){this.cropRange={bottomRight:r,topLeft:e}}};ra.AvatarVideoFormat=hw});var Qb=p(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.AvatarWebRTCConnectionResult=void 0;var v4=w(),fw=class extends v4.SynthesisResult{constructor(e,r,n,i,s){super(r,n,i,s),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}};Cf.AvatarWebRTCConnectionResult=fw});var Xb=p(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.Diagnostics=void 0;var g4=je(),m4=D(),Pf=class{static SetLoggingLevel(e){this.privListener=new g4.ConsoleLoggingListener(e),m4.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if(typeof window>"u")this.privListener&&(this.privListener.logPath=e);else throw new Error("File system logging not available in browser.")}static set onLogOutput(e){this.privListener&&(this.privListener.logCallback=e)}};wf.Diagnostics=Pf;Pf.privListener=void 0});var w=p(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.ConnectionEventArgs=h.CancellationErrorCode=h.CancellationDetails=h.CancellationDetailsBase=h.IntentRecognitionCanceledEventArgs=h.TranslationRecognitionCanceledEventArgs=h.NoMatchDetails=h.NoMatchReason=h.Translations=h.TranslationRecognizer=h.VoiceProfileType=h.IntentRecognizer=h.SpeechRecognizer=h.Recognizer=h.PropertyId=h.PropertyCollection=h.SpeechTranslationConfigImpl=h.SpeechTranslationConfig=h.SpeechConfigImpl=h.SpeechConfig=h.ResultReason=h.TranslationSynthesisResult=h.TranslationRecognitionResult=h.TranslationSynthesisEventArgs=h.TranslationRecognitionEventArgs=h.SpeechRecognitionCanceledEventArgs=h.MeetingTranscriptionEventArgs=h.ConversationTranscriptionEventArgs=h.SpeechRecognitionEventArgs=h.LanguageUnderstandingModel=h.IntentRecognitionResult=h.SpeechRecognitionResult=h.RecognitionResult=h.IntentRecognitionEventArgs=h.OutputFormat=h.RecognitionEventArgs=h.SessionEventArgs=h.KeywordRecognitionModel=h.PushAudioOutputStreamCallback=h.PullAudioInputStreamCallback=h.CancellationReason=h.PushAudioOutputStream=h.PullAudioOutputStream=h.AudioOutputStream=h.PushAudioInputStream=h.PullAudioInputStream=h.AudioInputStream=h.AudioFormatTag=h.AudioStreamFormat=h.AudioConfig=void 0;h.SpeechSynthesisEventArgs=h.SpeechSynthesisResult=h.SynthesisResult=h.SpeechSynthesizer=h.SpeechSynthesisOutputFormat=h.Synthesizer=h.User=h.ParticipantChangedReason=h.Participant=h.MeetingTranscriber=h.Meeting=h.ConversationTranscriptionResult=h.ConversationTranscriber=h.ConversationTranslator=h.ConversationTranslationResult=h.ConversationTranslationEventArgs=h.ConversationTranslationCanceledEventArgs=h.ConversationParticipantsChangedEventArgs=h.ConversationExpirationEventArgs=h.Conversation=h.SpeakerRecognitionCancellationDetails=h.SpeakerRecognitionResultType=h.SpeakerRecognitionResult=h.SourceLanguageConfig=h.AutoDetectSourceLanguageResult=h.AutoDetectSourceLanguageConfig=h.SpeakerVerificationModel=h.SpeakerIdentificationModel=h.SpeakerRecognizer=h.VoiceProfileClient=h.VoiceProfilePhraseResult=h.VoiceProfileCancellationDetails=h.VoiceProfileResult=h.VoiceProfileEnrollmentCancellationDetails=h.VoiceProfileEnrollmentResult=h.VoiceProfile=h.ConnectionMessage=h.ConnectionMessageEventArgs=h.BaseAudioPlayer=h.ProfanityOption=h.ServicePropertyChannel=h.TurnStatusReceivedEventArgs=h.ActivityReceivedEventArgs=h.DialogServiceConnector=h.CustomCommandsConfig=h.BotFrameworkConfig=h.DialogServiceConfig=h.PhraseListGrammar=h.Connection=h.ServiceEventArgs=void 0;h.LogLevel=h.Diagnostics=h.AvatarWebRTCConnectionResult=h.Coordinate=h.AvatarVideoFormat=h.AvatarSynthesizer=h.AvatarEventArgs=h.AvatarConfig=h.LanguageIdMode=h.PronunciationAssessmentResult=h.PronunciationAssessmentConfig=h.PronunciationAssessmentGranularity=h.PronunciationAssessmentGradingSystem=h.MeetingTranscriptionCanceledEventArgs=h.ConversationTranscriptionCanceledEventArgs=h.SpeakerAudioDestination=h.VoiceInfo=h.SynthesisVoiceType=h.SynthesisVoiceGender=h.SynthesisVoicesResult=h.SpeechSynthesisBoundaryType=h.SpeechSynthesisVisemeEventArgs=h.SpeechSynthesisBookmarkEventArgs=h.SpeechSynthesisWordBoundaryEventArgs=void 0;var y4=rC();Object.defineProperty(h,"AudioConfig",{enumerable:!0,get:function(){return y4.AudioConfig}});var Yb=Ei();Object.defineProperty(h,"AudioStreamFormat",{enumerable:!0,get:function(){return Yb.AudioStreamFormat}});Object.defineProperty(h,"AudioFormatTag",{enumerable:!0,get:function(){return Yb.AudioFormatTag}});var vw=ZS();Object.defineProperty(h,"AudioInputStream",{enumerable:!0,get:function(){return vw.AudioInputStream}});Object.defineProperty(h,"PullAudioInputStream",{enumerable:!0,get:function(){return vw.PullAudioInputStream}});Object.defineProperty(h,"PushAudioInputStream",{enumerable:!0,get:function(){return vw.PushAudioInputStream}});var gw=Ss();Object.defineProperty(h,"AudioOutputStream",{enumerable:!0,get:function(){return gw.AudioOutputStream}});Object.defineProperty(h,"PullAudioOutputStream",{enumerable:!0,get:function(){return gw.PullAudioOutputStream}});Object.defineProperty(h,"PushAudioOutputStream",{enumerable:!0,get:function(){return gw.PushAudioOutputStream}});var S4=DA();Object.defineProperty(h,"CancellationReason",{enumerable:!0,get:function(){return S4.CancellationReason}});var C4=NA();Object.defineProperty(h,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return C4.PullAudioInputStreamCallback}});var P4=zA();Object.defineProperty(h,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return P4.PushAudioOutputStreamCallback}});var w4=LA();Object.defineProperty(h,"KeywordRecognitionModel",{enumerable:!0,get:function(){return w4.KeywordRecognitionModel}});var R4=qA();Object.defineProperty(h,"SessionEventArgs",{enumerable:!0,get:function(){return R4.SessionEventArgs}});var E4=BA();Object.defineProperty(h,"RecognitionEventArgs",{enumerable:!0,get:function(){return E4.RecognitionEventArgs}});var _4=FA();Object.defineProperty(h,"OutputFormat",{enumerable:!0,get:function(){return _4.OutputFormat}});var I4=UA();Object.defineProperty(h,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return I4.IntentRecognitionEventArgs}});var T4=VA();Object.defineProperty(h,"RecognitionResult",{enumerable:!0,get:function(){return T4.RecognitionResult}});var A4=WA();Object.defineProperty(h,"SpeechRecognitionResult",{enumerable:!0,get:function(){return A4.SpeechRecognitionResult}});var k4=HA();Object.defineProperty(h,"IntentRecognitionResult",{enumerable:!0,get:function(){return k4.IntentRecognitionResult}});var b4=$A();Object.defineProperty(h,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return b4.LanguageUnderstandingModel}});var mw=JA();Object.defineProperty(h,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return mw.SpeechRecognitionEventArgs}});Object.defineProperty(h,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return mw.ConversationTranscriptionEventArgs}});Object.defineProperty(h,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return mw.MeetingTranscriptionEventArgs}});var O4=GA();Object.defineProperty(h,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return O4.SpeechRecognitionCanceledEventArgs}});var x4=QA();Object.defineProperty(h,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return x4.TranslationRecognitionEventArgs}});var M4=XA();Object.defineProperty(h,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return M4.TranslationSynthesisEventArgs}});var D4=SC();Object.defineProperty(h,"TranslationRecognitionResult",{enumerable:!0,get:function(){return D4.TranslationRecognitionResult}});var N4=YA();Object.defineProperty(h,"TranslationSynthesisResult",{enumerable:!0,get:function(){return N4.TranslationSynthesisResult}});var z4=ZA();Object.defineProperty(h,"ResultReason",{enumerable:!0,get:function(){return z4.ResultReason}});var Zb=ek();Object.defineProperty(h,"SpeechConfig",{enumerable:!0,get:function(){return Zb.SpeechConfig}});Object.defineProperty(h,"SpeechConfigImpl",{enumerable:!0,get:function(){return Zb.SpeechConfigImpl}});var eO=tk();Object.defineProperty(h,"SpeechTranslationConfig",{enumerable:!0,get:function(){return eO.SpeechTranslationConfig}});Object.defineProperty(h,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return eO.SpeechTranslationConfigImpl}});var j4=wC();Object.defineProperty(h,"PropertyCollection",{enumerable:!0,get:function(){return j4.PropertyCollection}});var L4=zd();Object.defineProperty(h,"PropertyId",{enumerable:!0,get:function(){return L4.PropertyId}});var q4=ik();Object.defineProperty(h,"Recognizer",{enumerable:!0,get:function(){return q4.Recognizer}});var B4=sk();Object.defineProperty(h,"SpeechRecognizer",{enumerable:!0,get:function(){return B4.SpeechRecognizer}});var F4=ak();Object.defineProperty(h,"IntentRecognizer",{enumerable:!0,get:function(){return F4.IntentRecognizer}});var U4=ck();Object.defineProperty(h,"VoiceProfileType",{enumerable:!0,get:function(){return U4.VoiceProfileType}});var V4=hk();Object.defineProperty(h,"TranslationRecognizer",{enumerable:!0,get:function(){return V4.TranslationRecognizer}});var W4=fk();Object.defineProperty(h,"Translations",{enumerable:!0,get:function(){return W4.Translations}});var H4=vk();Object.defineProperty(h,"NoMatchReason",{enumerable:!0,get:function(){return H4.NoMatchReason}});var $4=gk();Object.defineProperty(h,"NoMatchDetails",{enumerable:!0,get:function(){return $4.NoMatchDetails}});var K4=mk();Object.defineProperty(h,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return K4.TranslationRecognitionCanceledEventArgs}});var J4=yk();Object.defineProperty(h,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return J4.IntentRecognitionCanceledEventArgs}});var G4=FC();Object.defineProperty(h,"CancellationDetailsBase",{enumerable:!0,get:function(){return G4.CancellationDetailsBase}});var Q4=Sk();Object.defineProperty(h,"CancellationDetails",{enumerable:!0,get:function(){return Q4.CancellationDetails}});var X4=Ck();Object.defineProperty(h,"CancellationErrorCode",{enumerable:!0,get:function(){return X4.CancellationErrorCode}});var Y4=Pk();Object.defineProperty(h,"ConnectionEventArgs",{enumerable:!0,get:function(){return Y4.ConnectionEventArgs}});var Z4=wk();Object.defineProperty(h,"ServiceEventArgs",{enumerable:!0,get:function(){return Z4.ServiceEventArgs}});var eB=MC();Object.defineProperty(h,"Connection",{enumerable:!0,get:function(){return eB.Connection}});var tB=Rk();Object.defineProperty(h,"PhraseListGrammar",{enumerable:!0,get:function(){return tB.PhraseListGrammar}});var rB=oh();Object.defineProperty(h,"DialogServiceConfig",{enumerable:!0,get:function(){return rB.DialogServiceConfig}});var nB=Ek();Object.defineProperty(h,"BotFrameworkConfig",{enumerable:!0,get:function(){return nB.BotFrameworkConfig}});var iB=_k();Object.defineProperty(h,"CustomCommandsConfig",{enumerable:!0,get:function(){return iB.CustomCommandsConfig}});var sB=Ok();Object.defineProperty(h,"DialogServiceConnector",{enumerable:!0,get:function(){return sB.DialogServiceConnector}});var oB=xk();Object.defineProperty(h,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return oB.ActivityReceivedEventArgs}});var aB=Dk();Object.defineProperty(h,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return aB.TurnStatusReceivedEventArgs}});var cB=Nk();Object.defineProperty(h,"ServicePropertyChannel",{enumerable:!0,get:function(){return cB.ServicePropertyChannel}});var uB=zk();Object.defineProperty(h,"ProfanityOption",{enumerable:!0,get:function(){return uB.ProfanityOption}});var lB=jk();Object.defineProperty(h,"BaseAudioPlayer",{enumerable:!0,get:function(){return lB.BaseAudioPlayer}});var pB=Lk();Object.defineProperty(h,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return pB.ConnectionMessageEventArgs}});var dB=kC();Object.defineProperty(h,"ConnectionMessage",{enumerable:!0,get:function(){return dB.ConnectionMessage}});var hB=qk();Object.defineProperty(h,"VoiceProfile",{enumerable:!0,get:function(){return hB.VoiceProfile}});var tO=Fk();Object.defineProperty(h,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return tO.VoiceProfileEnrollmentResult}});Object.defineProperty(h,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return tO.VoiceProfileEnrollmentCancellationDetails}});var rO=Vk();Object.defineProperty(h,"VoiceProfileResult",{enumerable:!0,get:function(){return rO.VoiceProfileResult}});Object.defineProperty(h,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return rO.VoiceProfileCancellationDetails}});var fB=Wk();Object.defineProperty(h,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return fB.VoiceProfilePhraseResult}});var vB=Hk();Object.defineProperty(h,"VoiceProfileClient",{enumerable:!0,get:function(){return vB.VoiceProfileClient}});var gB=$k();Object.defineProperty(h,"SpeakerRecognizer",{enumerable:!0,get:function(){return gB.SpeakerRecognizer}});var mB=Kk();Object.defineProperty(h,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return mB.SpeakerIdentificationModel}});var yB=Gk();Object.defineProperty(h,"SpeakerVerificationModel",{enumerable:!0,get:function(){return yB.SpeakerVerificationModel}});var SB=Xk();Object.defineProperty(h,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return SB.AutoDetectSourceLanguageConfig}});var CB=Zk();Object.defineProperty(h,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return CB.AutoDetectSourceLanguageResult}});var PB=eb();Object.defineProperty(h,"SourceLanguageConfig",{enumerable:!0,get:function(){return PB.SourceLanguageConfig}});var yw=rb();Object.defineProperty(h,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return yw.SpeakerRecognitionResult}});Object.defineProperty(h,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return yw.SpeakerRecognitionResultType}});Object.defineProperty(h,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return yw.SpeakerRecognitionCancellationDetails}});var Lt=Wh();Object.defineProperty(h,"Conversation",{enumerable:!0,get:function(){return Lt.Conversation}});Object.defineProperty(h,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Lt.ConversationExpirationEventArgs}});Object.defineProperty(h,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Lt.ConversationParticipantsChangedEventArgs}});Object.defineProperty(h,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Lt.ConversationTranslationCanceledEventArgs}});Object.defineProperty(h,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Lt.ConversationTranslationEventArgs}});Object.defineProperty(h,"ConversationTranslationResult",{enumerable:!0,get:function(){return Lt.ConversationTranslationResult}});Object.defineProperty(h,"ConversationTranslator",{enumerable:!0,get:function(){return Lt.ConversationTranslator}});Object.defineProperty(h,"ConversationTranscriber",{enumerable:!0,get:function(){return Lt.ConversationTranscriber}});Object.defineProperty(h,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Lt.ConversationTranscriptionResult}});Object.defineProperty(h,"Meeting",{enumerable:!0,get:function(){return Lt.Meeting}});Object.defineProperty(h,"MeetingTranscriber",{enumerable:!0,get:function(){return Lt.MeetingTranscriber}});Object.defineProperty(h,"Participant",{enumerable:!0,get:function(){return Lt.Participant}});Object.defineProperty(h,"ParticipantChangedReason",{enumerable:!0,get:function(){return Lt.ParticipantChangedReason}});Object.defineProperty(h,"User",{enumerable:!0,get:function(){return Lt.User}});var wB=Yh();Object.defineProperty(h,"Synthesizer",{enumerable:!0,get:function(){return wB.Synthesizer}});var RB=eC();Object.defineProperty(h,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return RB.SpeechSynthesisOutputFormat}});var EB=Ib();Object.defineProperty(h,"SpeechSynthesizer",{enumerable:!0,get:function(){return EB.SpeechSynthesizer}});var _B=Tb();Object.defineProperty(h,"SynthesisResult",{enumerable:!0,get:function(){return _B.SynthesisResult}});var IB=Ab();Object.defineProperty(h,"SpeechSynthesisResult",{enumerable:!0,get:function(){return IB.SpeechSynthesisResult}});var TB=kb();Object.defineProperty(h,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return TB.SpeechSynthesisEventArgs}});var AB=bb();Object.defineProperty(h,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return AB.SpeechSynthesisWordBoundaryEventArgs}});var kB=Ob();Object.defineProperty(h,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return kB.SpeechSynthesisBookmarkEventArgs}});var bB=xb();Object.defineProperty(h,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return bB.SpeechSynthesisVisemeEventArgs}});var OB=Mb();Object.defineProperty(h,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return OB.SpeechSynthesisBoundaryType}});var xB=Db();Object.defineProperty(h,"SynthesisVoicesResult",{enumerable:!0,get:function(){return xB.SynthesisVoicesResult}});var Sw=Nb();Object.defineProperty(h,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Sw.SynthesisVoiceGender}});Object.defineProperty(h,"SynthesisVoiceType",{enumerable:!0,get:function(){return Sw.SynthesisVoiceType}});Object.defineProperty(h,"VoiceInfo",{enumerable:!0,get:function(){return Sw.VoiceInfo}});var MB=jb();Object.defineProperty(h,"SpeakerAudioDestination",{enumerable:!0,get:function(){return MB.SpeakerAudioDestination}});var DB=Lb();Object.defineProperty(h,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return DB.ConversationTranscriptionCanceledEventArgs}});var NB=qb();Object.defineProperty(h,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return NB.MeetingTranscriptionCanceledEventArgs}});var zB=Bb();Object.defineProperty(h,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return zB.PronunciationAssessmentGradingSystem}});var jB=Fb();Object.defineProperty(h,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return jB.PronunciationAssessmentGranularity}});var LB=Ub();Object.defineProperty(h,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return LB.PronunciationAssessmentConfig}});var qB=Vb();Object.defineProperty(h,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return qB.PronunciationAssessmentResult}});var BB=vP();Object.defineProperty(h,"LanguageIdMode",{enumerable:!0,get:function(){return BB.LanguageIdMode}});var FB=Wb();Object.defineProperty(h,"AvatarConfig",{enumerable:!0,get:function(){return FB.AvatarConfig}});var UB=Hb();Object.defineProperty(h,"AvatarEventArgs",{enumerable:!0,get:function(){return UB.AvatarEventArgs}});var VB=Jb();Object.defineProperty(h,"AvatarSynthesizer",{enumerable:!0,get:function(){return VB.AvatarSynthesizer}});var nO=Gb();Object.defineProperty(h,"AvatarVideoFormat",{enumerable:!0,get:function(){return nO.AvatarVideoFormat}});Object.defineProperty(h,"Coordinate",{enumerable:!0,get:function(){return nO.Coordinate}});var WB=Qb();Object.defineProperty(h,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return WB.AvatarWebRTCConnectionResult}});var HB=Xb();Object.defineProperty(h,"Diagnostics",{enumerable:!0,get:function(){return HB.Diagnostics}});var $B=qS();Object.defineProperty(h,"LogLevel",{enumerable:!0,get:function(){return $B.LogLevel}})});var iO=p(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.ProxyInfo=void 0;var Rf=w(),Cw=class t{constructor(e,r,n,i){this.privProxyHostName=e,this.privProxyPort=r,this.privProxyUserName=n,this.privProxyPassword=i}static fromParameters(e){return new t(e.getProperty(Rf.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(Rf.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(Rf.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(Rf.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};Ef.ProxyInfo=Cw});var oO=p((aH,sO)=>{"use strict";var KB=new Set(["json","buffer","string"]);sO.exports=t=>(...e)=>{let r=new Set,n,i,s,o="";return e.forEach(a=>{if(typeof a=="string")if(a.toUpperCase()===a)if(n){let c=`Can't set method to ${a}, already set to ${n}.`;throw new Error(c)}else n=a;else if(a.startsWith("http:")||a.startsWith("https:"))o=a;else if(KB.has(a))i=a;else throw new Error(`Unknown encoding, ${a}`);else if(typeof a=="number")r.add(a);else if(typeof a=="object")if(Array.isArray(a)||a instanceof Set)a.forEach(c=>r.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=a}else throw new Error(`Unknown type: ${typeof a}`)}),n||(n="GET"),r.size===0&&r.add(200),t(r,n,i,s,o)}});var cO=p((cH,aO)=>{"use strict";var JB=oO(),Pw=class t extends Error{constructor(e,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(let[s,o]of e.headers.entries())this.headers[s.toLowerCase()]=o}},GB=(t,e,r,n,i)=>async(s,o,a={})=>{s=i+(s||"");let c=new URL(s);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(o&&!(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="string"))if(typeof o=="object")o=JSON.stringify(o),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");a=new Headers({...n||{},...a});let u=await fetch(c,{method:e,headers:a,body:o});if(u.statusCode=u.status,!t.has(u.status))throw new Pw(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};aO.exports=JB(GB)});var lO=p(Bn=>{"use strict";var QB=Bn&&Bn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.RestMessageAdapter=Bn.RestRequestType=void 0;var XB=QB(cO()),uO=D(),_f;(function(t){t.Get="GET",t.Post="POST",t.Delete="DELETE",t.File="file"})(_f=Bn.RestRequestType||(Bn.RestRequestType={}));var ww=class{constructor(e){if(!e)throw new uO.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,r){let n="";try{let i=r.trim().split(/[\r\n]+/),s={};i.forEach(o=>{let a=o.split(": "),c=a.shift().toLowerCase(),u=a.join(": ");s[c]=u}),n=s[e.toLowerCase()]}catch{}return n}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,r){this.privHeaders[e]=r}request(e,r,n={},i=null){let s=new uO.Deferred,o=e===_f.File?"POST":e,a=(u,l={})=>{let d=u;return{data:JSON.stringify(l),headers:JSON.stringify(u.headers),json:l,ok:u.statusCode>=200&&u.statusCode<300,status:u.statusCode,statusText:l.error?l.error.message:d.statusText?d.statusText:d.statusMessage}},c=u=>{let l=(0,XB.default)(r,o,this.privHeaders,200,201,202,204,400,401,402,403,404),d=this.queryParams(n)===""?"":`?${this.queryParams(n)}`;l(d,u).then(async f=>{if(e===_f.Delete||f.statusCode===204)s.resolve(a(f));else try{let y=await f.json();s.resolve(a(f,y))}catch{s.resolve(a(f))}}).catch(f=>{s.reject(f)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===_f.Post&&i&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),c(i),s.promise}queryParams(e={}){return Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(e[r])).join("&")}};Bn.RestMessageAdapter=ww});var Rw=p(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.RestConfigBase=void 0;var na=class t{static get requestOptions(){return t.privDefaultRequestOptions}static get configParams(){return t.privDefaultParams}static get restErrors(){return t.privRestErrors}};If.RestConfigBase=na;na.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};na.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};na.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}});var je=p(tt=>{"use strict";var YB=tt&&tt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qr=tt&&tt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&YB(e,t,r)};Object.defineProperty(tt,"__esModule",{value:!0});qr(gA(),tt);qr(yA(),tt);qr(PA(),tt);qr(RA(),tt);qr(EA(),tt);qr(OA(),tt);qr(HS(),tt);qr(xA(),tt);qr(iO(),tt);qr(lO(),tt);qr(Rw(),tt)});var hO=p(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.IntentConnectionFactory=void 0;var pO=je(),hu=w(),dO=fr(),ZB=O(),eF=ht(),Ew=class extends dO.ConnectionFactoryBase{create(e,r,n){let i=e.parameters.getProperty(hu.PropertyId.SpeechServiceConnection_Endpoint);if(!i){let c=e.parameters.getProperty(hu.PropertyId.SpeechServiceConnection_IntentRegion),u=dO.ConnectionFactoryBase.getHostSuffix(c);i=e.parameters.getProperty(hu.PropertyId.SpeechServiceConnection_Host,"wss://"+c+".sr.speech"+u)+"/speech/recognition/interactive/cognitiveservices/v1"}let s={format:"simple",language:e.parameters.getProperty(hu.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,s,i);let o={};r.token!==void 0&&r.token!==""&&(o[r.headerName]=r.token),o[eF.HeaderNames.ConnectionId]=n,e.parameters.setProperty(hu.PropertyId.SpeechServiceConnection_Url,i);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new pO.WebsocketConnection(i,s,o,new ZB.WebsocketMessageFormatter,pO.ProxyInfo.fromRecognizerConfig(e),a,n))}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}};Tf.IntentConnectionFactory=Ew});var mO=p(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.VoiceProfileConnectionFactory=ia.SpeakerRecognitionConnectionFactory=void 0;var fO=je(),Os=w(),vO=fr(),tF=O(),gO=ht(),Af=class extends vO.ConnectionFactoryBase{create(e,r,n,i){let s=e.parameters.getProperty(Os.PropertyId.SpeechServiceConnection_Endpoint);if(!s){let u=e.parameters.getProperty(Os.PropertyId.SpeechServiceConnection_Region),l=vO.ConnectionFactoryBase.getHostSuffix(u),d=e.parameters.getProperty(Os.PropertyId.SpeechServiceConnection_Host,`wss://${u}.spr-frontend.speech${l}`),f=e.parameters.getProperty(Os.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");s=`${d}/speaker/ws/${this.scenarioToPath(f)}/${n}`}let o={format:"simple",language:e.parameters.getProperty(Os.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,o,s);let a={};r.token!==void 0&&r.token!==""&&(a[r.headerName]=r.token),a[gO.HeaderNames.ConnectionId]=i,a[gO.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(Os.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(Os.PropertyId.SpeechServiceConnection_Url,s);let c=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new fO.WebsocketConnection(s,o,a,new tF.WebsocketMessageFormatter,fO.ProxyInfo.fromRecognizerConfig(e),c,i))}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}},_w=class extends Af{create(e,r,n){return super.create(e,r,"recognition",n)}};ia.SpeakerRecognitionConnectionFactory=_w;var Iw=class extends Af{create(e,r,n){return super.create(e,r,"profile",n)}};ia.VoiceProfileConnectionFactory=Iw});var bf=p(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.RecognitionEndedEvent=rt.RecognitionCompletionStatus=rt.RecognitionStartedEvent=rt.ConnectingToServiceEvent=rt.ListeningStartedEvent=rt.RecognitionTriggeredEvent=rt.SpeechRecognitionEvent=void 0;var kf=D(),Ni=class extends kf.PlatformEvent{constructor(e,r,n,i=kf.EventType.Info){super(e,i),this.privRequestId=r,this.privSessionId=n}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}};rt.SpeechRecognitionEvent=Ni;var Tw=class extends Ni{constructor(e,r,n,i){super("RecognitionTriggeredEvent",e,r),this.privAudioSourceId=n,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};rt.RecognitionTriggeredEvent=Tw;var Aw=class extends Ni{constructor(e,r,n,i){super("ListeningStartedEvent",e,r),this.privAudioSourceId=n,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};rt.ListeningStartedEvent=Aw;var kw=class extends Ni{constructor(e,r,n){super("ConnectingToServiceEvent",e,n),this.privAuthFetchEventid=r}get authFetchEventid(){return this.privAuthFetchEventid}};rt.ConnectingToServiceEvent=kw;var bw=class extends Ni{constructor(e,r,n,i,s){super("RecognitionStartedEvent",e,s),this.privAudioSourceId=r,this.privAudioNodeId=n,this.privAuthFetchEventId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}};rt.RecognitionStartedEvent=bw;var yO;(function(t){t[t.Success=0]="Success",t[t.AudioSourceError=1]="AudioSourceError",t[t.AudioSourceTimeout=2]="AudioSourceTimeout",t[t.AuthTokenFetchError=3]="AuthTokenFetchError",t[t.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",t[t.UnAuthorized=5]="UnAuthorized",t[t.ConnectTimeout=6]="ConnectTimeout",t[t.ConnectError=7]="ConnectError",t[t.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",t[t.UnknownError=9]="UnknownError"})(yO=rt.RecognitionCompletionStatus||(rt.RecognitionCompletionStatus={}));var Ow=class extends Ni{constructor(e,r,n,i,s,o,a,c){super("RecognitionEndedEvent",e,s,a===yO.Success?kf.EventType.Info:kf.EventType.Error),this.privAudioSourceId=r,this.privAudioNodeId=n,this.privAuthFetchEventId=i,this.privStatus=a,this.privError=c,this.privServiceTag=o}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}};rt.RecognitionEndedEvent=Ow});var xs=p(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.SpeechConnectionMessage=void 0;var xw=D(),Fn=ht(),Mw=class t extends xw.ConnectionMessage{constructor(e,r,n,i,s,o,a,c){if(!r)throw new xw.ArgumentNullError("path");if(!n)throw new xw.ArgumentNullError("requestId");let u={};if(u[Fn.HeaderNames.Path]=r,u[Fn.HeaderNames.RequestId]=n,u[Fn.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Fn.HeaderNames.ContentType]=i),o&&(u[Fn.HeaderNames.RequestStreamId]=o),a)for(let l in a)l&&(u[l]=a[l]);c?super(e,s,u,c):super(e,s,u),this.privPath=r,this.privRequestId=n,this.privContentType=i,this.privStreamId=o,this.privAdditionalHeaders=a}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let r=null,n=null,i=null,s=null,o={};if(e.headers)for(let a in e.headers)a&&(a.toLowerCase()===Fn.HeaderNames.Path.toLowerCase()?r=e.headers[a]:a.toLowerCase()===Fn.HeaderNames.RequestId.toLowerCase()?n=e.headers[a]:a.toLowerCase()===Fn.HeaderNames.ContentType.toLowerCase()?i=e.headers[a]:a.toLowerCase()===Fn.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[a]:o[a]=e.headers[a]);return new t(e.messageType,r,n,i,e.body,s,o,e.id)}};Of.SpeechConnectionMessage=Mw});var SO=p(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.SegmentationMode=void 0;var rF;(function(t){t.Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"})(rF=fu.SegmentationMode||(fu.SegmentationMode={}))});var CO=p(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.NextAction=void 0;var nF;(function(t){t.None="None",t.Synthesize="Synthesize"})(nF=vu.NextAction||(vu.NextAction={}))});var PO=p(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.Mode=void 0;var iF;(function(t){t.None="None",t.Always="Always"})(iF=gu.Mode||(gu.Mode={}))});var wO=p(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.LanguageIdDetectionPriority=zi.LanguageIdDetectionMode=void 0;var sF;(function(t){t.DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments"})(sF=zi.LanguageIdDetectionMode||(zi.LanguageIdDetectionMode={}));var oF;(function(t){t.Auto="Auto",t.PrioritizeLatency="PrioritizeLatency",t.PrioritizeAccuracy="PrioritizeAccuracy"})(oF=zi.LanguageIdDetectionPriority||(zi.LanguageIdDetectionPriority={}))});var RO=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.NextAction=void 0;var aF;(function(t){t.Recognize="Recognize",t.None="None"})(aF=mu.NextAction||(mu.NextAction={}))});var EO=p(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.OnUnknownAction=void 0;var cF;(function(t){t.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"})(cF=yu.OnUnknownAction||(yu.OnUnknownAction={}))});var _O=p(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.ResultType=void 0;var uF;(function(t){t.Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"})(uF=Su.ResultType||(Su.ResultType={}))});var IO=p(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.PhraseResultOutputType=void 0;var lF;(function(t){t.Always="Always",t.None="None"})(lF=Cu.PhraseResultOutputType||(Cu.PhraseResultOutputType={}))});var TO=p(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.NextAction=void 0;var pF;(function(t){t.None="None",t.Translate="Translate"})(pF=Pu.NextAction||(Pu.NextAction={}))});var bO=p(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.ServiceRecognizerBase=void 0;var dF=je(),Ie=D(),Q=w(),Un=O(),ji=xs(),sa=SO(),Dw=Gt(),xf=CO(),hF=PO(),Nw=wO(),fF=RO(),vF=EO(),AO=_O(),kO=IO(),Mf=TO(),Df=class t{constructor(e,r,n,i,s){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new Ie.ArgumentNullError("authentication");if(!r)throw new Ie.ArgumentNullError("connectionFactory");if(!n)throw new Ie.ArgumentNullError("audioSource");if(!i)throw new Ie.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=i.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=r,this.privAudioSource=n,this.privRecognizerConfig=i,this.privIsDisposed=!1,this.privRecognizer=s,this.privRequestSession=new Un.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new Ie.EventSource,this.privServiceEvents=new Ie.EventSource,this.privDynamicGrammar=new Un.DynamicGrammarBuilder,this.privSpeechContext=new Un.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new Un.AgentConfig,this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=Ie.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(a=>{if(a.name==="ConnectionClosedEvent"){let c=a;(c.statusCode===1003||c.statusCode===1007||c.statusCode===1002||c.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(Q.CancellationReason.Error,c.statusCode===1007?Q.CancellationErrorCode.BadRequestParameters:Q.CancellationErrorCode.ConnectionFailure,`${c.reason} websocket error code: ${c.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,Ie.createNoDashGuid)())}setTranslationJson(){let e=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(e!==void 0){let r=e.split(","),n=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),s=n!==void 0?xf.NextAction.Synthesize:xf.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:s},onSuccess:{action:s},output:{includePassThroughResults:!0,interimResults:{mode:hF.Mode.Always}},targetLanguages:r},i!==void 0&&(this.privSpeechContext.getContext().translation.category=i),n!==void 0){let a={};for(let c of r)a[c]=n;this.privSpeechContext.getContext().synthesis={defaultVoices:a}}let o=this.privSpeechContext.getContext().phraseDetection||{};o.onSuccess={action:Mf.NextAction.Translate},o.onInterim={action:Mf.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=o}}setSpeechSegmentationTimeoutJson(){let e=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),r=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),n=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.Speech_SegmentationStrategy,void 0),i={mode:sa.SegmentationMode.Normal},s=!1;if(n!==void 0){s=!0;let o=sa.SegmentationMode.Normal;switch(n.toLowerCase()){case"default":break;case"time":o=sa.SegmentationMode.Custom;break;case"semantic":o=sa.SegmentationMode.Semantic;break}i.mode=o}if(e!==void 0){s=!0;let o=parseInt(e,10);i.mode=sa.SegmentationMode.Custom,i.segmentationSilenceTimeoutMs=o}if(r!==void 0){s=!0;let o=parseInt(r,10);i.mode=sa.SegmentationMode.Custom,i.segmentationForcedTimeoutMs=o}if(s){let o=this.privSpeechContext.getContext().phraseDetection||{};switch(o.mode=this.recognitionMode,this.recognitionMode){case Dw.RecognitionMode.Conversation:o.conversation=o.conversation??{segmentation:{}},o.conversation.segmentation=i;break;case Dw.RecognitionMode.Interactive:o.interactive=o.interactive??{segmentation:{}},o.interactive.segmentation=i;break;case Dw.RecognitionMode.Dictation:o.dictation=o.dictation??{},o.dictation.segmentation=i;break}this.privSpeechContext.getContext().phraseDetection=o}}setLanguageIdJson(){let e=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){let r=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");r.length===1&&r[0]===Un.AutoDetectSourceLanguagesOpenRangeOptionName&&(r[0]="UND");let n;this.privRecognizerConfig.languageIdMode==="Continuous"?n=Nw.LanguageIdDetectionMode.DetectContinuous:n=Nw.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:r,mode:n,onSuccess:{action:fF.NextAction.Recognize},onUnknown:{action:vF.OnUnknownAction.None},priority:Nw.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:AO.ResultType.Auto},phraseResults:{resultType:kO.PhraseResultOutputType.Always}};let i=this.privRecognizerConfig.sourceLanguageModels;i!==void 0&&(e.customModels=i,e.onInterim={action:Mf.NextAction.None},e.onSuccess={action:Mf.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=e}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(Un.OutputFormatPropertyName,Q.OutputFormat[Q.OutputFormat.Simple]).toLowerCase()===Q.OutputFormat[Q.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(Q.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(Q.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}async dispose(e){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(e)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(e,r,n){if(this.recognizeOverride!==void 0){await this.recognizeOverride(e,r,n);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.privRecognizerConfig.recognitionEndpointVersion==="2"){let c=this.privSpeechContext.getContext().phraseDetection||{};c.mode=e,this.privSpeechContext.getContext().phraseDetection=c}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=r,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);let i=this.connectImpl(),s;try{let c=await this.audioSource.attach(this.privRequestSession.audioNodeId),u=await this.audioSource.format,l=await this.audioSource.deviceInfo;this.privIsLiveAudio=l.type&&l.type===Un.type.Microphones,s=new dF.ReplayableAudioNode(c,u.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(s,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l}}catch(c){throw await this.privRequestSession.onStopRecognizing(),c}try{await i}catch(c){await this.cancelRecognitionLocal(Q.CancellationReason.Error,Q.CancellationErrorCode.ConnectionFailure,c);return}let o=new Q.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,o),this.receiveMessage(),this.sendAudio(s).catch(async c=>{await this.cancelRecognitionLocal(Q.CancellationReason.Error,Q.CancellationErrorCode.RuntimeError,c)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(e,r){this.connectImpl().then(()=>{try{e&&e()}catch(n){r&&r(n)}},n=>{try{r&&r(n)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(Q.CancellationReason.Error,Q.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(e){}async sendNetworkMessage(e,r){let n=typeof r=="string"?Ie.MessageType.Text:Ie.MessageType.Binary,i=typeof r=="string"?"application/json":"";return(await this.fetchConnection()).send(new ji.SpeechConnectionMessage(n,e,this.privRequestSession.requestId,i,r))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}async sendTelemetryData(){let e=this.privRequestSession.getTelemetry();if(t.telemetryDataEnabled!==!0||this.privIsDisposed||e===null)return;if(t.telemetryData)try{t.telemetryData(e)}catch{}await(await this.fetchConnection()).send(new ji.SpeechConnectionMessage(Ie.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}async cancelRecognitionLocal(e,r,n){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,r,n))}async receiveMessage(){try{if(this.privIsDisposed)return;let e=await this.fetchConnection(),r=await e.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!r)return this.receiveMessage();this.privServiceHasSentMessage=!0;let n=ji.SpeechConnectionMessage.fromConnectionMessage(r);if(n.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":let i=Un.SpeechDetected.fromJSON(n.textBody,this.privRequestSession.currentTurnAudioOffset),s=new Q.RecognitionEventArgs(i.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,s);break;case"speech.enddetected":let o;n.textBody.length>0?o=n.textBody:o="{ Offset: 0 }";let a=Un.SpeechDetected.fromJSON(o,this.privRequestSession.currentTurnAudioOffset),c=new Q.RecognitionEventArgs(a.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,c);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(Q.CancellationReason.EndOfStream,Q.CancellationErrorCode.NoError,void 0));let u=new Q.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,u);return}else e=await this.fetchConnection(),await this.sendPrePayloadJSON(e);break;default:await this.processTypeSpecificMessages(n)||this.privServiceEvents&&this.serviceEvents.onEvent(new Ie.ServiceEvent(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){let e=this.privRequestSession.recognitionBytesSent,r=this.privAverageBytesPerMs!==0?e/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(r)}sendSpeechContext(e,r){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();let n=this.speechContext.toJSON();if(r&&this.privRequestSession.onSpeechContext(),n)return e.send(new ji.SpeechConnectionMessage(Ie.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",n))}setupTranslationWithLanguageId(){let e=this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),r=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(e!==void 0&&r){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:AO.ResultType.None},phraseResults:{resultType:kO.PhraseResultOutputType.None}};let n=this.privSpeechContext.getContext().translation;if(n){let i=this.privRecognizerConfig.sourceLanguageModels;if(i!==void 0&&i.length>0){let o=this.privSpeechContext.getContext().phraseDetection||{};o.customModels=i,this.privSpeechContext.getContext().phraseDetection=o}this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(n.onSuccess={action:xf.NextAction.Synthesize},n.onPassthrough={action:xf.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(e,r=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(e);await this.sendSpeechContext(e,r),await this.sendWaveHeader(e)}async sendWaveHeader(e){let r=await this.audioSource.format;return e.send(new ji.SpeechConnectionMessage(Ie.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",r.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(e=>e.state()===Ie.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,r,n){if(r.onSpeechContext(),t.telemetryDataEnabled!==!0){let s={context:{system:JSON.parse(n).context.system}};n=JSON.stringify(s)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){let i=JSON.parse(n);i.context.DisableReferenceChannel="True",i.context.MicSpec="1_0_0",n=JSON.stringify(i)}if(n)return e.send(new ji.SpeechConnectionMessage(Ie.MessageType.Text,"speech.config",r.requestId,"application/json",n))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===Ie.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(e){let r=await this.audioSource.format;this.privAverageBytesPerMs=r.avgBytesPerSec/1e3;let n=Date.now(),i=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=r.avgBytesPerSec/1e3*parseInt(i,10),o=this.privRequestSession.recogNumber,a=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){let c=await this.fetchConnection(),u=await e.read();if(this.privRequestSession.isSpeechEnded)return;let l,d;if(!u||u.isEnd?(l=null,d=0):(l=u.buffer,this.privRequestSession.onAudioSent(l.byteLength),s>=this.privRequestSession.bytesSent?d=0:d=Math.max(0,n-Date.now())),d!==0&&await this.delay(d),l!==null&&(n=Date.now()+l.byteLength*1e3/(r.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o)if(c.send(new ji.SpeechConnectionMessage(Ie.MessageType.Binary,"audio",this.privRequestSession.requestId,null,l)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),u?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return a()}};return a()}async retryableConnect(){let e=!1;this.privAuthFetchEventId=(0,Ie.createNoDashGuid)();let r=this.privRequestSession.sessionId;this.privConnectionId=r!==void 0?r:(0,Ie.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let n=0,i="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();let o=await(e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);let a=await this.privConnectionFactory.create(this.privRecognizerConfig,o,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(a.events),a.events.attach(u=>{this.connectionEvents.onEvent(u)});let c=await a.open();if(c.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(c.statusCode),Promise.resolve(a);c.statusCode===1006&&(e=!0),n=c.statusCode,i=c.reason}return await this.privRequestSession.onConnectionEstablishCompleted(n,i),Promise.reject(`Unable to contact server. StatusCode: ${n}, ${this.privRecognizerConfig.parameters.getProperty(Q.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${i}`)}delay(e){return new Promise(r=>this.privSetTimeout(r,e))}writeBufferToConsole(e){let r="Buffer Size: ";if(e===null)r+="null";else{let n=new Uint8Array(e);r+=`${e.byteLength}\r
`;for(let i=0;i<e.byteLength;i++)r+=n[i].toString(16).padStart(2,"0")+" ",(i+1)%16===0&&(console.info(r),r="")}console.info(r)}async sendFinalAudio(){await(await this.fetchConnection()).send(new ji.SpeechConnectionMessage(Ie.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){let e=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(await this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(e,!1),e)}};Nf.ServiceRecognizerBase=Df;Df.telemetryDataEnabled=!0});var OO=p(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.ConversationServiceRecognizer=void 0;var Br=w(),pn=O(),zw=class extends pn.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.handleSpeechPhraseMessage=async o=>this.handleSpeechPhrase(o),this.handleSpeechHypothesisMessage=o=>this.handleSpeechHypothesis(o)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,r,n){}handleRecognizingCallback(e,r,n){}async processSpeechMessages(e){let r=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),r=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(e.textBody),r=!0;break;default:break}return r}cancelRecognition(e,r,n,i,s){}async handleSpeechPhrase(e){let r=pn.SimpleSpeechPhrase.fromJSON(e,this.privRequestSession.currentTurnAudioOffset),n=pn.EnumTranslation.implTranslateRecognitionResult(r.RecognitionStatus),i,s=new Br.PropertyCollection;if(s.setProperty(Br.PropertyId.SpeechServiceResponse_JsonResult,e),this.privRequestSession.onPhraseRecognized(r.Offset+r.Duration),Br.ResultReason.Canceled===n){let o=pn.EnumTranslation.implTranslateCancelResult(r.RecognitionStatus),a=pn.EnumTranslation.implTranslateCancelErrorCode(r.RecognitionStatus);await this.cancelRecognitionLocal(o,a,pn.EnumTranslation.implTranslateErrorDetails(a))}else if(r.RecognitionStatus!==pn.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(pn.OutputFormatPropertyName)===Br.OutputFormat[Br.OutputFormat.Simple])i=new Br.SpeechRecognitionResult(this.privRequestSession.requestId,n,r.DisplayText,r.Duration,r.Offset,r.Language,r.LanguageDetectionConfidence,r.SpeakerId,void 0,r.asJson(),s);else{let o=pn.DetailedSpeechPhrase.fromJSON(e,this.privRequestSession.currentTurnAudioOffset);i=new Br.SpeechRecognitionResult(this.privRequestSession.requestId,n,o.Text,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),s)}this.handleRecognizedCallback(i,i.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(e){let r=pn.SpeechHypothesis.fromJSON(e,this.privRequestSession.currentTurnAudioOffset),n=new Br.PropertyCollection;n.setProperty(Br.PropertyId.SpeechServiceResponse_JsonResult,e);let i=new Br.SpeechRecognitionResult(this.privRequestSession.requestId,Br.ResultReason.RecognizingSpeech,r.Text,r.Duration,r.Offset,r.Language,r.LanguageDetectionConfidence,r.SpeakerId,void 0,r.asJson(),n);this.privRequestSession.onHypothesis(r.Offset),this.handleRecognizingCallback(i,r.Duration,this.privRequestSession.sessionId)}};zf.ConversationServiceRecognizer=zw});var MO=p(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.RecognizerConfig=Ms.SpeechResultFormat=void 0;var wu=w(),xO=O(),jw=Gt(),gF;(function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"})(gF=Ms.SpeechResultFormat||(Ms.SpeechResultFormat={}));var Lw=class{constructor(e,r){this.privSpeechServiceConfig=e||new xO.SpeechServiceConfig(new xO.Context(null)),this.privParameters=r,this.privMaxRetryCount=parseInt(r.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=r.getProperty(wu.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===jw.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=jw.RecognitionMode[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==jw.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(wu.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(wu.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(e){this.parameters.setProperty(wu.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,e)}get sourceLanguageModels(){let e=[],r=!1;if(this.autoDetectSourceLanguages!==void 0)for(let n of this.autoDetectSourceLanguages.split(",")){let i=n+wu.PropertyId.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(i,void 0);s!==void 0?(e.push({language:n,endpoint:s}),r=!0):e.push({language:n,endpoint:""})}return r?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}};Ms.RecognizerConfig=Lw});var NO=p(DO=>{"use strict";Object.defineProperty(DO,"__esModule",{value:!0})});var jO=p(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.WebsocketMessageFormatter=void 0;var gr=D(),zO=`\r
`,qw=class{toConnectionMessage(e){let r=new gr.Deferred;try{if(e.messageType===gr.MessageType.Text){let n=e.textContent,i={},s=null;if(n){let o=n.split(`\r
\r
`);o&&o.length>0&&(i=this.parseHeaders(o[0]),o.length>1&&(s=o[1]))}r.resolve(new gr.ConnectionMessage(e.messageType,s,i,e.id))}else if(e.messageType===gr.MessageType.Binary){let n=e.binaryContent,i={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");let o=new DataView(n),a=o.getInt16(0);if(n.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<a;u++)c+=String.fromCharCode(o.getInt8(u+2));i=this.parseHeaders(c),n.byteLength>a+2&&(s=n.slice(2+a)),r.resolve(new gr.ConnectionMessage(e.messageType,s,i,e.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){let r=new gr.Deferred;try{if(e.messageType===gr.MessageType.Text){let n=`${this.makeHeaders(e)}${zO}${e.textBody?e.textBody:""}`;r.resolve(new gr.RawWebsocketMessage(gr.MessageType.Text,n,e.id))}else if(e.messageType===gr.MessageType.Binary){let n=this.makeHeaders(e),i=e.binaryBody,s=this.stringToArrayBuffer(n),o=new Int8Array(s),a=o.byteLength,c=new Int8Array(2+a+(i?i.byteLength:0));if(c[0]=a>>8&255,c[1]=a&255,c.set(o,2),i){let l=new Int8Array(i);c.set(l,2+a)}let u=c.buffer;r.resolve(new gr.RawWebsocketMessage(gr.MessageType.Binary,u,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(e){let r="";if(e.headers)for(let n in e.headers)n&&(r+=`${n}: ${e.headers[n]}${zO}`);return r}parseHeaders(e){let r={};if(e){let n=e.match(/[^\r\n]+/g);if(r){for(let i of n)if(i){let s=i.indexOf(":"),o=s>0?i.substr(0,s).trim().toLowerCase():i,a=s>0&&i.length>s+1?i.substr(s+1).trim():"";r[o]=a}}}return r}stringToArrayBuffer(e){let r=new ArrayBuffer(e.length),n=new DataView(r);for(let i=0;i<e.length;i++)n.setUint8(i,e.charCodeAt(i));return r}};jf.WebsocketMessageFormatter=qw});var FO=p(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.SpeechConnectionFactory=void 0;var LO=je(),qO=O(),Li=w(),Bw=fr(),mF=O(),yF=ht(),Ds=jn(),BO=Gt(),Fw=class extends Bw.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(e,r,n){let i=e.parameters.getProperty(Li.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(Li.PropertyId.SpeechServiceConnection_Region,void 0),o=Bw.ConnectionFactoryBase.getHostSuffix(s),a=e.parameters.getProperty(Li.PropertyId.SpeechServiceConnection_Host,"wss://"+s+".stt.speech"+o),c={},u=e.parameters.getProperty(Li.PropertyId.SpeechServiceConnection_EndpointId,void 0),l=e.parameters.getProperty(Li.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(u?(!i||i.search(Ds.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[Ds.QueryParameterNames.CustomSpeechDeploymentId]=u):l&&(!i||i.search(Ds.QueryParameterNames.Language)===-1)&&(c[Ds.QueryParameterNames.Language]=l),(!i||i.search(Ds.QueryParameterNames.Format)===-1)&&(c[Ds.QueryParameterNames.Format]=e.parameters.getProperty(qO.OutputFormatPropertyName,Li.OutputFormat[Li.OutputFormat.Simple]).toLowerCase()),e.autoDetectSourceLanguages!==void 0&&(c[Ds.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,c,i),i){let S=new URL(i),M=S.pathname;(M===""||M==="/")&&(S.pathname=this.universalUri+e.recognitionEndpointVersion,i=await Bw.ConnectionFactoryBase.getRedirectUrlFromEndpoint(S.toString()))}if(!i)switch(e.recognitionMode){case BO.RecognitionMode.Conversation:e.parameters.getProperty(qO.ForceDictationPropertyName,"false")==="true"?i=a+this.dictationRelativeUri:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?i=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:i=a+this.conversationRelativeUri;break;case BO.RecognitionMode.Dictation:i=a+this.dictationRelativeUri;break;default:e.recognitionEndpointVersion!==void 0&&parseInt(e.recognitionEndpointVersion,10)>1?i=`${a}${this.universalUri}${e.recognitionEndpointVersion}`:i=a+this.interactiveRelativeUri;break}let d={};r.token!==void 0&&r.token!==""&&(d[r.headerName]=r.token),d[yF.HeaderNames.ConnectionId]=n,d.connectionId=n;let f=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",y=new LO.WebsocketConnection(i,c,d,new mF.WebsocketMessageFormatter,LO.ProxyInfo.fromRecognizerConfig(e),f,n),C=y.uri;return e.parameters.setProperty(Li.PropertyId.SpeechServiceConnection_Url,C),y}};Lf.SpeechConnectionFactory=Fw});var VO=p(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.ConversationTranscriberConnectionFactory=void 0;var UO=je(),Xt=w(),SF=O(),Uw=fr(),CF=O(),PF=ht(),mr=jn(),Vw=class extends Uw.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2"}async create(e,r,n){let i=e.parameters.getProperty(Xt.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(Xt.PropertyId.SpeechServiceConnection_Region,void 0),o=Uw.ConnectionFactoryBase.getHostSuffix(s),a=e.parameters.getProperty(Xt.PropertyId.SpeechServiceConnection_Host,"wss://"+s+".stt.speech"+o),c={},u=e.parameters.getProperty(Xt.PropertyId.SpeechServiceConnection_EndpointId,void 0),l=e.parameters.getProperty(Xt.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(u?(!i||i.search(mr.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(c[mr.QueryParameterNames.CustomSpeechDeploymentId]=u):l&&(!i||i.search(mr.QueryParameterNames.Language)===-1)&&(c[mr.QueryParameterNames.Language]=l),e.autoDetectSourceLanguages!==void 0&&(c[mr.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,c,i),i){let S=new URL(i),M=S.pathname;(M===""||M==="/")&&(S.pathname=this.universalUri,i=await Uw.ConnectionFactoryBase.getRedirectUrlFromEndpoint(S.toString()))}i||(i=`${a}${this.universalUri}`);let d={};r.token!==void 0&&r.token!==""&&(d[r.headerName]=r.token),d[PF.HeaderNames.ConnectionId]=n;let f=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",y=new UO.WebsocketConnection(i,c,d,new CF.WebsocketMessageFormatter,UO.ProxyInfo.fromRecognizerConfig(e),f,n),C=y.uri;return e.parameters.setProperty(Xt.PropertyId.SpeechServiceConnection_Url,C),y}setV2UrlParams(e,r,n){new Map([[Xt.PropertyId.Speech_SegmentationSilenceTimeoutMs,mr.QueryParameterNames.SegmentationSilenceTimeoutMs],[Xt.PropertyId.SpeechServiceConnection_EnableAudioLogging,mr.QueryParameterNames.EnableAudioLogging],[Xt.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,mr.QueryParameterNames.EndSilenceTimeoutMs],[Xt.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,mr.QueryParameterNames.InitialSilenceTimeoutMs],[Xt.PropertyId.SpeechServiceResponse_PostProcessingOption,mr.QueryParameterNames.Postprocessing],[Xt.PropertyId.SpeechServiceResponse_ProfanityOption,mr.QueryParameterNames.Profanity],[Xt.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,mr.QueryParameterNames.StableIntermediateThreshold]]).forEach((o,a)=>{this.setUrlParameter(a,o,e,r,n)});let s=JSON.parse(e.parameters.getProperty(SF.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach(o=>{r[o]=s[o]})}};qf.ConversationTranscriberConnectionFactory=Vw});var KO=p(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.TranscriberConnectionFactory=void 0;var WO=je(),Yt=w(),HO=fr(),$O=O(),wF=ht(),Ru=jn(),Ww=class extends HO.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,r,n){let i=e.parameters.getProperty(Yt.PropertyId.SpeechServiceConnection_Endpoint,void 0),s=e.parameters.getProperty(Yt.PropertyId.SpeechServiceConnection_Region,"centralus"),o=HO.ConnectionFactoryBase.getHostSuffix(s),a="wss://transcribe."+s+".cts.speech"+o+this.multiaudioRelativeUri,c=e.parameters.getProperty(Yt.PropertyId.SpeechServiceConnection_Host,a),u={};this.setQueryParams(u,e,i),i||(i=c);let l={};r.token!==void 0&&r.token!==""&&(l[r.headerName]=r.token),l[wF.HeaderNames.ConnectionId]=n,e.parameters.setProperty(Yt.PropertyId.SpeechServiceConnection_Url,i);let d=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new WO.WebsocketConnection(i,u,l,new $O.WebsocketMessageFormatter,WO.ProxyInfo.fromRecognizerConfig(e),d,n))}setQueryParams(e,r,n){let i=r.parameters.getProperty(Yt.PropertyId.SpeechServiceConnection_EndpointId,void 0),s=r.parameters.getProperty(Yt.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);i&&!(Ru.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[Ru.QueryParameterNames.CustomSpeechDeploymentId]=i),s&&!(Ru.QueryParameterNames.Language in e)&&(e[Ru.QueryParameterNames.Language]=s);let o=r.parameters.getProperty(Yt.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",a=r.parameters.getProperty($O.OutputFormatPropertyName,Yt.OutputFormat[Yt.OutputFormat.Simple])!==Yt.OutputFormat[Yt.OutputFormat.Simple];(o||a)&&(e[Ru.QueryParameterNames.Format]=Yt.OutputFormat[Yt.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(r,e,n)}};Bf.TranscriberConnectionFactory=Ww});var XO=p(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.TranslationConnectionFactory=void 0;var JO=je(),GO=kP(),Vn=w(),Hw=fr(),RF=O(),EF=ht(),_F=jn(),QO=Gt(),$w=class extends Hw.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(e,r,n){let i=this.getEndpointUrl(e),s={};if(this.setQueryParams(s,e,i),i){let u=new URL(i),l=u.pathname;(l===""||l==="/")&&(u.pathname=this.universalUri,i=await Hw.ConnectionFactoryBase.getRedirectUrlFromEndpoint(u.toString()))}let o={};r.token!==void 0&&r.token!==""&&(o[r.headerName]=r.token),o[EF.HeaderNames.ConnectionId]=n,e.parameters.setProperty(Vn.PropertyId.SpeechServiceConnection_Url,i);let a=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new JO.WebsocketConnection(i,s,o,new RF.WebsocketMessageFormatter,JO.ProxyInfo.fromRecognizerConfig(e),a,n)}getEndpointUrl(e,r){let n=e.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_Region),i=Hw.ConnectionFactoryBase.getHostSuffix(n),s=e.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_Endpoint,void 0);return s?r===!0?s:GO.StringUtils.formatString(s,{region:n}):(e.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?s=e.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+i)+this.translationV1Uri:s=e.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+i)+this.universalUri,r===!0?s:GO.StringUtils.formatString(s,{region:n}))}setQueryParams(e,r,n){e.from=r.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=r.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=r.recognitionMode===QO.RecognitionMode.Interactive?"interactive":r.recognitionMode===QO.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(r,e,n),this.setUrlParameter(Vn.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,_F.QueryParameterNames.StableTranslation,r,e,n);let i=r.parameters.getProperty(Vn.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);i!==void 0&&(e.voice=i,e.features="requireVoice")}};Ff.TranslationConnectionFactory=$w});var YO=p(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.EnumTranslation=void 0;var Fe=w(),be=O(),Kw=class{static implTranslateRecognitionResult(e,r=!1){let n=Fe.ResultReason.Canceled;switch(e){case be.RecognitionStatus.Success:n=Fe.ResultReason.RecognizedSpeech;break;case be.RecognitionStatus.EndOfDictation:n=r?Fe.ResultReason.RecognizedSpeech:Fe.ResultReason.NoMatch;break;case be.RecognitionStatus.NoMatch:case be.RecognitionStatus.InitialSilenceTimeout:case be.RecognitionStatus.BabbleTimeout:n=Fe.ResultReason.NoMatch;break;case be.RecognitionStatus.Error:case be.RecognitionStatus.BadRequest:case be.RecognitionStatus.Forbidden:default:n=Fe.ResultReason.Canceled;break}return n}static implTranslateCancelResult(e){let r=Fe.CancellationReason.EndOfStream;switch(e){case be.RecognitionStatus.Success:case be.RecognitionStatus.EndOfDictation:case be.RecognitionStatus.NoMatch:r=Fe.CancellationReason.EndOfStream;break;case be.RecognitionStatus.InitialSilenceTimeout:case be.RecognitionStatus.BabbleTimeout:case be.RecognitionStatus.Error:case be.RecognitionStatus.BadRequest:case be.RecognitionStatus.Forbidden:default:r=Fe.CancellationReason.Error;break}return r}static implTranslateCancelErrorCode(e){let r=Fe.CancellationErrorCode.NoError;switch(e){case be.RecognitionStatus.Error:r=Fe.CancellationErrorCode.ServiceError;break;case be.RecognitionStatus.TooManyRequests:r=Fe.CancellationErrorCode.TooManyRequests;break;case be.RecognitionStatus.BadRequest:r=Fe.CancellationErrorCode.BadRequestParameters;break;case be.RecognitionStatus.Forbidden:r=Fe.CancellationErrorCode.Forbidden;break;default:r=Fe.CancellationErrorCode.NoError;break}return r}static implTranslateErrorDetails(e){let r="The speech service encountered an internal error and could not continue.";switch(e){case Fe.CancellationErrorCode.Forbidden:r="The recognizer is using a free subscription that ran out of quota.";break;case Fe.CancellationErrorCode.BadRequestParameters:r="Invalid parameter or unsupported audio format in the request.";break;case Fe.CancellationErrorCode.TooManyRequests:r="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break;default:break}return r}};Uf.EnumTranslation=Kw});var ZO=p(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.RecognitionStatus=qi.SynthesisStatus=void 0;var IF;(function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"})(IF=qi.SynthesisStatus||(qi.SynthesisStatus={}));var TF;(function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"})(TF=qi.RecognitionStatus||(qi.RecognitionStatus={}))});var tx=p(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.TranslationSynthesisEnd=void 0;var ex=O(),Jw=class t{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=ex.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=ex.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new t(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};Vf.TranslationSynthesisEnd=Jw});var nx=p(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.TranslationHypothesis=void 0;var AF=q(),rx=Vp(),Gw=class t{constructor(e,r){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Offset+=r,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(e,r){return new t(JSON.parse(e),r)}static fromTranslationResponse(e,r){AF.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");let n=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,n.Translation=e,new t(n,r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}asJson(){let e={...this.privTranslationHypothesis};return e.Translation!==void 0?JSON.stringify({...e,TranslationStatus:rx.TranslationStatus[e.Translation.TranslationStatus]}):JSON.stringify(e)}mapTranslationStatus(e){if(typeof e=="string")return rx.TranslationStatus[e];if(typeof e=="number")return e}};Wf.TranslationHypothesis=Gw});var ox=p(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.TranslationPhrase=void 0;var kF=q(),ix=O(),sx=Vp(),Qw=class t{constructor(e,r){this.privTranslationPhrase=e,this.privTranslationPhrase.Offset+=r,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(e,r){return new t(JSON.parse(e),r)}static fromTranslationResponse(e,r){kF.Contracts.throwIfNullOrUndefined(e,"translationResponse");let n=e.SpeechPhrase;return e.SpeechPhrase=void 0,n.Translation=e,n.Text=n.DisplayText,new t(n,r)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){let e={...this.privTranslationPhrase},r={...e,RecognitionStatus:ix.RecognitionStatus[e.RecognitionStatus]};return e.Translation&&(r.Translation={...e.Translation,TranslationStatus:sx.TranslationStatus[e.Translation.TranslationStatus]}),JSON.stringify(r)}mapRecognitionStatus(e){if(typeof e=="string")return ix.RecognitionStatus[e];if(typeof e=="number")return e}mapTranslationStatus(e){if(typeof e=="string")return sx.TranslationStatus[e];if(typeof e=="number")return e}};Hf.TranslationPhrase=Qw});var cx=p($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.TranslationServiceRecognizer=void 0;var ax=D(),ee=w(),vt=O(),Xw=class extends vt.ConversationServiceRecognizer{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privTranslationRecognizer=s,this.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(e){let r=new ee.PropertyCollection,n=await this.processSpeechMessages(e);if(n)return!0;let i=async o=>{if(r.setProperty(ee.PropertyId.SpeechServiceResponse_JsonResult,o.asJson()),this.privRequestSession.onPhraseRecognized(o.Offset+o.Duration),o.RecognitionStatus===vt.RecognitionStatus.Success){let a=this.fireEventForResult(o,r);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,a)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a.result)}catch(c){this.privErrorCallback&&this.privErrorCallback(c)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{let a=vt.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus),c=new ee.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,a,o.Text,o.Duration,o.Offset,o.Language,o.Confidence,void 0,o.asJson(),r);if(a===ee.ResultReason.Canceled){let u=vt.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),l=vt.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(u,l,vt.EnumTranslation.implTranslateErrorDetails(l))}else if(o.RecognitionStatus!==vt.RecognitionStatus.EndOfDictation){let u=new ee.TranslationRecognitionEventArgs(c,c.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(c)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}},s=o=>{r.setProperty(ee.PropertyId.SpeechServiceResponse_JsonResult,o.asJson());let a=this.fireEventForResult(o,r);if(this.privRequestSession.onHypothesis(a.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,a)}catch{}n=!0};switch(e.messageType===ax.MessageType.Text&&r.setProperty(ee.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":s(vt.TranslationHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":let o=JSON.parse(e.textBody);if(o.SpeechPhrase)await i(vt.TranslationPhrase.fromTranslationResponse(o,this.privRequestSession.currentTurnAudioOffset));else{let c=JSON.parse(e.textBody);c.SpeechHypothesis&&s(vt.TranslationHypothesis.fromTranslationResponse(c,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await i(vt.TranslationPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),n=!0;break;case"audio.end":case"translation.synthesis.end":let a=vt.TranslationSynthesisEnd.fromJSON(e.textBody);switch(a.SynthesisStatus){case vt.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){let c=new ee.TranslationSynthesisResult(ee.ResultReason.Canceled,void 0),u=new ee.TranslationSynthesisEventArgs(c,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}if(this.privTranslationRecognizer.canceled){let c=new ee.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,ee.CancellationReason.Error,a.FailureReason,ee.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,c)}catch{}}break;case vt.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break;default:break}n=!0;break;default:break}return n}cancelRecognition(e,r,n,i,s){let o=new ee.PropertyCollection;if(o.setProperty(vt.CancellationErrorCodePropertyName,ee.CancellationErrorCode[i]),this.privTranslationRecognizer.canceled){let a=new ee.TranslationRecognitionCanceledEventArgs(e,n,s,i,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new ee.TranslationRecognitionResult(void 0,r,ee.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(e,r,n){try{let i=new ee.TranslationRecognitionEventArgs(ee.TranslationRecognitionResult.fromSpeechRecognitionResult(e),r,n);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch{}}handleRecognizedCallback(e,r,n){try{let i=new ee.TranslationRecognitionEventArgs(ee.TranslationRecognitionResult.fromSpeechRecognitionResult(e),r,n);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch{}}fireEventForResult(e,r){let n;if(e.Translation.Translations!==void 0){n=new ee.Translations;for(let u of e.Translation.Translations)n.set(u.Language,u.Text||u.DisplayText)}let i,s;e instanceof vt.TranslationPhrase?(e.Translation&&e.Translation.TranslationStatus===ax.TranslationStatus.Success?i=ee.ResultReason.TranslatedSpeech:i=ee.ResultReason.RecognizedSpeech,s=e.Confidence):i=ee.ResultReason.TranslatingSpeech;let o=e.Language,a=new ee.TranslationRecognitionResult(n,this.privRequestSession.requestId,i,e.Text,e.Duration,e.Offset,o,s,e.Translation.FailureReason,e.asJson(),r);return new ee.TranslationRecognitionEventArgs(a,e.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(e,r){let n=e===void 0?ee.ResultReason.SynthesizingAudioCompleted:ee.ResultReason.SynthesizingAudio,i=new ee.TranslationSynthesisResult(n,e),s=new ee.TranslationSynthesisEventArgs(i,r);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,s)}catch{}}};$f.TranslationServiceRecognizer=Xw});var ux=p(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.SpeechDetected=void 0;var Yw=class t{constructor(e,r){this.privSpeechStartDetected=JSON.parse(e),this.privSpeechStartDetected.Offset+=r}static fromJSON(e,r){return new t(e,r)}get Offset(){return this.privSpeechStartDetected.Offset}};Kf.SpeechDetected=Yw});var lx=p(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.SpeechHypothesis=void 0;var Zw=class t{constructor(e,r){this.privSpeechHypothesis=JSON.parse(e),this.updateOffset(r)}static fromJSON(e,r){return new t(e,r)}updateOffset(e){this.privSpeechHypothesis.Offset+=e}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};Jf.SpeechHypothesis=Zw});var px=p(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.SpeechKeyword=void 0;var eR=class t{constructor(e,r){this.privSpeechKeyword=JSON.parse(e),this.privSpeechKeyword.Offset+=r}static fromJSON(e,r){return new t(e,r)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};Gf.SpeechKeyword=eR});var dx=p(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.SpeechServiceRecognizer=void 0;var Ue=w(),yr=O(),tR=class extends yr.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privSpeechRecognizer=s}async processTypeSpecificMessages(e){let r,n=new Ue.PropertyCollection,i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let s=yr.SpeechHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n.setProperty(Ue.PropertyId.SpeechServiceResponse_JsonResult,s.asJson()),r=new Ue.SpeechRecognitionResult(this.privRequestSession.requestId,Ue.ResultReason.RecognizingSpeech,s.Text,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,void 0,void 0,s.asJson(),n),this.privRequestSession.onHypothesis(s.Offset);let o=new Ue.SpeechRecognitionEventArgs(r,s.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,o)}catch{}i=!0;break;case"speech.phrase":let a=yr.SimpleSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n.setProperty(Ue.PropertyId.SpeechServiceResponse_JsonResult,a.asJson());let c=yr.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(a.Offset+a.Duration),Ue.ResultReason.Canceled===c){let u=yr.EnumTranslation.implTranslateCancelResult(a.RecognitionStatus),l=yr.EnumTranslation.implTranslateCancelErrorCode(a.RecognitionStatus);await this.cancelRecognitionLocal(u,l,yr.EnumTranslation.implTranslateErrorDetails(l))}else{if(a.RecognitionStatus===yr.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(yr.OutputFormatPropertyName)===Ue.OutputFormat[Ue.OutputFormat.Simple])r=new Ue.SpeechRecognitionResult(this.privRequestSession.requestId,c,a.DisplayText,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),n);else{let l=yr.DetailedSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n.setProperty(Ue.PropertyId.SpeechServiceResponse_JsonResult,l.asJson()),r=new Ue.SpeechRecognitionResult(this.privRequestSession.requestId,c,l.RecognitionStatus===yr.RecognitionStatus.Success?l.NBest[0].Display:"",l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,void 0,void 0,l.asJson(),n)}let u=new Ue.SpeechRecognitionEventArgs(r,r.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,u)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(r)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0;break;default:break}return i}cancelRecognition(e,r,n,i,s){let o=new Ue.PropertyCollection;if(o.setProperty(yr.CancellationErrorCodePropertyName,Ue.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){let a=new Ue.SpeechRecognitionCanceledEventArgs(n,s,i,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Ue.SpeechRecognitionResult(r,Ue.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};Qf.SpeechServiceRecognizer=tR});var hx=p(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.IdentityProvider=Bi.SpeakerDiarizationMode=void 0;var bF;(function(t){t.None="None",t.Identity="Identity",t.Anonymous="Anonymous"})(bF=Bi.SpeakerDiarizationMode||(Bi.SpeakerDiarizationMode={}));var OF;(function(t){t.CallCenter="CallCenter"})(OF=Bi.IdentityProvider||(Bi.IdentityProvider={}))});var fx=p(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.ConversationTranscriptionServiceRecognizer=void 0;var gt=w(),Sr=O(),xF=hx(),MF=Gt(),rR=class extends Sr.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privConversationTranscriber=s,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){let e=this.privSpeechContext.getContext().phraseDetection||{};e.mode=MF.RecognitionMode.Conversation;let r={};r.mode=xF.SpeakerDiarizationMode.Anonymous,r.audioSessionId=this.privDiarizationSessionId,r.audioOffsetMs=0,r.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(gt.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",e.speakerDiarization=r,this.privSpeechContext.getContext().phraseDetection=e}}async processTypeSpecificMessages(e){let r,n=new gt.PropertyCollection;n.setProperty(gt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":let s=Sr.SpeechHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);r=new gt.ConversationTranscriptionResult(this.privRequestSession.requestId,gt.ResultReason.RecognizingSpeech,s.Text,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),n),this.privRequestSession.onHypothesis(s.Offset);let o=new gt.ConversationTranscriptionEventArgs(r,s.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,o)}catch{}i=!0;break;case"speech.phrase":let a=Sr.SimpleSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset),c=Sr.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(a.Offset+a.Duration),gt.ResultReason.Canceled===c){let u=Sr.EnumTranslation.implTranslateCancelResult(a.RecognitionStatus),l=Sr.EnumTranslation.implTranslateCancelErrorCode(a.RecognitionStatus);await this.cancelRecognitionLocal(u,l,Sr.EnumTranslation.implTranslateErrorDetails(l))}else if(!(this.privRequestSession.isSpeechEnded&&c===gt.ResultReason.NoMatch&&a.RecognitionStatus!==Sr.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(Sr.OutputFormatPropertyName)===gt.OutputFormat[gt.OutputFormat.Simple])r=new gt.ConversationTranscriptionResult(this.privRequestSession.requestId,c,a.DisplayText,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,a.asJson(),n);else{let l=Sr.DetailedSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);r=new gt.ConversationTranscriptionResult(this.privRequestSession.requestId,c,l.RecognitionStatus===Sr.RecognitionStatus.Success?l.NBest[0].Display:void 0,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,a.SpeakerId,void 0,l.asJson(),n)}let u=new gt.ConversationTranscriptionEventArgs(r,r.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,u)}catch{}}i=!0;break;default:break}return i}cancelRecognition(e,r,n,i,s){if(new gt.PropertyCollection().setProperty(Sr.CancellationErrorCodePropertyName,gt.CancellationErrorCode[i]),this.privConversationTranscriber.canceled){let a=new gt.ConversationTranscriptionCanceledEventArgs(n,s,i,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,a)}catch{}}}};Xf.ConversationTranscriptionServiceRecognizer=rR});var gx=p(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.TranscriptionServiceRecognizer=void 0;var DF=D(),Wn=w(),vx=O(),NF=xs(),nR=class extends vx.ConversationServiceRecognizer{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privTranscriberRecognizer=s,this.sendPrePayloadJSONOverride=o=>this.sendTranscriptionStartJSON(o),this.privRecognizerConfig.parameters.getProperty(Wn.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(e,r){if(this.privRequestSession.isRecognizing){let n=await this.fetchConnection();await this.sendSpeechEvent(n,this.createSpeechEventPayload(e,r))}}async sendMeetingSpeechEventAsync(e,r){if(this.privRequestSession.isRecognizing){let n=await this.fetchConnection();await this.sendSpeechEvent(n,this.createMeetingSpeechEventPayload(e,r))}}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,r,n){try{let i=new Wn.SpeechRecognitionEventArgs(e,r,n);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,i),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(s){this.privErrorCallback&&this.privErrorCallback(s)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(e,r,n){try{let i=new Wn.SpeechRecognitionEventArgs(e,r,n);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch{}}cancelRecognition(e,r,n,i,s){let o=new Wn.PropertyCollection;if(o.setProperty(vx.CancellationErrorCodePropertyName,Wn.CancellationErrorCode[i]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){let a=new Wn.MeetingTranscriptionCanceledEventArgs(n,s,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}}else if(this.privTranscriberRecognizer.canceled){let a=new Wn.ConversationTranscriptionCanceledEventArgs(n,s,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Wn.SpeechRecognitionResult(r,Wn.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(e){if(await this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){let r=this.privTranscriberRecognizer.getMeetingInfo(),n=this.createMeetingSpeechEventPayload(r,"start");await this.sendSpeechEvent(e,n)}else{let r=this.privTranscriberRecognizer.getConversationInfo(),n=this.createSpeechEventPayload(r,"start");await this.sendSpeechEvent(e,n)}await this.sendWaveHeader(e)}sendSpeechEvent(e,r){let n=JSON.stringify(r);if(n)return e.send(new NF.SpeechConnectionMessage(DF.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",n))}createSpeechEventPayload(e,r){let n={id:"meeting",name:r,meeting:e.conversationProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}createMeetingSpeechEventPayload(e,r){let n={id:"meeting",name:r,meeting:e.meetingProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}};Yf.TranscriptionServiceRecognizer=nR});var yx=p(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.DetailedSpeechPhrase=void 0;var mx=O(),iR=class t{constructor(e,r){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(r)}static fromJSON(e,r){return new t(e,r)}updateOffsets(e){if(this.privDetailedSpeechPhrase.Offset+=e,this.privDetailedSpeechPhrase.NBest)for(let r of this.privDetailedSpeechPhrase.NBest){if(r.Words)for(let n of r.Words)n.Offset+=e;if(r.DisplayWords)for(let n of r.DisplayWords)n.Offset+=e}}asJson(){let e={...this.privDetailedSpeechPhrase};return JSON.stringify({...e,RecognitionStatus:mx.RecognitionStatus[e.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(e){if(typeof e=="string")return mx.RecognitionStatus[e];if(typeof e=="number")return e}};Zf.DetailedSpeechPhrase=iR});var Cx=p(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0});ev.SimpleSpeechPhrase=void 0;var Sx=O(),sR=class t{constructor(e,r=0){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(r)}static fromJSON(e,r){return new t(e,r)}updateOffset(e){this.privSimpleSpeechPhrase.Offset+=e}asJson(){let e={...this.privSimpleSpeechPhrase};return JSON.stringify({...e,RecognitionStatus:Sx.RecognitionStatus[e.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(e){if(typeof e=="string")return Sx.RecognitionStatus[e];if(typeof e=="number")return e}};ev.SimpleSpeechPhrase=sR});var Px=p(tv=>{"use strict";Object.defineProperty(tv,"__esModule",{value:!0});tv.AddedLmIntent=void 0;var oR=class{constructor(e,r){this.modelImpl=e,this.intentName=r}};tv.AddedLmIntent=oR});var Rx=p(rv=>{"use strict";Object.defineProperty(rv,"__esModule",{value:!0});rv.IntentServiceRecognizer=void 0;var wx=D(),Oe=w(),oa=O(),aR=class extends oa.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privIntentRecognizer=s,this.privIntentDataSent=!1,i.recognitionEndpointVersion="1"}setIntents(e,r){this.privAddedLmIntents=e,this.privUmbrellaIntent=r,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let r,n,i=!1,s=new Oe.PropertyCollection;switch(e.messageType===wx.MessageType.Text&&s.setProperty(Oe.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":let a=oa.SpeechHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);if(r=new Oe.IntentRecognitionResult(void 0,this.privRequestSession.requestId,Oe.ResultReason.RecognizingIntent,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,a.asJson(),s),this.privRequestSession.onHypothesis(r.offset),n=new Oe.IntentRecognitionEventArgs(r,a.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,n)}catch{}i=!0;break;case"speech.phrase":let c=oa.SimpleSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);r=new Oe.IntentRecognitionResult(void 0,this.privRequestSession.requestId,oa.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus),c.DisplayText,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,c.asJson(),s),n=new Oe.IntentRecognitionEventArgs(r,r.offset,this.privRequestSession.sessionId);let u=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(r)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||Oe.ResultReason.NoMatch===n.result.reason?(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),u()):this.privPendingIntentArgs=n,i=!0;break;case"response":if(n=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,n===void 0){if(e.textBody==="")return;n=new Oe.IntentRecognitionEventArgs(new Oe.IntentRecognitionResult,0,this.privRequestSession.sessionId)}let l=oa.IntentResponse.fromJSON(e.textBody);if(l!==null&&l.topScoringIntent&&l.topScoringIntent.intent){let d=this.privAddedLmIntents[l.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(d=this.privUmbrellaIntent),d){let f=d===void 0||d.intentName===void 0?l.topScoringIntent.intent:d.intentName,y=n.result.reason;f!==void 0&&(y=Oe.ResultReason.RecognizedIntent);let C=n.result.properties!==void 0?n.result.properties:new Oe.PropertyCollection;C.setProperty(Oe.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),n=new Oe.IntentRecognitionEventArgs(new Oe.IntentRecognitionResult(f,n.result.resultId,y,n.result.text,n.result.duration,n.result.offset,void 0,void 0,n.result.errorDetails,n.result.json,C),n.offset,n.sessionId)}}if(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(n.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}i=!0;break;default:break}let o=new wx.Deferred;return o.resolve(i),o.promise}cancelRecognition(e,r,n,i,s){let o=new Oe.PropertyCollection;if(o.setProperty(oa.CancellationErrorCodePropertyName,Oe.CancellationErrorCode[i]),this.privIntentRecognizer.canceled){let a=new Oe.IntentRecognitionCanceledEventArgs(n,s,i,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,a)}catch{}}if(this.privSuccessCallback){let a=new Oe.IntentRecognitionResult(void 0,r,Oe.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch{}}}};rv.IntentServiceRecognizer=aR});var Ex=p(nv=>{"use strict";Object.defineProperty(nv,"__esModule",{value:!0});nv.IntentResponse=void 0;var cR=class t{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}};nv.IntentResponse=cR});var Ix=p(_x=>{"use strict";Object.defineProperty(_x,"__esModule",{value:!0})});var Ax=p(iv=>{"use strict";Object.defineProperty(iv,"__esModule",{value:!0});iv.ServiceTelemetryListener=void 0;var Hn=D(),Tx=bf(),uR=class{constructor(e,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof Tx.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Hn.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Hn.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Hn.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Hn.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Hn.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Tx.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Hn.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Hn.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Hn.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Hn.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){let e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});let r={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}};iv.ServiceTelemetryListener=uR});var kx=p(ov=>{"use strict";Object.defineProperty(ov,"__esModule",{value:!0});ov.RequestSession=void 0;var aa=D(),sv=bf(),zF=Ax(),lR=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=(0,aa.createNoDashGuid)(),this.privAudioNodeId=(0,aa.createNoDashGuid)(),this.privTurnDeferral=new aa.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new zF.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new sv.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,r){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new sv.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,r){this.privAuthFetchEventId=e,this.privSessionId=r,this.onEvent(new sv.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,r){if(e===200){this.onEvent(new sv.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,aa.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new aa.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),aa.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};ov.RequestSession=lR});var bx=p(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.TentativePhraseResultsOption=qt.OutputFormat=qt.PhraseExtension=qt.PhraseOption=void 0;var jF;(function(t){t.WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords"})(jF=qt.PhraseOption||(qt.PhraseOption={}));var LF;(function(t){t.Graph="Graph",t.Corrections="Corrections",t.Sentiment="Sentiment"})(LF=qt.PhraseExtension||(qt.PhraseExtension={}));var qF;(function(t){t.Simple="Simple",t.Detailed="Detailed"})(qF=qt.OutputFormat||(qt.OutputFormat={}));var BF;(function(t){t.None="None",t.Always="Always"})(BF=qt.TentativePhraseResultsOption||(qt.TentativePhraseResultsOption={}))});var Ox=p(av=>{"use strict";Object.defineProperty(av,"__esModule",{value:!0});av.SpeechContext=void 0;var FF=Gt(),Fi=bx(),pR=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getContext(){return this.privContext}setPronunciationAssessmentParams(e,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e)||{},n&&(this.privContext.phraseDetection.mode=FF.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(Fi.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(Fi.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(Fi.PhraseOption.SNR),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push(Fi.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=Fi.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=Fi.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(Fi.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(Fi.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){let e=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=e,JSON.stringify(this.privContext)}};av.SpeechContext=pR});var xx=p(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.SubstringMatchType=Ui.GroupType=void 0;var UF;(function(t){t.IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity"})(UF=Ui.GroupType||(Ui.GroupType={}));var VF;(function(t){t.None="None",t.LeftRooted="LeftRooted",t.PartialName="PartialName",t.MiddleOfSentence="MiddleOfSentence"})(VF=Ui.SubstringMatchType||(Ui.SubstringMatchType={}))});var Mx=p(cv=>{"use strict";Object.defineProperty(cv,"__esModule",{value:!0});cv.DynamicGrammarBuilder=void 0;var WF=xx(),dR=class{constructor(){this.privWeight=1}addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}setWeight(e){this.privWeight=e}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;let e={};if(e.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){let r=[];this.privPhrases.forEach(n=>{r.push({text:n})}),e.groups=[{type:WF.GroupType.Generic,items:r}],e.bias=this.privWeight}return e}};cv.DynamicGrammarBuilder=dR});var fR=p(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.MessageDataStreamType=Ns.ActivityPayloadResponse=void 0;var hR=class t{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new t(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}};Ns.ActivityPayloadResponse=hR;var HF;(function(t){t[t.None=0]="None",t[t.TextToSpeechAudio=1]="TextToSpeechAudio"})(HF=Ns.MessageDataStreamType||(Ns.MessageDataStreamType={}))});var Dx=p(uv=>{"use strict";Object.defineProperty(uv,"__esModule",{value:!0});uv.DialogServiceTurnState=void 0;var $F=zo(),KF=Ss(),JF=fR(),vR=class{constructor(e,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,r){return e.messageDataStreamType===JF.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=KF.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:$F.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};uv.DialogServiceTurnState=vR});var zx=p(lv=>{"use strict";Object.defineProperty(lv,"__esModule",{value:!0});lv.DialogServiceTurnStateManager=void 0;var Nx=Mr(),GF=Dx(),gR=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new Nx.InvalidOperationError("Service error: There is already a turn with id:"+e);let r=new GF.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,r),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new Nx.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);let r=this.privTurnMap.get(e);return r.complete(),this.privTurnMap.delete(e),r}};lv.DialogServiceTurnStateManager=gR});var jx=p(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.InvocationSource=void 0;var QF;(function(t){t.None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"})(QF=Eu.InvocationSource||(Eu.InvocationSource={}))});var Lx=p(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.OnRejectAction=Vi.KeywordDetectionType=void 0;var XF;(function(t){t.StartTrigger="StartTrigger"})(XF=Vi.KeywordDetectionType||(Vi.KeywordDetectionType={}));var YF;(function(t){t.EndOfTurn="EndOfTurn",t.Continue="Continue"})(YF=Vi.OnRejectAction||(Vi.OnRejectAction={}))});var Bx=p(dv=>{"use strict";Object.defineProperty(dv,"__esModule",{value:!0});dv.DialogServiceAdapter=void 0;var ZF=je(),e3=nS(),mt=D(),t3=zo(),K=w(),r3=zx(),dn=O(),n3=fR(),i3=jx(),qx=Lx(),pv=xs(),mR=class extends dn.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privEvents=new mt.EventSource,this.privDialogServiceConnector=s,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new r3.DialogServiceTurnStateManager,this.recognizeOverride=(o,a,c)=>this.listenOnce(o,a,c),this.postConnectImplOverride=o=>this.dialogConnectImpl(o),this.configConnectionOverride=o=>this.configConnection(o),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=n,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(o=>{o.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(e){let r=(0,mt.createGuid)(),n=(0,mt.createNoDashGuid)(),i={context:{interactionId:r},messagePayload:JSON.parse(e),version:.5},s=JSON.stringify(i);await(await this.fetchConnection()).send(new pv.SpeechConnectionMessage(mt.MessageType.Text,"agent",n,"application/json",s))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,K.CancellationReason.Error,K.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(e){let r=new K.PropertyCollection;e.messageType===mt.MessageType.Text&&r.setProperty(K.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let n,i;switch(e.path.toLowerCase()){case"speech.phrase":let o=dn.SimpleSpeechPhrase.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(o.Offset+o.Duration),o.RecognitionStatus!==dn.RecognitionStatus.TooManyRequests&&o.RecognitionStatus!==dn.RecognitionStatus.Error){let d=this.fireEventForResult(o,r);if(this.privLastResult=d.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch{}}i=!0;break;case"speech.hypothesis":let a=dn.SpeechHypothesis.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n=new K.SpeechRecognitionResult(this.privRequestSession.requestId,K.ResultReason.RecognizingSpeech,a.Text,a.Duration,a.Offset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,a.asJson(),r),this.privRequestSession.onHypothesis(a.Offset);let c=new K.SpeechRecognitionEventArgs(n,a.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,c)}catch{}i=!0;break;case"speech.keyword":let u=dn.SpeechKeyword.fromJSON(e.textBody,this.privRequestSession.currentTurnAudioOffset);n=new K.SpeechRecognitionResult(this.privRequestSession.requestId,u.Status==="Accepted"?K.ResultReason.RecognizedKeyword:K.ResultReason.NoMatch,u.Text,u.Duration,u.Offset,void 0,void 0,void 0,void 0,u.asJson(),r),u.Status!=="Accepted"&&(this.privLastResult=n);let l=new K.SpeechRecognitionEventArgs(n,n.duration,n.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,l)}catch{}i=!0;break;case"audio":{let d=e.requestId.toUpperCase(),f=this.privTurnStateManager.GetTurn(d);try{e.binaryBody?f.audioStream.write(e.binaryBody):f.endAudioStream()}catch{}}i=!0;break;case"response":this.handleResponseMessage(e),i=!0;break;default:break}let s=new mt.Deferred;return s.resolve(i),s.promise}async cancelRecognition(e,r,n,i,s){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){let o=new K.PropertyCollection;o.setProperty(dn.CancellationErrorCodePropertyName,K.CancellationErrorCode[i]);let a=new K.SpeechRecognitionCanceledEventArgs(n,s,i,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch{}if(this.privSuccessCallback){let c=new K.SpeechRecognitionResult(void 0,K.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,o);try{this.privSuccessCallback(c),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(e,r,n){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=r,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(K.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let i=this.connectImpl(),s=this.sendPreAudioMessages(),o=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),a=await this.privDialogAudioSource.format,c=await this.privDialogAudioSource.deviceInfo,u=new ZF.ReplayableAudioNode(o,a.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{await i,await s}catch(f){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,K.CancellationReason.Error,K.CancellationErrorCode.ConnectionFailure,f),Promise.resolve()}let l=new K.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,l),this.sendAudio(u).then(()=>{},async f=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,K.CancellationReason.Error,K.CancellationErrorCode.RuntimeError,f)})}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){let e=new mt.Deferred,r=async()=>{try{let n=this.isDisposed(),i=!this.isDisposed()&&this.terminateMessageLoop;if(n||i){e.resolve(void 0);return}let o=await(await this.fetchConnection()).read();if(!o)return r();let a=pv.SpeechConnectionMessage.fromConnectionMessage(o);switch(a.path.toLowerCase()){case"turn.start":{let C=a.requestId.toUpperCase(),S=this.privRequestSession.requestId.toUpperCase();C!==S?this.privTurnStateManager.StartTurn(C):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":let u=dn.SpeechDetected.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),l=new K.RecognitionEventArgs(u.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,l);break;case"speech.enddetected":let d;a.textBody.length>0?d=a.textBody:d="{ Offset: 0 }";let f=dn.SpeechDetected.fromJSON(d,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(f.Offset);let y=new K.RecognitionEventArgs(f.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,y);break;case"turn.end":{let C=a.requestId.toUpperCase(),S=this.privRequestSession.requestId.toUpperCase();if(C!==S)this.privTurnStateManager.CompleteTurn(C);else{let M=new K.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,M),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(a)||this.serviceEvents&&this.serviceEvents.onEvent(new mt.ServiceEvent(a.path.toLowerCase(),a.textBody))}catch{}}return r()}catch{this.terminateMessageLoop=!0,e.resolve()}};return r().catch(n=>{mt.Events.instance.onEvent(new mt.BackgroundEvent(n))}),e.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(e){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,K.CancellationReason.Error,K.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()}async configConnection(e){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(e),e)}async sendPreAudioMessages(){let e=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(e,!0),await this.sendAgentContext(e),await this.sendWaveHeader(e)}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(K.PropertyId.Conversation_DialogType)===K.DialogServiceConfig.DialogTypes.CustomCommands){let n=this.agentConfig.get();n.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(K.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(n)}this.onEvent(new e3.SendingAgentContextMessageEvent(this.agentConfig));let r=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new pv.SpeechConnectionMessage(mt.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",r))}}sendAgentContext(e){let r=(0,mt.createGuid)(),n=this.privDialogServiceConnector.properties.getProperty(K.PropertyId.Conversation_Speech_Activity_Template),s=JSON.stringify({channelData:"",context:{interactionId:r},messagePayload:typeof n===void 0?void 0:n,version:.5});return e.send(new pv.SpeechConnectionMessage(mt.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",s))}fireEventForResult(e,r){let n=dn.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),i=new K.SpeechRecognitionResult(this.privRequestSession.requestId,n,e.DisplayText,e.Duration,e.Offset,e.Language,e.LanguageDetectionConfidence,void 0,void 0,e.asJson(),r);return new K.SpeechRecognitionEventArgs(i,e.Offset,this.privRequestSession.sessionId)}handleResponseMessage(e){let r=JSON.parse(e.textBody);switch(r.messageType.toLowerCase()){case"message":let n=e.requestId.toUpperCase(),i=n3.ActivityPayloadResponse.fromJSON(e.textBody),s=this.privTurnStateManager.GetTurn(n);if(i.conversationId){let c=this.agentConfig.get();c.botInfo.conversationId=i.conversationId,this.agentConfig.set(c)}let o=s.processActivityPayload(i,t3.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(K.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),a=new K.ActivityReceivedEventArgs(i.messagePayload,o);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,a)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new K.TurnStatusReceivedEventArgs(e.textBody))}catch{}break;default:mt.Events.instance.onEvent(new mt.BackgroundEvent(`Unexpected response of type ${r.messageType}. Ignoring.`));break}}onEvent(e){this.privEvents.onEvent(e),mt.Events.instance.onEvent(e)}addKeywordContextData(){let e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(e===void 0)return;let r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),i=e.split(";"),s=r===void 0?[]:r.split(";"),o=n===void 0?[]:n.split(";"),a=[];for(let c=0;c<i.length;c++){let u={text:i[c]};c<s.length&&(u.startOffset=Number(s[c])),c<o.length&&(u.duration=Number(o[c])),a.push(u)}this.speechContext.getContext().invocationSource=i3.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:a,onReject:{action:qx.OnRejectAction.EndOfTurn},type:qx.KeywordDetectionType.StartTrigger}]}};dv.DialogServiceAdapter=mR});var Fx=p(hv=>{"use strict";Object.defineProperty(hv,"__esModule",{value:!0});hv.AgentConfig=void 0;var yR=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}};hv.AgentConfig=yR});var vv=p(fv=>{"use strict";Object.defineProperty(fv,"__esModule",{value:!0});fv.ConversationConnectionConfig=void 0;var s3=Rw(),hn=class t extends s3.RestConfigBase{static get host(){return t.privHost}static get apiVersion(){return t.privApiVersion}static get clientAppId(){return t.privClientAppId}static get defaultLanguageCode(){return t.privDefaultLanguageCode}static get restPath(){return t.privRestPath}static get webSocketPath(){return t.privWebSocketPath}static get transcriptionEventKeys(){return t.privTranscriptionEventKeys}};fv.ConversationConnectionConfig=hn;hn.privHost="dev.microsofttranslator.com";hn.privRestPath="/capito/room";hn.privApiVersion="2.0";hn.privDefaultLanguageCode="en-US";hn.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";hn.privWebSocketPath="/capito/translate";hn.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]});var Ux=p(mv=>{"use strict";Object.defineProperty(mv,"__esModule",{value:!0});mv.ConversationManager=void 0;var gv=je(),Wi=q(),$n=w(),zs=vv(),SR=class{constructor(){this.privRequestParams=zs.ConversationConnectionConfig.configParams,this.privErrors=zs.ConversationConnectionConfig.restErrors,this.privHost=zs.ConversationConnectionConfig.host,this.privApiVersion=zs.ConversationConnectionConfig.apiVersion,this.privRestPath=zs.ConversationConnectionConfig.restPath,this.privRestAdapter=new gv.RestMessageAdapter({})}createOrJoin(e,r,n,i){try{Wi.Contracts.throwIfNullOrUndefined(e,"args");let s=e.getProperty($n.PropertyId.SpeechServiceConnection_RecoLanguage,zs.ConversationConnectionConfig.defaultLanguageCode),o=e.getProperty($n.PropertyId.ConversationTranslator_Name,"conversation_host"),a=e.getProperty($n.PropertyId.ConversationTranslator_Host,this.privHost),c=e.getProperty($n.PropertyId.ConversationTranslator_CorrelationId),u=e.getProperty($n.PropertyId.SpeechServiceConnection_Key),l=e.getProperty($n.PropertyId.SpeechServiceConnection_Region),d=e.getProperty($n.PropertyId.SpeechServiceAuthorization_Token);Wi.Contracts.throwIfNullOrWhitespace(s,"languageCode"),Wi.Contracts.throwIfNullOrWhitespace(o,"nickname"),Wi.Contracts.throwIfNullOrWhitespace(a,"endpointHost");let f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=s,f[this.privRequestParams.nickname]=o;let y={};c&&(y[this.privRequestParams.correlationId]=c),y[this.privRequestParams.clientAppId]=zs.ConversationConnectionConfig.clientAppId,r!==void 0?f[this.privRequestParams.roomId]=r:(Wi.Contracts.throwIfNullOrUndefined(l,this.privErrors.authInvalidSubscriptionRegion),y[this.privRequestParams.subscriptionRegion]=l,u?y[this.privRequestParams.subscriptionKey]=u:d?y[this.privRequestParams.authorization]=`Bearer ${d}`:Wi.Contracts.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionKey));let C={};C.headers=y,this.privRestAdapter.options=C;let S=`https://${a}${this.privRestPath}`;this.privRestAdapter.request(gv.RestRequestType.Post,S,f,null).then(M=>{let g=gv.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,M.headers);if(!M.ok){if(i){let m=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",M.status.toString()),P;try{P=JSON.parse(M.data),m+=` [${P.error.code}: ${P.error.message}]`}catch{m+=` [${M.data}]`}g&&(m+=` ${g}`),i(m)}return}let v=JSON.parse(M.data);if(v&&(v.requestId=g),n){try{n(v)}catch(m){i&&i(m)}n=void 0}}).catch(()=>{})}catch(s){if(i)if(s instanceof Error){let o=s;i(o.name+": "+o.message)}else i(s)}}leave(e,r){return new Promise((n,i)=>{try{Wi.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),Wi.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","token"));let s=e.getProperty($n.PropertyId.ConversationTranslator_Host,this.privHost),o=e.getProperty($n.PropertyId.ConversationTranslator_CorrelationId),a={};a[this.privRequestParams.apiVersion]=this.privApiVersion,a[this.privRequestParams.sessionToken]=r;let c={};o&&(c[this.privRequestParams.correlationId]=o);let u={};u.headers=c,this.privRestAdapter.options=u;let l=`https://${s}${this.privRestPath}`;this.privRestAdapter.request(gv.RestRequestType.Delete,l,a,null).then(d=>{d.ok,n()}).catch(()=>{})}catch(s){if(s instanceof Error){let o=s;i(o.name+": "+o.message)}else i(s)}})}};mv.ConversationManager=SR});var PR=p(yv=>{"use strict";Object.defineProperty(yv,"__esModule",{value:!0});yv.ConversationConnectionMessage=void 0;var o3=D(),CR=class extends o3.ConnectionMessage{constructor(e,r,n,i){super(e,r,n,i);let s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}};yv.ConversationConnectionMessage=CR});var Wx=p(Sv=>{"use strict";Object.defineProperty(Sv,"__esModule",{value:!0});Sv.ConversationWebsocketMessageFormatter=void 0;var js=D(),Vx=PR(),wR=class{toConnectionMessage(e){let r=new js.Deferred;try{if(e.messageType===js.MessageType.Text){let n=new Vx.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);r.resolve(n)}else e.messageType===js.MessageType.Binary&&r.resolve(new Vx.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(e){let r=new js.Deferred;try{if(e.messageType===js.MessageType.Text){let n=`${e.textBody?e.textBody:""}`;r.resolve(new js.RawWebsocketMessage(js.MessageType.Text,n,e.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}};Sv.ConversationWebsocketMessageFormatter=wR});var $x=p(Cv=>{"use strict";Object.defineProperty(Cv,"__esModule",{value:!0});Cv.ConversationConnectionFactory=void 0;var Hx=je(),a3=D(),c3=q(),RR=w(),u3=fr(),ca=vv(),l3=Wx(),ER=class extends u3.ConnectionFactoryBase{create(e,r,n){let i=e.parameters.getProperty(RR.PropertyId.ConversationTranslator_Host,ca.ConversationConnectionConfig.host),s=e.parameters.getProperty(RR.PropertyId.ConversationTranslator_CorrelationId,(0,a3.createGuid)()),o=`wss://${i}${ca.ConversationConnectionConfig.webSocketPath}`,a=e.parameters.getProperty(RR.PropertyId.ConversationTranslator_Token,void 0);c3.Contracts.throwIfNullOrUndefined(a,"token");let c={};c[ca.ConversationConnectionConfig.configParams.apiVersion]=ca.ConversationConnectionConfig.apiVersion,c[ca.ConversationConnectionConfig.configParams.token]=a,c[ca.ConversationConnectionConfig.configParams.correlationId]=s;let u=e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new Hx.WebsocketConnection(o,c,{},new l3.ConversationWebsocketMessageFormatter,Hx.ProxyInfo.fromRecognizerConfig(e),u,n))}};Cv.ConversationConnectionFactory=ER});var Kx=p(Pv=>{"use strict";Object.defineProperty(Pv,"__esModule",{value:!0});Pv.ConversationRequestSession=void 0;var _R=D(),IR=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=(0,_R.createNoDashGuid)(),this.privRequestCompletionDeferral=new _R.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,r){this.privSessionId=r}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=(0,_R.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(let e of this.privDetachables)await e.detach()}}onComplete(){}};Pv.ConversationRequestSession=IR});var MR=p(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.ConversationReceivedTranslationEventArgs=Bt.ParticipantsListEventArgs=Bt.ParticipantAttributeEventArgs=Bt.ParticipantEventArgs=Bt.LockRoomEventArgs=Bt.MuteAllEventArgs=void 0;var _u=w(),TR=class extends _u.SessionEventArgs{constructor(e,r){super(r),this.privIsMuted=e}get isMuted(){return this.privIsMuted}};Bt.MuteAllEventArgs=TR;var AR=class extends _u.SessionEventArgs{constructor(e,r){super(r),this.privIsLocked=e}get isMuted(){return this.privIsLocked}};Bt.LockRoomEventArgs=AR;var kR=class extends _u.SessionEventArgs{constructor(e,r){super(r),this.privParticipant=e}get participant(){return this.privParticipant}};Bt.ParticipantEventArgs=kR;var bR=class extends _u.SessionEventArgs{constructor(e,r,n,i){super(i),this.privKey=r,this.privValue=n,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}};Bt.ParticipantAttributeEventArgs=bR;var OR=class extends _u.SessionEventArgs{constructor(e,r,n,i,s,o,a,c,u){super(u),this.privRoomId=e,this.privSessionToken=r,this.privTranslateTo=n,this.privProfanityFilter=i,this.privRoomProfanityFilter=s,this.privIsRoomLocked=o,this.privIsRoomLocked=a,this.privParticipants=c}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}};Bt.ParticipantsListEventArgs=OR;var xR=class{constructor(e,r,n){this.privPayload=r,this.privCommand=e,this.privSessionId=n}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}};Bt.ConversationReceivedTranslationEventArgs=xR});var NR=p(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.ConversationTranslatorCommandTypes=Hi.ConversationTranslatorMessageTypes=Hi.InternalParticipants=void 0;var DR=class{constructor(e=[],r){this.participants=e,this.meId=r}addOrUpdateParticipant(e){if(e===void 0)return;let r=this.getParticipantIndex(e.id);return r>-1?this.participants.splice(r,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(r=>r.id===e)}getParticipant(e){return this.participants.find(r=>r.id===e)}deleteParticipant(e){this.participants=this.participants.filter(r=>r.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}};Hi.InternalParticipants=DR;Hi.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};Hi.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}});var Jx=p(wv=>{"use strict";Object.defineProperty(wv,"__esModule",{value:!0});wv.CommandResponsePayload=void 0;var p3=t=>JSON.parse(t),zR=class t{constructor(e){this.privCommandResponse=p3(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new t(e)}};wv.CommandResponsePayload=zR});var Gx=p(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.ParticipantPayloadResponse=ua.ParticipantsListPayloadResponse=void 0;var d3=t=>JSON.parse(t),h3=t=>JSON.parse(t),jR=class t{constructor(e){this.privParticipantsPayloadResponse=d3(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new t(e)}};ua.ParticipantsListPayloadResponse=jR;var LR=class t{constructor(e){this.privParticipantPayloadResponse=h3(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new t(e)}};ua.ParticipantPayloadResponse=LR});var Qx=p(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.TextResponsePayload=la.SpeechResponsePayload=void 0;var f3=t=>JSON.parse(t),v3=t=>JSON.parse(t),qR=class t{constructor(e){this.privSpeechResponse=f3(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new t(e)}};la.SpeechResponsePayload=qR;var BR=class t{constructor(e){this.privTextResponse=v3(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new t(e)}};la.TextResponsePayload=BR});var Zx=p(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.TextResponsePayload=Cr.SpeechResponsePayload=Cr.ParticipantPayloadResponse=Cr.ParticipantsListPayloadResponse=Cr.CommandResponsePayload=void 0;var g3=Jx();Object.defineProperty(Cr,"CommandResponsePayload",{enumerable:!0,get:function(){return g3.CommandResponsePayload}});var Xx=Gx();Object.defineProperty(Cr,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return Xx.ParticipantsListPayloadResponse}});Object.defineProperty(Cr,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return Xx.ParticipantPayloadResponse}});var Yx=Qx();Object.defineProperty(Cr,"SpeechResponsePayload",{enumerable:!0,get:function(){return Yx.SpeechResponsePayload}});Object.defineProperty(Cr,"TextResponsePayload",{enumerable:!0,get:function(){return Yx.TextResponsePayload}})});var rM=p(Rv=>{"use strict";Object.defineProperty(Rv,"__esModule",{value:!0});Rv.ConversationServiceAdapter=void 0;var Iu=D(),Fr=w(),eM=O(),tM=PR(),m3=Kx(),Zt=MR(),$i=NR(),Tu=Zx(),FR=class extends eM.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=s,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=o=>this.conversationConnectImpl(o),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new m3.ConversationRequestSession((0,Iu.createNoDashGuid)()),this.privConversationConnectionFactory=r,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(e){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(e),await super.dispose(e)}async sendMessage(e){return(await this.fetchConnection()).send(new tM.ConversationConnectionMessage(Iu.MessageType.Text,e))}async sendMessageAsync(e){await(await this.fetchConnection()).send(new tM.ConversationConnectionMessage(Iu.MessageType.Text,e))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,Fr.CancellationReason.Error,Fr.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(e,r,n,i,s){this.terminateMessageLoop=!0;let o=new Fr.ConversationTranslationCanceledEventArgs(n,s,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch{}}async conversationConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();let e=new Iu.Deferred;try{let n=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!n)return this.receiveConversationMessageOverride();let i=this.privConversationRequestSession.sessionId,s=n.conversationMessageType.toLowerCase(),o=!1;try{switch(s){case"info":case"participant_command":case"command":let a=Tu.CommandResponsePayload.fromJSON(n.textBody);switch(a.command.toLowerCase()){case"participantlist":let y=Tu.ParticipantsListPayloadResponse.fromJSON(n.textBody),C=y.participants.map(P=>({avatar:P.avatar,displayName:P.nickname,id:P.participantId,isHost:P.ishost,isMuted:P.ismuted,isUsingTts:P.usetts,preferredLanguage:P.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new Zt.ParticipantsListEventArgs(y.roomid,y.token,y.translateTo,y.profanityFilter,y.roomProfanityFilter,y.roomLocked,y.muteAll,C,i));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantAttributeEventArgs(a.participantId,$i.ConversationTranslatorCommandTypes.setTranslateToLanguages,a.value,i));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantAttributeEventArgs(a.participantId,$i.ConversationTranslatorCommandTypes.setProfanityFiltering,a.value,i));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantAttributeEventArgs(a.participantId,$i.ConversationTranslatorCommandTypes.setMute,a.value,i));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new Zt.MuteAllEventArgs(a.value,i));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new Fr.ConversationExpirationEventArgs(a.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantAttributeEventArgs(a.participantId,$i.ConversationTranslatorCommandTypes.setUseTTS,a.value,i));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new Zt.LockRoomEventArgs(a.value,i));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantAttributeEventArgs(a.participantId,$i.ConversationTranslatorCommandTypes.changeNickname,a.value,i));break;case"joinsession":let S=Tu.ParticipantPayloadResponse.fromJSON(n.textBody),M={avatar:S.avatar,displayName:S.nickname,id:S.participantId,isHost:S.ishost,isMuted:S.ismuted,isUsingTts:S.usetts,preferredLanguage:S.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantEventArgs(M,i));break;case"leavesession":let g={id:a.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new Zt.ParticipantEventArgs(g,i));break;case"disconnectsession":let v={id:a.participantId};break;case"token":let m=new eM.CognitiveTokenAuthentication(()=>{let P=a.token;return Promise.resolve(P)},()=>{let P=a.token;return Promise.resolve(P)});this.authentication=m,this.privConversationServiceConnector.onToken(m);break;default:break}break;case"partial":case"final":let c=Tu.SpeechResponsePayload.fromJSON(n.textBody),u=s==="final"?Fr.ResultReason.TranslatedParticipantSpeech:Fr.ResultReason.TranslatingParticipantSpeech,l=new Fr.ConversationTranslationResult(c.participantId,this.getTranslations(c.translations),c.language,c.id,u,c.recognition,void 0,void 0,n.textBody,void 0);c.isFinal?((l.text!==void 0&&l.text.length>0||c.id===this.privLastPartialUtteranceId)&&(o=!0),o&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Zt.ConversationReceivedTranslationEventArgs($i.ConversationTranslatorMessageTypes.final,l,i))):l.text!==void 0&&(this.privLastPartialUtteranceId=c.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Zt.ConversationReceivedTranslationEventArgs($i.ConversationTranslatorMessageTypes.partial,l,i)));break;case"translated_message":let d=Tu.TextResponsePayload.fromJSON(n.textBody),f=new Fr.ConversationTranslationResult(d.participantId,this.getTranslations(d.translations),d.language,void 0,void 0,d.originalText,void 0,void 0,void 0,n.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Zt.ConversationReceivedTranslationEventArgs($i.ConversationTranslatorMessageTypes.instantMessage,f,i));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return e.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;let e=this.receiveConversationMessageOverride();try{return await e}catch(r){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",Fr.CancellationReason.Error,Fr.CancellationErrorCode.RuntimeError,r),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(e=>e.state()===Iu.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(e=>e),this.privConnectionConfigPromise)}getTranslations(e){let r;if(e!==void 0){r=new Fr.Translations;for(let n of e)r.set(n.lang,n.translation)}return r}};Rv.ConversationServiceAdapter=FR});var nM=p(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.ConversationTranslatorRecognizer=ha.ConversationRecognizerFactory=void 0;var y3=O(),pa=D(),da=q(),UR=w(),S3=$x(),C3=rM(),VR=class{static fromConfig(e,r,n){return new Ev(e,r,n)}};ha.ConversationRecognizerFactory=VR;var Ev=class extends UR.Recognizer{constructor(e,r,n){let i=r;da.Contracts.throwIfNull(i,"speechConfig");let s=e;da.Contracts.throwIfNull(s,"conversationImpl"),super(n,i.properties,new S3.ConversationConnectionFactory),this.privConversation=s,this.privIsDisposed=!1,this.privProperties=i.properties.clone(),this.privConnection=UR.Connection.fromRecognizer(this),this.privProperties.getProperty(UR.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=pa.Timeout.setTimeout,this.privClearTimeout=pa.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,r,n){try{da.Contracts.throwIfDisposed(this.privIsDisposed),da.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(r,n)}catch(i){if(n)if(i instanceof Error){let s=i;n(s.name+": "+s.message)}else n(i)}}disconnect(e,r){try{da.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{e&&e()},n=>{r&&r(n)})}catch(n){if(r)if(n instanceof Error){let i=n;r(i.name+": "+i.message)}else r(n);this.dispose(!0).catch(i=>{pa.Events.instance.onEvent(new pa.BackgroundEvent(i))})}}sendRequest(e,r,n){try{da.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,r,n)}catch(i){if(n)if(i instanceof Error){let s=i;n(s.name+": "+s.message)}else n(i);this.dispose(!0).catch(s=>{pa.Events.instance.onEvent(new pa.BackgroundEvent(s))})}}onToken(e){this.privConversation.onToken(e)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(e){this.privIsDisposed||e&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(e))}createRecognizerConfig(e){return new y3.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,r,n,i){let s=n;return new C3.ConversationServiceAdapter(e,r,s,i,this)}sendMessage(e,r,n){let i=this.privReco;((o,a,c)=>{o!==void 0?o.then(()=>{try{a&&a()}catch(u){c&&c(`'Unhandled error on promise callback: ${u}'`)}},u=>{try{c&&c(u)}catch{}}):c&&c("Null promise")})(i.sendMessageAsync(e),r,n),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};ha.ConversationTranslatorRecognizer=Ev});var sM=p(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});_v.TranscriberRecognizer=void 0;var iM=D(),Ur=q(),fa=w(),WR=O(),P3=Gt(),HR=class extends fa.Recognizer{constructor(e,r){let n=e;Ur.Contracts.throwIfNull(n,"speechTranslationConfig");let i=r;Ur.Contracts.throwIfNull(i,"audioConfigImpl"),Ur.Contracts.throwIfNullOrWhitespace(n.speechRecognitionLanguage,fa.PropertyId[fa.PropertyId.SpeechServiceConnection_RecoLanguage]),super(r,n.properties,new WR.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return Ur.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(fa.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(fa.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){Ur.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(fa.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){Ur.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return Ur.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){Ur.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return Ur.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,r){(0,iM.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(P3.RecognitionMode.Conversation),e,r)}stopContinuousRecognitionAsync(e,r){(0,iM.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),e,r)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(e,r){let n=this.privReco;Ur.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),await n.sendSpeechEventAsync(e,r)}async pushMeetingEvent(e,r){let n=this.privReco;Ur.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),await n.sendMeetingSpeechEventAsync(e,r)}async enforceAudioGating(){let n=(await this.audioConfig.format).channels;if(n===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(n!==8)throw new Error(`Unsupported audio configuration: Detected ${n}-channel audio`)}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(r,n)=>{e.canceled&&e.canceled(e,n)},this.recognizing=(r,n)=>{e.transcribing&&e.transcribing(e,n)},this.recognized=(r,n)=>{e.transcribed&&e.transcribed(e,n)},this.sessionStarted=(r,n)=>{e.sessionStarted&&e.sessionStarted(e,n)},this.sessionStopped=(r,n)=>{e.sessionStopped&&e.sessionStopped(e,n)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(e){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(e))}createRecognizerConfig(e){return new WR.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,r,n,i){let s=n;return new WR.TranscriptionServiceRecognizer(e,r,s,i,this)}};_v.TranscriberRecognizer=HR});var oM=p(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.InternalParticipants=oe.ConversationTranslatorMessageTypes=oe.ConversationTranslatorCommandTypes=oe.ParticipantsListEventArgs=oe.ParticipantEventArgs=oe.ParticipantAttributeEventArgs=oe.MuteAllEventArgs=oe.LockRoomEventArgs=oe.ConversationReceivedTranslationEventArgs=oe.TranscriberRecognizer=oe.ConversationRecognizerFactory=oe.ConversationConnectionConfig=oe.ConversationManager=void 0;var w3=Ux();Object.defineProperty(oe,"ConversationManager",{enumerable:!0,get:function(){return w3.ConversationManager}});var R3=vv();Object.defineProperty(oe,"ConversationConnectionConfig",{enumerable:!0,get:function(){return R3.ConversationConnectionConfig}});var E3=nM();Object.defineProperty(oe,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return E3.ConversationRecognizerFactory}});var _3=sM();Object.defineProperty(oe,"TranscriberRecognizer",{enumerable:!0,get:function(){return _3.TranscriberRecognizer}});var va=MR();Object.defineProperty(oe,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return va.ConversationReceivedTranslationEventArgs}});Object.defineProperty(oe,"LockRoomEventArgs",{enumerable:!0,get:function(){return va.LockRoomEventArgs}});Object.defineProperty(oe,"MuteAllEventArgs",{enumerable:!0,get:function(){return va.MuteAllEventArgs}});Object.defineProperty(oe,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return va.ParticipantAttributeEventArgs}});Object.defineProperty(oe,"ParticipantEventArgs",{enumerable:!0,get:function(){return va.ParticipantEventArgs}});Object.defineProperty(oe,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return va.ParticipantsListEventArgs}});var $R=NR();Object.defineProperty(oe,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return $R.ConversationTranslatorCommandTypes}});Object.defineProperty(oe,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return $R.ConversationTranslatorMessageTypes}});Object.defineProperty(oe,"InternalParticipants",{enumerable:!0,get:function(){return $R.InternalParticipants}})});var JR=p(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.SynthesisAudioMetadata=Ls.MetadataType=void 0;var I3;(function(t){t.WordBoundary="WordBoundary",t.Bookmark="Bookmark",t.Viseme="Viseme",t.SentenceBoundary="SentenceBoundary",t.SessionEnd="SessionEnd",t.AvatarSignal="TalkingAvatarSignal"})(I3=Ls.MetadataType||(Ls.MetadataType={}));var KR=class t{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new t(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}};Ls.SynthesisAudioMetadata=KR});var cM=p(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.SynthesisStartedEvent=fn.ConnectingToSynthesisServiceEvent=fn.SynthesisTriggeredEvent=fn.SpeechSynthesisEvent=void 0;var aM=D(),ga=class extends aM.PlatformEvent{constructor(e,r,n=aM.EventType.Info){super(e,n),this.privRequestId=r}get requestId(){return this.privRequestId}};fn.SpeechSynthesisEvent=ga;var GR=class extends ga{constructor(e,r,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};fn.SynthesisTriggeredEvent=GR;var QR=class extends ga{constructor(e,r){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}};fn.ConnectingToSynthesisServiceEvent=QR;var XR=class extends ga{constructor(e,r){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}};fn.SynthesisStartedEvent=XR});var uM=p(Av=>{"use strict";Object.defineProperty(Av,"__esModule",{value:!0});Av.SynthesisTurn=void 0;var Iv=D(),T3=Ss(),Tv=w(),A3=JR(),YR=cM(),ZR=class t{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,Iv.createNoDashGuid)(),this.privTurnDeferral=new Iv.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){let e=new Tv.PropertyCollection;return e.setProperty(Tv.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){let e=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(e,r,n,i){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=r,this.privIsSSML=n,this.privAudioOutputStream=new T3.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",i!==void 0&&(this.privTurnAudioDestination=i,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new YR.SynthesisTriggeredEvent(this.requestId,void 0,i===void 0?void 0:i.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new YR.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(e===200){this.onEvent(new YR.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else e===403&&this.onComplete()}onServiceResponseMessage(e){let r=JSON.parse(e);this.streamId=r.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Iv.Deferred;let r=JSON.parse(e);r.webrtc&&(this.privWebRTCSDP=r.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){e.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}async constructSynthesisResult(){let e=await this.getAllReceivedAudioWithHeader();return new Tv.SpeechSynthesisResult(this.requestId,Tv.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){let e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){Iv.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&e[0]==="<"&&e[e.length-1]===">"}updateTextOffset(e,r){r===A3.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!t.isXmlTag(e)&&this.updateTextOffset(e,r))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!t.isXmlTag(e)&&this.updateTextOffset(e,r)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}};Av.SynthesisTurn=ZR});var lM=p(bv=>{"use strict";Object.defineProperty(bv,"__esModule",{value:!0});bv.SynthesisAdapterBase=void 0;var yt=D(),er=w(),Pr=O(),ma=xs(),kv=class{constructor(e,r,n,i){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new yt.ArgumentNullError("authentication");if(!r)throw new yt.ArgumentNullError("connectionFactory");if(!n)throw new yt.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=r,this.privSynthesizerConfig=n,this.privIsDisposed=!1,this.privSessionAudioDestination=i,this.privSynthesisTurn=new Pr.SynthesisTurn,this.privConnectionEvents=new yt.EventSource,this.privServiceEvents=new yt.EventSource,this.privSynthesisContext=new Pr.SynthesisContext,this.privAgentConfig=new Pr.AgentConfig,this.connectionEvents.attach(s=>{if(s.name==="ConnectionClosedEvent"){let o=s;o.statusCode!==1e3&&this.cancelSynthesisLocal(er.CancellationReason.Error,o.statusCode===1007?er.CancellationErrorCode.BadRequestParameters:er.CancellationErrorCode.ConnectionFailure,`${o.reason} websocket error code: ${o.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=e),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}async dispose(e){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(e)}async connect(){await this.connectImpl()}async sendNetworkMessage(e,r){let n=typeof r=="string"?yt.MessageType.Text:yt.MessageType.Binary,i=typeof r=="string"?"application/json":"";return(await this.fetchConnection()).send(new ma.SpeechConnectionMessage(n,e,this.privSynthesisTurn.requestId,i,r))}async Speak(e,r,n,i,s,o){let a;if(r?a=e:a=this.privSynthesizer.buildSsml(e),this.speakOverride!==void 0)return this.speakOverride(a,n,i,s);this.privSuccessCallback=i,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(n,e,r,o);try{await this.connectImpl();let c=await this.fetchConnection();await this.sendSynthesisContext(c),await this.sendSsmlMessage(c,a,n),this.onSynthesisStarted(n),this.receiveMessage()}catch(c){return this.cancelSynthesisLocal(er.CancellationReason.Error,er.CancellationErrorCode.ConnectionFailure,c),Promise.reject(c)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new ma.SpeechConnectionMessage(yt.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(e,r,n,i){let s=new er.PropertyCollection;s.setProperty(Pr.CancellationErrorCodePropertyName,er.CancellationErrorCode[n]);let o=new er.SpeechSynthesisResult(e,er.ResultReason.Canceled,void 0,i,s);if(this.onSynthesisCancelled(o),this.privSuccessCallback)try{this.privSuccessCallback(o)}catch{}}cancelSynthesisLocal(e,r,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,r,n))}processTypeSpecificMessages(e){return!0}async receiveMessage(){try{let r=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!r)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;let n=ma.SpeechConnectionMessage.fromConnectionMessage(r);if(n.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(n.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(n.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===n.streamId.toLowerCase()&&n.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(n.binaryBody),this.onSynthesizing(n.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(n.binaryBody));break;case"audio.metadata":let i=Pr.SynthesisAudioMetadata.fromJSON(n.textBody).Metadata;for(let o of i)switch(o.Type){case Pr.MetadataType.WordBoundary:case Pr.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(o);let a=new er.SpeechSynthesisWordBoundaryEventArgs(o.Data.Offset,o.Data.Duration,o.Data.text.Text,o.Data.text.Length,o.Type===Pr.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,o.Data.text.BoundaryType);this.onWordBoundary(a);break;case Pr.MetadataType.Bookmark:let c=new er.SpeechSynthesisBookmarkEventArgs(o.Data.Offset,o.Data.Bookmark);this.onBookmarkReached(c);break;case Pr.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(o),o.Data.IsLastAnimation){let u=new er.SpeechSynthesisVisemeEventArgs(o.Data.Offset,o.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(u)}break;case Pr.MetadataType.AvatarSignal:this.onAvatarEvent(o);break;case Pr.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(o);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let s;try{s=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(s)}catch(o){this.privErrorCallback&&this.privErrorCallback(o)}this.onSynthesisCompleted(s);break;default:this.processTypeSpecificMessages(n)||this.privServiceEvents&&this.serviceEvents.onEvent(new yt.ServiceEvent(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();let r=this.synthesisContext.toJSON();if(r)return e.send(new ma.SpeechConnectionMessage(yt.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",r))}setSpeechConfigSynthesisSection(){}connectImpl(e=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(n=>n.state()===yt.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,yt.createNoDashGuid)(),this.privConnectionId=(0,yt.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);let r=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=r.then(async n=>{this.privSynthesisTurn.onAuthCompleted(!1);let i=await this.privConnectionFactory.create(this.privSynthesizerConfig,n,this.privConnectionId);i.events.attach(o=>{this.connectionEvents.onEvent(o)});let s=await i.open();return s.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(i)):s.statusCode===403&&!e?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(s.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${s.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(er.PropertyId.SpeechServiceConnection_Url)} Reason: ${s.reason}`))},n=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(n)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(e,r){if(r)return e.send(new ma.SpeechConnectionMessage(yt.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",r))}sendSsmlMessage(e,r,n){return e.send(new ma.SpeechConnectionMessage(yt.MessageType.Text,"ssml",n,"application/ssml+xml",r))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(e=>e.state()===yt.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){let e=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}};bv.SynthesisAdapterBase=kv;kv.telemetryDataEnabled=!0});var dM=p(Ov=>{"use strict";Object.defineProperty(Ov,"__esModule",{value:!0});Ov.AvatarSynthesisAdapter=void 0;var pM=w(),k3=O(),eE=class extends k3.SynthesisAdapterBase{constructor(e,r,n,i,s){super(e,r,n,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=s}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(pM.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){let r=new pM.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,r)}catch{}}}};Ov.AvatarSynthesisAdapter=eE});var hM=p(xv=>{"use strict";Object.defineProperty(xv,"__esModule",{value:!0});xv.SpeechSynthesisAdapter=void 0;var Ki=w(),b3=O(),tE=class extends b3.SynthesisAdapterBase{constructor(e,r,n,i,s){super(e,r,n,s),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){let r=new Ki.SpeechSynthesisEventArgs(new Ki.SpeechSynthesisResult(e,Ki.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,r)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{let r=this.privSynthesisTurn.audioOutputFormat.addHeader(e),n=new Ki.SpeechSynthesisEventArgs(new Ki.SpeechSynthesisResult(this.privSynthesisTurn.requestId,Ki.ResultReason.SynthesizingAudio,r));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,n)}catch{}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){let r=new Ki.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,r)}catch{}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new Ki.SpeechSynthesisEventArgs(e))}catch{}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch{}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch{}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch{}}};xv.SpeechSynthesisAdapter=tE});var fM=p(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});Mv.SynthesisRestAdapter=void 0;var rE=je(),nE=w(),O3=fr(),x3=ht(),iE=class{constructor(e,r){let n=e.parameters.getProperty(nE.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!n){let s=e.parameters.getProperty(nE.PropertyId.SpeechServiceConnection_Region,"westus"),o=O3.ConnectionFactoryBase.getHostSuffix(s);n=e.parameters.getProperty(nE.PropertyId.SpeechServiceConnection_Host,`https://${s}.tts.speech${o}`)}this.privUri=`${n}/cognitiveservices/voices/list`;let i=rE.RestConfigBase.requestOptions;this.privRestAdapter=new rE.RestMessageAdapter(i),this.privAuthentication=r}getVoicesList(e){return this.privRestAdapter.setHeaders(x3.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then(r=>(this.privRestAdapter.setHeaders(r.headerName,r.token),this.privRestAdapter.request(rE.RestRequestType.Get,this.privUri)))}};Mv.SynthesisRestAdapter=iE});var mM=p(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.SynthesizerConfig=qs.SynthesisServiceType=void 0;var vM=O(),gM;(function(t){t[t.Standard=0]="Standard",t[t.Custom=1]="Custom"})(gM=qs.SynthesisServiceType||(qs.SynthesisServiceType={}));var sE=class{constructor(e,r){this.privSynthesisServiceType=gM.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new vM.SpeechServiceConfig(new vM.Context(null)),this.privParameters=r}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(e){let r=JSON.parse(e);r.system&&(this.privSpeechServiceConfig.Context.system=r.system),r.os&&(this.privSpeechServiceConfig.Context.os=r.os),r.audio&&(this.privSpeechServiceConfig.Context.audio=r.audio),r.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=r.synthesis)}};qs.SynthesizerConfig=sE});var yM=p(Dv=>{"use strict";Object.defineProperty(Dv,"__esModule",{value:!0});Dv.SynthesisContext=void 0;var oE=w(),aE=class{constructor(){this.privContext={}}setSection(e,r){this.privContext[e]=r}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){let r=this.buildSynthesisContext(e);this.setSection("synthesis",r)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!!e?.bookmarkReached,punctuationBoundaryEnabled:e?.properties.getProperty(oE.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!e?.wordBoundary),sentenceBoundaryEnabled:e?.properties.getProperty(oE.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!e?.visemeReceived,wordBoundaryEnabled:e?.properties.getProperty(oE.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!e?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:e?.autoDetectSourceLanguage}}}};Dv.SynthesisContext=aE});var SM=p(Nv=>{"use strict";Object.defineProperty(Nv,"__esModule",{value:!0});Nv.SpeakerRecognitionConfig=void 0;var M3=O(),cE=class{constructor(e,r){this.privContext=e||new M3.Context(null),this.privParameters=r}get parameters(){return this.privParameters}get Context(){return this.privContext}};Nv.SpeakerRecognitionConfig=cE});var PM=p(jv=>{"use strict";Object.defineProperty(jv,"__esModule",{value:!0});jv.SpeakerServiceRecognizer=void 0;var D3=je(),zv=D(),nt=w(),CM=O(),N3=xs(),uE=class extends CM.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privSpeakerRecognizer=s,this.privSpeakerAudioSource=n,this.recognizeSpeaker=o=>this.recognizeSpeakerOnce(o),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let r=!1,n=new nt.PropertyCollection;switch(e.messageType===zv.MessageType.Text&&n.setProperty(nt.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.response":let s=JSON.parse(e.textBody),o;s.status.statusCode.toLowerCase()!=="success"?o=new nt.SpeakerRecognitionResult(s,nt.ResultReason.Canceled,nt.CancellationErrorCode.ServiceError,s.status.reason):o=new nt.SpeakerRecognitionResult(s,nt.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(o),r=!0;break;default:break}let i=new zv.Deferred;return i.resolve(r),i.promise}cancelRecognition(e,r,n,i,s){if(new nt.PropertyCollection().setProperty(CM.CancellationErrorCodePropertyName,nt.CancellationErrorCode[i]),this.privResultDeferral){let a=new nt.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:s,reason:s}},nt.ResultReason.Canceled,i,s);try{this.privResultDeferral.resolve(a)}catch(c){this.privResultDeferral.reject(c)}}}async recognizeSpeakerOnce(e){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new zv.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(nt.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let r=this.connectImpl(),n=this.sendPreAudioMessages(this.extractSpeakerContext(e)),i=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),s=await this.privSpeakerAudioSource.format,o=await this.privSpeakerAudioSource.deviceInfo,a=new D3.ReplayableAudioNode(i,s.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(a,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:o};try{await r,await n}catch(l){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,nt.CancellationReason.Error,nt.CancellationErrorCode.ConnectionFailure,l)}let c=new nt.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage(),this.sendAudio(a).then(()=>{},l=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,nt.CancellationReason.Error,nt.CancellationErrorCode.RuntimeError,l)}),this.privResultDeferral.promise}async sendPreAudioMessages(e){let r=await this.fetchConnection();await this.sendSpeakerRecognition(r,e)}async sendSpeakerRecognition(e,r){let n=JSON.stringify(r);return e.send(new N3.SpeechConnectionMessage(zv.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",n))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}};jv.SpeakerServiceRecognizer=uE});var RM=p(Lv=>{"use strict";Object.defineProperty(Lv,"__esModule",{value:!0});Lv.VoiceServiceRecognizer=void 0;var z3=je(),vn=D(),ie=w(),wM=O(),lE=xs(),pE=class extends wM.ServiceRecognizerBase{constructor(e,r,n,i,s){super(e,r,n,i,s),this.privDeferralMap=new vn.DeferralMap,this.privSpeakerAudioSource=n,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let r=!1,n=new ie.PropertyCollection;switch(e.messageType===vn.MessageType.Text&&n.setProperty(ie.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":let s=JSON.parse(e.textBody);switch(s.operation.toLowerCase()){case"create":this.handleCreateResponse(s,e.requestId);break;case"delete":case"reset":this.handleResultResponse(s,e.requestId);break;case"fetch":let u=JSON.parse(e.textBody);this.handleFetchResponse(u,e.requestId);break;default:break}r=!0;break;case"speaker.phrases":let o=JSON.parse(e.textBody);this.handlePhrasesResponse(o,e.requestId),r=!0;break;case"speaker.profile.enrollment":let a=JSON.parse(e.textBody),c=new ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(a.enrollment?a.enrollment.enrollmentStatus:a.status.statusCode),a.enrollment?JSON.stringify(a.enrollment):void 0,a.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,c),this.privRequestSession.onSpeechEnded(),r=!0;break;default:break}let i=new vn.Deferred;return i.resolve(r),i.promise}cancelRecognition(e,r,n,i,s){new ie.PropertyCollection().setProperty(wM.CancellationErrorCodePropertyName,ie.CancellationErrorCode[i]);let a=new ie.VoiceProfileEnrollmentResult(ie.ResultReason.Canceled,s,s);this.privDeferralMap.getId(r)&&this.privDeferralMap.complete(r,a)}async createProfile(e,r){this.voiceProfileType=e.toString();let n=this.connectImpl();try{let i=new vn.Deferred;return await n,await this.sendCreateProfile(i,e,r),this.receiveMessage(),i.promise}catch(i){throw i}}async resetProfile(e){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)}async deleteProfile(e){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)}async retrieveEnrollmentResult(e){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)}async getAllProfiles(e){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)}async getActivationPhrases(e,r){this.voiceProfileType=e.toString();let n=this.connectImpl();try{let i=new vn.Deferred;return await n,await this.sendPhrasesRequest(i,e,r),this.receiveMessage(),i.promise}catch(i){throw i}}async enrollProfile(e){this.voiceProfileType=e.profileType.toString();let r=new vn.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(ie.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);let n=this.connectImpl(),i=this.sendPreAudioMessages(e,r),s=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),o=await this.privSpeakerAudioSource.format,a=await this.privSpeakerAudioSource.deviceInfo,c=new z3.ReplayableAudioNode(s,o.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:a};try{await n,await i}catch(d){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ie.CancellationReason.Error,ie.CancellationErrorCode.ConnectionFailure,d)}let u=new ie.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage(),this.sendAudio(c).then(()=>{},d=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,ie.CancellationReason.Error,ie.CancellationErrorCode.RuntimeError,d)}),r.promise}async sendPreAudioMessages(e,r){let n=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,r),await this.sendBaseRequest(n,"enroll",this.scenarioFrom(e.profileType),e)}async sendPhrasesRequest(e,r,n){let i=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let s=this.scenarioFrom(r),o={locale:n,scenario:s};return i.send(new lE.SpeechConnectionMessage(vn.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))}async sendCreateProfile(e,r,n){let i=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);let s=r===ie.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":r===ie.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",o={locale:n,number:"1",scenario:s};return i.send(new lE.SpeechConnectionMessage(vn.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))}async sendCommonRequest(e,r,n=void 0){let i=this.connectImpl();try{let s=new vn.Deferred;this.privRequestSession.onSpeechContext(),await i;let o=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,s),await this.sendBaseRequest(o,e,this.scenarioFrom(r),n),this.receiveMessage(),s.promise}catch(s){throw s}}async sendBaseRequest(e,r,n,i){let s={scenario:n};return i?s.profileIds=[i.profileId]:s.maxPageSize=-1,e.send(new lE.SpeechConnectionMessage(vn.MessageType.Text,`speaker.profile.${r}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,r){if(this.privDeferralMap.getId(r))if(e.status.statusCode.toLowerCase()!=="success"){let n=ie.ResultReason.Canceled,i=new ie.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(r,i)}else if(e.phrases&&e.phrases.length>0){let n=ie.ResultReason.EnrollingVoiceProfile,i=new ie.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(r,i)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${r} not found`)}handleCreateResponse(e,r){if(e.profiles&&e.profiles.length>0)if(this.privDeferralMap.getId(r)){let n=e.profiles.map(i=>i.profileId);this.privDeferralMap.complete(r,n)}else throw new Error(`Voice Profile create request for requestID ${r} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(e,r){if(this.privDeferralMap.getId(r)){let n=e.operation.toLowerCase()==="delete"?ie.ResultReason.DeletedVoiceProfile:ie.ResultReason.ResetVoiceProfile,i=e.status.statusCode.toLowerCase()==="success"?n:ie.ResultReason.Canceled,s=new ie.VoiceProfileResult(i,`statusCode: ${e.status.statusCode}, errorDetails: ${e.status.reason}`);this.privDeferralMap.complete(r,s)}else throw new Error(`Voice Profile create request for requestID ${r} not found`)}handleFetchResponse(e,r){if(this.privDeferralMap.getId(r)&&e.profiles[0]){if(this.privExpectedProfileId&&e.profiles.length===1&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;let n=e.profiles[0],i=new ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(n.enrollmentStatus),JSON.stringify(n),e.status.reason);this.privDeferralMap.complete(r,i)}else if(e.profiles.length>0){let n=e.profiles,i=[];for(let s of n)i.push(new ie.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(s.enrollmentStatus),JSON.stringify(s),e.status.reason));this.privDeferralMap.complete(r,i)}}else throw new Error(`Voice Profile fetch request for requestID ${r} not found`)}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return ie.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return ie.ResultReason.Canceled;default:return ie.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===ie.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===ie.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};Lv.VoiceServiceRecognizer=pE});var EM=p(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.type=Ve.connectivity=Ve.Device=Ve.OS=Ve.System=Ve.Context=Ve.SpeechServiceConfig=void 0;var dE=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,(e,r)=>{if(r&&typeof r=="object"&&!Array.isArray(r)){let n={};for(let i in r)Object.hasOwnProperty.call(r,i)&&(n[i&&i.charAt(0).toLowerCase()+i.substring(1)]=r[i]);return n}return r})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};Ve.SpeechServiceConfig=dE;var hE=class{constructor(e){this.system=new qv,this.os=e}};Ve.Context=hE;var qv=class{constructor(){let e="1.45.0";this.name="SpeechSDK",this.version=e,this.build="JavaScript",this.lang="JavaScript"}};Ve.System=qv;var fE=class{constructor(e,r,n){this.platform=e,this.name=r,this.version=n}};Ve.OS=fE;var vE=class{constructor(e,r,n){this.manufacturer=e,this.model=r,this.version=n}};Ve.Device=vE;var j3;(function(t){t.Bluetooth="Bluetooth",t.Wired="Wired",t.WiFi="WiFi",t.Cellular="Cellular",t.InBuilt="InBuilt",t.Unknown="Unknown"})(j3=Ve.connectivity||(Ve.connectivity={}));var L3;(function(t){t.Phone="Phone",t.Speaker="Speaker",t.Car="Car",t.Headset="Headset",t.Thermostat="Thermostat",t.Microphones="Microphones",t.Deskphone="Deskphone",t.RemoteControl="RemoteControl",t.Unknown="Unknown",t.File="File",t.Stream="Stream"})(L3=Ve.type||(Ve.type={}))});var O=p(_=>{"use strict";var q3=_&&_.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),N=_&&_.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&q3(e,t,r)};Object.defineProperty(_,"__esModule",{value:!0});_.AutoDetectSourceLanguagesOpenRangeOptionName=_.ForceDictationPropertyName=_.ServicePropertiesPropertyName=_.CancellationErrorCodePropertyName=_.OutputFormatPropertyName=_.SpeechSynthesisAdapter=_.AvatarSynthesisAdapter=void 0;N(oA(),_);N(lA(),_);N(Gp(),_);N(dA(),_);N(fA(),_);N(hO(),_);N(mO(),_);N(bf(),_);N(bO(),_);N(OO(),_);N(MO(),_);N(NO(),_);N(jO(),_);N(FO(),_);N(VO(),_);N(KO(),_);N(XO(),_);N(lw(),_);N(YO(),_);N(ZO(),_);N(tx(),_);N(nx(),_);N(ox(),_);N(cx(),_);N(ux(),_);N(lx(),_);N(px(),_);N(dx(),_);N(fx(),_);N(gx(),_);N(yx(),_);N(Cx(),_);N(Px(),_);N(Rx(),_);N(Ex(),_);N(Ix(),_);N(kx(),_);N(Ox(),_);N(Mx(),_);N(Bx(),_);N(Fx(),_);N(oM(),_);N(JR(),_);N(uM(),_);N(lM(),_);var B3=dM();Object.defineProperty(_,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return B3.AvatarSynthesisAdapter}});var F3=hM();Object.defineProperty(_,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return F3.SpeechSynthesisAdapter}});N(fM(),_);N(mM(),_);N(yM(),_);N(SM(),_);N(PM(),_);N(RM(),_);N(EM(),_);_.OutputFormatPropertyName="OutputFormat";_.CancellationErrorCodePropertyName="CancellationErrorCode";_.ServicePropertiesPropertyName="ServiceProperties";_.ForceDictationPropertyName="ForceDictation";_.AutoDetectSourceLanguagesOpenRangeOptionName="UND"});var _M=p(Bs=>{"use strict";var U3=Bs&&Bs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),V3=Bs&&Bs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&U3(e,t,r)};Object.defineProperty(Bs,"__esModule",{value:!0});var W3=O();new W3.AgentConfig;V3(w(),Bs)});var pD=p((bK,lD)=>{"use strict";var cU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";lD.exports=cU});var vD=p((OK,fD)=>{"use strict";var uU=pD();function dD(){}function hD(){}hD.resetWarningCache=dD;fD.exports=function(){function t(n,i,s,o,a,c){if(c!==uU){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hD,resetWarningCache:dD};return r.PropTypes=r,r}});var bu=p((DK,gD)=>{gD.exports=vD()();var xK,MK});var RD=p(Xv=>{"use strict";var mU=rr(),yU=Symbol.for("react.element"),SU=Symbol.for("react.fragment"),CU=Object.prototype.hasOwnProperty,PU=mU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wU={key:!0,ref:!0,__self:!0,__source:!0};function wD(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)CU.call(e,n)&&!wU.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:yU,type:t,key:s,ref:o,props:i,_owner:PU.current}}Xv.Fragment=SU;Xv.jsx=wD;Xv.jsxs=wD});var ju=p((LK,ED)=>{"use strict";ED.exports=RD()});var WK=Me(rr()),_D=Me(CT());var Xz=!1;function Yz(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Zz(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var PT=function(){function t(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!Xz:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Zz(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Yz(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},t}();var Ge="-ms-",gc="-moz-",Y="-webkit-",op="comm",wo="rule",Ro="decl";var wT="@import";var ap="@keyframes";var RT="@layer";var ET=Math.abs,ps=String.fromCharCode,_T=Object.assign;function IT(t,e){return Ee(t,0)^45?(((e<<2^Ee(t,0))<<2^Ee(t,1))<<2^Ee(t,2))<<2^Ee(t,3):0}function cp(t){return t.trim()}function my(t,e){return(t=e.exec(t))?t[0]:t}function J(t,e,r){return t.replace(e,r)}function mc(t,e){return t.indexOf(e)}function Ee(t,e){return t.charCodeAt(e)|0}function yi(t,e,r){return t.slice(e,r)}function Rt(t){return t.length}function Eo(t){return t.length}function _o(t,e){return e.push(t),t}function yy(t,e){return t.map(e).join("")}var up=1,Io=1,TT=0,Et=0,ke=0,Ao="";function yc(t,e,r,n,i,s,o){return{value:t,root:e,parent:r,type:n,props:i,children:s,line:up,column:Io,length:o,return:""}}function ko(t,e){return _T(yc("",null,null,"",null,null,0),t,{length:-t.length},e)}function AT(){return ke}function kT(){return ke=Et>0?Ee(Ao,--Et):0,Io--,ke===10&&(Io=1,up--),ke}function _t(){return ke=Et<TT?Ee(Ao,Et++):0,Io++,ke===10&&(Io=1,up++),ke}function lr(){return Ee(Ao,Et)}function Sc(){return Et}function bo(t,e){return yi(Ao,t,e)}function To(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lp(t){return up=Io=1,TT=Rt(Ao=t),Et=0,[]}function pp(t){return Ao="",t}function Oo(t){return cp(bo(Et-1,Sy(t===91?t+2:t===40?t+1:t)))}function bT(t){for(;(ke=lr())&&ke<33;)_t();return To(t)>2||To(ke)>3?"":" "}function OT(t,e){for(;--e&&_t()&&!(ke<48||ke>102||ke>57&&ke<65||ke>70&&ke<97););return bo(t,Sc()+(e<6&&lr()==32&&_t()==32))}function Sy(t){for(;_t();)switch(ke){case t:return Et;case 34:case 39:t!==34&&t!==39&&Sy(ke);break;case 40:t===41&&Sy(t);break;case 92:_t();break}return Et}function xT(t,e){for(;_t()&&t+ke!==57;)if(t+ke===84&&lr()===47)break;return"/*"+bo(e,Et-1)+"*"+ps(t===47?t:_t())}function MT(t){for(;!To(lr());)_t();return bo(t,Et)}function zT(t){return pp(dp("",null,null,null,[""],t=lp(t),0,[0],t))}function dp(t,e,r,n,i,s,o,a,c){for(var u=0,l=0,d=o,f=0,y=0,C=0,S=1,M=1,g=1,v=0,m="",P=i,I=s,x=n,E=m;M;)switch(C=v,v=_t()){case 40:if(C!=108&&Ee(E,d-1)==58){mc(E+=J(Oo(v),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:E+=Oo(v);break;case 9:case 10:case 13:case 32:E+=bT(C);break;case 92:E+=OT(Sc()-1,7);continue;case 47:switch(lr()){case 42:case 47:_o(ej(xT(_t(),Sc()),e,r),c);break;default:E+="/"}break;case 123*S:a[u++]=Rt(E)*g;case 125*S:case 59:case 0:switch(v){case 0:case 125:M=0;case 59+l:g==-1&&(E=J(E,/\f/g,"")),y>0&&Rt(E)-d&&_o(y>32?NT(E+";",n,r,d-1):NT(J(E," ","")+";",n,r,d-2),c);break;case 59:E+=";";default:if(_o(x=DT(E,e,r,u,l,i,a,m,P=[],I=[],d),s),v===123)if(l===0)dp(E,e,x,x,P,s,d,a,I);else switch(f===99&&Ee(E,3)===110?100:f){case 100:case 108:case 109:case 115:dp(t,x,x,n&&_o(DT(t,x,x,0,0,i,a,m,i,P=[],d),I),i,I,d,a,n?P:I);break;default:dp(E,x,x,x,[""],I,0,a,I)}}u=l=y=0,S=g=1,m=E="",d=o;break;case 58:d=1+Rt(E),y=C;default:if(S<1){if(v==123)--S;else if(v==125&&S++==0&&kT()==125)continue}switch(E+=ps(v),v*S){case 38:g=l>0?1:(E+="\f",-1);break;case 44:a[u++]=(Rt(E)-1)*g,g=1;break;case 64:lr()===45&&(E+=Oo(_t())),f=lr(),l=d=Rt(m=E+=MT(Sc())),v++;break;case 45:C===45&&Rt(E)==2&&(S=0)}}return s}function DT(t,e,r,n,i,s,o,a,c,u,l){for(var d=i-1,f=i===0?s:[""],y=Eo(f),C=0,S=0,M=0;C<n;++C)for(var g=0,v=yi(t,d+1,d=ET(S=o[C])),m=t;g<y;++g)(m=cp(S>0?f[g]+" "+v:J(v,/&\f/g,f[g])))&&(c[M++]=m);return yc(t,e,r,i===0?wo:a,c,u,l)}function ej(t,e,r){return yc(t,e,r,op,ps(AT()),yi(t,2,-2),0)}function NT(t,e,r,n){return yc(t,e,r,Ro,yi(t,0,n),yi(t,n+1,-1),n)}function ds(t,e){for(var r="",n=Eo(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function jT(t,e,r,n){switch(t.type){case RT:if(t.children.length)break;case wT:case Ro:return t.return=t.return||t.value;case op:return"";case ap:return t.return=t.value+"{"+ds(t.children,n)+"}";case wo:t.value=t.props.join(",")}return Rt(r=ds(t.children,n))?t.return=t.value+"{"+r+"}":""}function LT(t){var e=Eo(t);return function(r,n,i,s){for(var o="",a=0;a<e;a++)o+=t[a](r,n,i,s)||"";return o}}function qT(t){return function(e){e.root||(e=e.return)&&t(e)}}function BT(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var tj=function(e,r,n){for(var i=0,s=0;i=s,s=lr(),i===38&&s===12&&(r[n]=1),!To(s);)_t();return bo(e,Et)},rj=function(e,r){var n=-1,i=44;do switch(To(i)){case 0:i===38&&lr()===12&&(r[n]=1),e[n]+=tj(Et-1,r,n);break;case 2:e[n]+=Oo(i);break;case 4:if(i===44){e[++n]=lr()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=ps(i)}while(i=_t());return e},nj=function(e,r){return pp(rj(lp(e),r))},FT=new WeakMap,ij=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!FT.get(n))&&!i){FT.set(e,!0);for(var s=[],o=nj(r,s),a=n.props,c=0,u=0;c<o.length;c++)for(var l=0;l<a.length;l++,u++)e.props[u]=s[c]?o[c].replace(/&\f/g,a[l]):a[l]+" "+o[c]}}},sj=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function UT(t,e){switch(IT(t,e)){case 5103:return Y+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Y+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Y+t+gc+t+Ge+t+t;case 6828:case 4268:return Y+t+Ge+t+t;case 6165:return Y+t+Ge+"flex-"+t+t;case 5187:return Y+t+J(t,/(\w+).+(:[^]+)/,Y+"box-$1$2"+Ge+"flex-$1$2")+t;case 5443:return Y+t+Ge+"flex-item-"+J(t,/flex-|-self/,"")+t;case 4675:return Y+t+Ge+"flex-line-pack"+J(t,/align-content|flex-|-self/,"")+t;case 5548:return Y+t+Ge+J(t,"shrink","negative")+t;case 5292:return Y+t+Ge+J(t,"basis","preferred-size")+t;case 6060:return Y+"box-"+J(t,"-grow","")+Y+t+Ge+J(t,"grow","positive")+t;case 4554:return Y+J(t,/([^-])(transform)/g,"$1"+Y+"$2")+t;case 6187:return J(J(J(t,/(zoom-|grab)/,Y+"$1"),/(image-set)/,Y+"$1"),t,"")+t;case 5495:case 3959:return J(t,/(image-set\([^]*)/,Y+"$1$`$1");case 4968:return J(J(t,/(.+:)(flex-)?(.*)/,Y+"box-pack:$3"+Ge+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Y+t+t;case 4095:case 3583:case 4068:case 2532:return J(t,/(.+)-inline(.+)/,Y+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Rt(t)-1-e>6)switch(Ee(t,e+1)){case 109:if(Ee(t,e+4)!==45)break;case 102:return J(t,/(.+:)(.+)-([^]+)/,"$1"+Y+"$2-$3$1"+gc+(Ee(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~mc(t,"stretch")?UT(J(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ee(t,e+1)!==115)break;case 6444:switch(Ee(t,Rt(t)-3-(~mc(t,"!important")&&10))){case 107:return J(t,":",":"+Y)+t;case 101:return J(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Y+(Ee(t,14)===45?"inline-":"")+"box$3$1"+Y+"$2$3$1"+Ge+"$2box$3")+t}break;case 5936:switch(Ee(t,e+11)){case 114:return Y+t+Ge+J(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Y+t+Ge+J(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Y+t+Ge+J(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Y+t+Ge+t+t}return t}var oj=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case Ro:e.return=UT(e.value,e.length);break;case ap:return ds([ko(e,{value:J(e.value,"@","@"+Y)})],i);case wo:if(e.length)return yy(e.props,function(s){switch(my(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ds([ko(e,{props:[J(s,/:(read-\w+)/,":"+gc+"$1")]})],i);case"::placeholder":return ds([ko(e,{props:[J(s,/:(plac\w+)/,":"+Y+"input-$1")]}),ko(e,{props:[J(s,/:(plac\w+)/,":"+gc+"$1")]}),ko(e,{props:[J(s,/:(plac\w+)/,Ge+"input-$1")]})],i)}return""})}},aj=[oj],VT=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(S){var M=S.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var i=e.stylisPlugins||aj,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(S){for(var M=S.getAttribute("data-emotion").split(" "),g=1;g<M.length;g++)s[M[g]]=!0;a.push(S)});var c,u=[ij,sj];{var l,d=[jT,qT(function(S){l.insert(S)})],f=LT(u.concat(i,d)),y=function(M){return ds(zT(M),f)};c=function(M,g,v,m){l=v,y(M?M+"{"+g.styles+"}":g.styles),m&&(C.inserted[g.name]=!0)}}var C={key:r,sheet:new PT({key:r,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:c};return C.sheet.hydrate(a),C};function WT(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var HT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var cj=!1,uj=/[A-Z]|^ms/g,lj=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GT=function(e){return e.charCodeAt(1)===45},$T=function(e){return e!=null&&typeof e!="boolean"},Cy=BT(function(t){return GT(t)?t:t.replace(uj,"-$&").toLowerCase()}),KT=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(lj,function(n,i,s){return Zr={name:i,styles:s,next:Zr},i})}return HT[e]!==1&&!GT(e)&&typeof r=="number"&&r!==0?r+"px":r},pj="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Cc(t,e,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Zr={name:i.name,styles:i.styles,next:Zr},i.name;var s=r;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Zr={name:o.name,styles:o.styles,next:Zr},o=o.next;var a=s.styles+";";return a}return dj(t,e,r)}case"function":{if(t!==void 0){var c=Zr,u=r(t);return Zr=c,Cc(t,e,u)}break}}var l=r;if(e==null)return l;var d=e[l];return d!==void 0?d:l}function dj(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Cc(t,e,r[i])+";";else for(var s in r){var o=r[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?n+=s+"{"+e[a]+"}":$T(a)&&(n+=Cy(s)+":"+KT(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&cj)throw new Error(pj);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var c=0;c<o.length;c++)$T(o[c])&&(n+=Cy(s)+":"+KT(s,o[c])+";");else{var u=Cc(t,e,o);switch(s){case"animation":case"animationName":{n+=Cy(s)+":"+u+";";break}default:n+=s+"{"+u+"}"}}}}return n}var JT=/label:\s*([^\s;{]+)\s*(;|$)/g,Zr;function hp(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,i="";Zr=void 0;var s=t[0];if(s==null||s.raw===void 0)n=!1,i+=Cc(r,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=Cc(r,e,t[a]),n){var c=s;i+=c[a]}JT.lastIndex=0;for(var u="",l;(l=JT.exec(i))!==null;)u+="-"+l[1];var d=WT(i)+u;return{name:d,styles:i,next:Zr}}var hj=!0;function Py(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(n+=i+" ")}),n}var fj=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||hj===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},QT=function(e,r,n){fj(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var s=r;do e.insert(r===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function XT(t,e){if(t.inserted[e.name]===void 0)return t.insert("",e,t.sheet,!0)}function YT(t,e,r){var n=[],i=Py(t,n,r);return n.length<2?r:i+e(n)}var ZT=function(e){var r=VT(e);r.sheet.speedy=function(a){this.isSpeedy=a},r.compat=!0;var n=function(){for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];var d=hp(u,r.registered,void 0);return QT(r,d,!1),r.key+"-"+d.name},i=function(){for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];var d=hp(u,r.registered),f="animation-"+d.name;return XT(r,{name:d.name,styles:"@keyframes "+f+"{"+d.styles+"}"}),f},s=function(){for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];var d=hp(u,r.registered);XT(r,d)},o=function(){for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return YT(r.registered,n,vj(u))};return{css:n,cx:o,injectGlobal:s,keyframes:i,hydrate:function(c){c.forEach(function(u){r.inserted[u]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:Py.bind(null,r.registered),merge:YT.bind(null,r.registered,n)}},vj=function t(e){for(var r="",n=0;n<e.length;n++){var i=e[n];if(i!=null){var s=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))s=t(i);else{s="";for(var o in i)i[o]&&o&&(s&&(s+=" "),s+=o)}break}default:s=i}s&&(r&&(r+=" "),r+=s)}}return r};var en=ZT({key:"css"}),hV=en.flush,fV=en.hydrate,vV=en.cx,gV=en.merge,mV=en.getRegisteredStyles,yV=en.injectGlobal,SV=en.keyframes,e1=en.css,CV=en.sheet,PV=en.cache;var FE=Me(rr());var gE;function TM(t){return{lang:t?.lang??gE?.lang,message:t?.message,abortEarly:t?.abortEarly??gE?.abortEarly,abortPipeEarly:t?.abortPipeEarly??gE?.abortPipeEarly}}var H3;function $3(t){return H3?.get(t)}var K3;function J3(t){return K3?.get(t)}var G3;function Q3(t,e){return G3?.get(t)?.get(e)}function ya(t){let e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&Object.getPrototypeOf(t)?.constructor?.name)??"null":e}function Ft(t,e,r,n,i){let s=i&&"input"in i?i.input:r.value,o=i?.expected??t.expects??null,a=i?.received??ya(s),c={kind:t.kind,type:t.type,input:s,expected:o,received:a,message:`Invalid ${e}: ${o?`Expected ${o} but r`:"R"}eceived ${a}`,requirement:t.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},u=t.kind==="schema",l=i?.message??t.message??Q3(t.reference,c.lang)??(u?J3(c.lang):null)??n.message??$3(c.lang);l!==void 0&&(c.message=typeof l=="function"?l(c):l),u&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function Vr(t){return{version:1,vendor:"valibot",validate(e){return t["~run"]({value:e},TM())}}}function yE(t,e){let r=[...new Set(t)];return r.length>1?`(${r.join(` ${e} `)})`:r[0]??"never"}var X3=class extends Error{constructor(t){super(t[0].message),this.name="ValiError",this.issues=t}};function SE(t,e){return{kind:"validation",type:"max_value",reference:SE,async:!1,expects:`<=${t instanceof Date?t.toJSON():ya(t)}`,requirement:t,message:e,"~run"(r,n){return r.typed&&!(r.value<=this.requirement)&&Ft(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():ya(r.value)}),r}}}function CE(t,e){return{kind:"validation",type:"min_value",reference:CE,async:!1,expects:`>=${t instanceof Date?t.toJSON():ya(t)}`,requirement:t,message:e,"~run"(r,n){return r.typed&&!(r.value>=this.requirement)&&Ft(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():ya(r.value)}),r}}}function PE(){return{kind:"transformation",type:"readonly",reference:PE,async:!1,"~run"(t){return t}}}function wE(t){return{kind:"transformation",type:"transform",reference:wE,async:!1,operation:t,"~run"(e){return e.value=this.operation(e.value),e}}}function Y3(t,e,r){return typeof t.fallback=="function"?t.fallback(e,r):t.fallback}function AM(t,e,r){return typeof t.default=="function"?t.default(e,r):t.default}function RE(t,e){return{kind:"schema",type:"array",reference:RE,expects:"Array",async:!1,item:t,message:e,get"~standard"(){return Vr(this)},"~run"(r,n){let i=r.value;if(Array.isArray(i)){r.typed=!0,r.value=[];for(let s=0;s<i.length;s++){let o=i[s],a=this.item["~run"]({value:o},n);if(a.issues){let c={type:"array",origin:"value",input:i,key:s,value:o};for(let u of a.issues)u.path?u.path.unshift(c):u.path=[c],r.issues?.push(u);if(r.issues||(r.issues=a.issues),n.abortEarly){r.typed=!1;break}}a.typed||(r.typed=!1),r.value.push(a.value)}}else Ft(this,"type",r,n);return r}}}function Fs(t){return{kind:"schema",type:"boolean",reference:Fs,expects:"boolean",async:!1,message:t,get"~standard"(){return Vr(this)},"~run"(e,r){return typeof e.value=="boolean"?e.typed=!0:Ft(this,"type",e,r),e}}}function EE(t,e){let r=[];for(let n in t)(`${+n}`!==n||typeof t[n]!="string"||!Object.is(t[t[n]],+n))&&r.push(t[n]);return{kind:"schema",type:"enum",reference:EE,expects:yE(r.map(ya),"|"),async:!1,enum:t,options:r,message:e,get"~standard"(){return Vr(this)},"~run"(n,i){return this.options.includes(n.value)?n.typed=!0:Ft(this,"type",n,i),n}}}function mE(t,e){if(typeof t==typeof e){if(t===e||t instanceof Date&&e instanceof Date&&+t==+e)return{value:t};if(t&&e&&t.constructor===Object&&e.constructor===Object){for(let r in e)if(r in t){let n=mE(t[r],e[r]);if(n.issue)return n;t[r]=n.value}else t[r]=e[r];return{value:t}}if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){for(let r=0;r<t.length;r++){let n=mE(t[r],e[r]);if(n.issue)return n;t[r]=n.value}return{value:t}}}return{issue:!0}}function _E(t,e){return{kind:"schema",type:"intersect",reference:_E,expects:yE(t.map(r=>r.expects),"&"),async:!1,options:t,message:e,get"~standard"(){return Vr(this)},"~run"(r,n){if(this.options.length){let i=r.value,s;r.typed=!0;for(let o of this.options){let a=o["~run"]({value:i},n);if(a.issues&&(r.issues?r.issues.push(...a.issues):r.issues=a.issues,n.abortEarly)){r.typed=!1;break}a.typed||(r.typed=!1),r.typed&&(s?s.push(a.value):s=[a.value])}if(r.typed){r.value=s[0];for(let o=1;o<s.length;o++){let a=mE(r.value,s[o]);if(a.issue){Ft(this,"type",r,n,{received:"unknown"});break}r.value=a.value}}}else Ft(this,"type",r,n);return r}}}function IE(t){return{kind:"schema",type:"number",reference:IE,expects:"number",async:!1,message:t,get"~standard"(){return Vr(this)},"~run"(e,r){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:Ft(this,"type",e,r),e}}}function Sa(t,e){return{kind:"schema",type:"object",reference:Sa,expects:"Object",async:!1,entries:t,message:e,get"~standard"(){return Vr(this)},"~run"(r,n){let i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(let s in this.entries){let o=this.entries[s];if(s in i||(o.type==="exact_optional"||o.type==="optional"||o.type==="nullish")&&o.default!==void 0){let a=s in i?i[s]:AM(o),c=o["~run"]({value:a},n);if(c.issues){let u={type:"object",origin:"value",input:i,key:s,value:a};for(let l of c.issues)l.path?l.path.unshift(u):l.path=[u],r.issues?.push(l);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value[s]=c.value}else if(o.fallback!==void 0)r.value[s]=Y3(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(Ft(this,"key",r,n,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),n.abortEarly))break}}else Ft(this,"type",r,n);return r}}}function Te(t,e){return{kind:"schema",type:"optional",reference:Te,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:e,get"~standard"(){return Vr(this)},"~run"(r,n){return r.value===void 0&&(this.default!==void 0&&(r.value=AM(this,r,n)),r.value===void 0)?(r.typed=!0,r):this.wrapped["~run"](r,n)}}}function wr(t){return{kind:"schema",type:"string",reference:wr,expects:"string",async:!1,message:t,get"~standard"(){return Vr(this)},"~run"(e,r){return typeof e.value=="string"?e.typed=!0:Ft(this,"type",e,r),e}}}function Wr(t){return{kind:"schema",type:"undefined",reference:Wr,expects:"undefined",async:!1,message:t,get"~standard"(){return Vr(this)},"~run"(e,r){return e.value===void 0?e.typed=!0:Ft(this,"type",e,r),e}}}function IM(t){let e;if(t)for(let r of t)e?e.push(...r.issues):e=r.issues;return e}function Us(t,e){return{kind:"schema",type:"union",reference:Us,expects:yE(t.map(r=>r.expects),"|"),async:!1,options:t,message:e,get"~standard"(){return Vr(this)},"~run"(r,n){let i,s,o;for(let a of this.options){let c=a["~run"]({value:r.value},n);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{i=c;break}else o?o.push(c):o=[c]}if(i)return i;if(s){if(s.length===1)return s[0];Ft(this,"type",r,n,{issues:IM(s)}),r.typed=!0}else{if(o?.length===1)return o[0];Ft(this,"type",r,n,{issues:IM(o)})}return r}}}function Kn(t,e,r){let n=t["~run"]({value:e},TM(r));if(n.issues)throw new X3(n.issues);return n.value}function Ca(...t){return{...t[0],pipe:t,get"~standard"(){return Vr(this)},"~run"(e,r){for(let n of t)if(n.kind!=="metadata"){if(e.issues&&(n.kind==="schema"||n.kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=n["~run"](e,r))}return e}}}var yn=Me(_M(),1);function OE(t,e,...r){if(!t)throw new TypeError(qM(e,r))}function qM(t,e){let r=0;return t.replace(/%[os]/gu,()=>BM(e[r++]))}function BM(t){return typeof t!="object"||t===null?String(t):Object.prototype.toString.call(t)}var kM;function Z3(t){try{let e=t instanceof Error?t:new Error(BM(t));if(kM){kM(e);return}if(typeof dispatchEvent=="function"&&typeof ErrorEvent=="function")dispatchEvent(new ErrorEvent("error",{error:e,message:e.message}));else if(typeof process<"u"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)}catch{}}var Hr=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:typeof globalThis<"u"?globalThis:void 0,bM;var $r=class{constructor(e,r){this.code=e,this.message=r}warn(...e){var r;try{if(bM){bM({...this,args:e});return}let n=((r=new Error().stack)!==null&&r!==void 0?r:"").replace(/^(?:.+?\n){2}/gu,`
`);console.warn(this.message,...e,n)}catch{}}},e6=new $r("W01","Unable to initialize event under dispatching."),t6=new $r("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),r6=new $r("W03","Assigning any truthy value to 'returnValue' property has no effect."),n6=new $r("W04","Unable to preventDefault on non-cancelable events."),i6=new $r("W05","Unable to preventDefault inside passive event listener invocation."),s6=new $r("W06","An event listener wasn't added because it has been added already: %o, %o"),TE=new $r("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),OM=new $r("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),o6=new $r("W09","Event attribute handler must be a function: %o"),tr=class{static get NONE(){return xM}static get CAPTURING_PHASE(){return MM}static get AT_TARGET(){return DM}static get BUBBLING_PHASE(){return NM}constructor(e,r){Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=r??{};bE.set(this,{type:String(e),bubbles:!!n.bubbles,cancelable:!!n.cancelable,composed:!!n.composed,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}get type(){return xe(this).type}get target(){return xe(this).target}get srcElement(){return xe(this).target}get currentTarget(){return xe(this).currentTarget}composedPath(){let e=xe(this).currentTarget;return e?[e]:[]}get NONE(){return xM}get CAPTURING_PHASE(){return MM}get AT_TARGET(){return DM}get BUBBLING_PHASE(){return NM}get eventPhase(){return xe(this).dispatchFlag?2:0}stopPropagation(){xe(this).stopPropagationFlag=!0}get cancelBubble(){return xe(this).stopPropagationFlag}set cancelBubble(e){e?xe(this).stopPropagationFlag=!0:t6.warn()}stopImmediatePropagation(){let e=xe(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}get bubbles(){return xe(this).bubbles}get cancelable(){return xe(this).cancelable}get returnValue(){return!xe(this).canceledFlag}set returnValue(e){e?r6.warn():zM(xe(this))}preventDefault(){zM(xe(this))}get defaultPrevented(){return xe(this).canceledFlag}get composed(){return xe(this).composed}get isTrusted(){return!1}get timeStamp(){return xe(this).timeStamp}initEvent(e,r=!1,n=!1){let i=xe(this);if(i.dispatchFlag){e6.warn();return}bE.set(this,{...i,type:String(e),bubbles:!!r,cancelable:!!n,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1})}},xM=0,MM=1,DM=2,NM=3,bE=new WeakMap;function xe(t,e="this"){let r=bE.get(t);return OE(r!=null,"'%s' must be an object that Event constructor created, but got another one: %o",e,t),r}function zM(t){if(t.inPassiveListenerFlag){i6.warn();return}if(!t.cancelable){n6.warn();return}t.canceledFlag=!0}Object.defineProperty(tr,"NONE",{enumerable:!0});Object.defineProperty(tr,"CAPTURING_PHASE",{enumerable:!0});Object.defineProperty(tr,"AT_TARGET",{enumerable:!0});Object.defineProperty(tr,"BUBBLING_PHASE",{enumerable:!0});var AE=Object.getOwnPropertyNames(tr.prototype);for(let t=0;t<AE.length;++t)AE[t]!=="constructor"&&Object.defineProperty(tr.prototype,AE[t],{enumerable:!0});typeof Hr<"u"&&typeof Hr.Event<"u"&&Object.setPrototypeOf(tr.prototype,Hr.Event.prototype);function a6(t){return Hr.DOMException?new Hr.DOMException(t,"InvalidStateError"):(Pa==null&&(Pa=class FM extends Error{constructor(r){super(r),Error.captureStackTrace&&Error.captureStackTrace(this,FM)}get code(){return 11}get name(){return"InvalidStateError"}},Object.defineProperties(Pa.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),LM(Pa),LM(Pa.prototype)),new Pa(t))}var Pa,jM={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function LM(t){let e=Object.keys(jM);for(let r=0;r<e.length;++r){let n=e[r],i=jM[n];Object.defineProperty(t,n,{get(){return i},configurable:!0,enumerable:!0})}}var Ra=class extends tr{static wrap(e){return new(VM(e))(e)}constructor(e){super(e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&super.stopPropagation(),e.defaultPrevented&&super.preventDefault(),UM.set(this,{original:e});let r=Object.keys(e);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,WM(e,i))}}stopPropagation(){super.stopPropagation();let{original:e}=Ji(this);"stopPropagation"in e&&e.stopPropagation()}get cancelBubble(){return super.cancelBubble}set cancelBubble(e){super.cancelBubble=e;let{original:r}=Ji(this);"cancelBubble"in r&&(r.cancelBubble=e)}stopImmediatePropagation(){super.stopImmediatePropagation();let{original:e}=Ji(this);"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}get returnValue(){return super.returnValue}set returnValue(e){super.returnValue=e;let{original:r}=Ji(this);"returnValue"in r&&(r.returnValue=e)}preventDefault(){super.preventDefault();let{original:e}=Ji(this);"preventDefault"in e&&e.preventDefault()}get timeStamp(){let{original:e}=Ji(this);return"timeStamp"in e?e.timeStamp:super.timeStamp}},UM=new WeakMap;function Ji(t){let e=UM.get(t);return OE(e!=null,"'this' is expected an Event object, but got",t),e}var Bv=new WeakMap;Bv.set(Object.prototype,Ra);typeof Hr<"u"&&typeof Hr.Event<"u"&&Bv.set(Hr.Event.prototype,Ra);function VM(t){let e=Object.getPrototypeOf(t);if(e==null)return Ra;let r=Bv.get(e);return r==null&&(r=c6(VM(e),e),Bv.set(e,r)),r}function c6(t,e){class r extends t{}let n=Object.keys(e);for(let i=0;i<n.length;++i)Object.defineProperty(r.prototype,n[i],WM(e,n[i]));return r}function WM(t,e){let r=Object.getOwnPropertyDescriptor(t,e);return{get(){let n=Ji(this).original,i=n[e];return typeof i=="function"?i.bind(n):i},set(n){let i=Ji(this).original;i[e]=n},configurable:r.configurable,enumerable:r.enumerable}}function u6(t,e,r,n,i,s){return{callback:t,flags:(e?1:0)|(r?2:0)|(n?4:0),signal:i,signalListener:s}}function l6(t){t.flags|=8}function HM(t){return(t.flags&1)===1}function $M(t){return(t.flags&2)===2}function KM(t){return(t.flags&4)===4}function p6(t){return(t.flags&8)===8}function d6({callback:t},e,r){try{typeof t=="function"?t.call(e,r):typeof t.handleEvent=="function"&&t.handleEvent(r)}catch(n){Z3(n)}}function JM({listeners:t},e,r){for(let n=0;n<t.length;++n)if(t[n].callback===e&&HM(t[n])===r)return n;return-1}function GM(t,e,r,n,i,s){let o;s&&(o=xE.bind(null,t,e,r),s.addEventListener("abort",o));let a=u6(e,r,n,i,s,o);return t.cow?(t.cow=!1,t.listeners=[...t.listeners,a]):t.listeners.push(a),a}function xE(t,e,r){let n=JM(t,e,r);return n!==-1?QM(t,n):!1}function QM(t,e,r=!1){let n=t.listeners[e];return l6(n),n.signal&&n.signal.removeEventListener("abort",n.signalListener),t.cow&&!r?(t.cow=!1,t.listeners=t.listeners.filter((i,s)=>s!==e),!1):(t.listeners.splice(e,1),!0)}function h6(){return Object.create(null)}function XM(t,e){var r;return(r=t[e])!==null&&r!==void 0?r:t[e]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}var Jn=class{constructor(){YM.set(this,h6())}addEventListener(e,r,n){let i=wa(this),{callback:s,capture:o,once:a,passive:c,signal:u,type:l}=f6(e,r,n);if(s==null||u?.aborted)return;let d=XM(i,l),f=JM(d,s,o);if(f!==-1){g6(d.listeners[f],c,a,u);return}GM(d,s,o,c,a,u)}removeEventListener(e,r,n){let i=wa(this),{callback:s,capture:o,type:a}=v6(e,r,n),c=i[a];s!=null&&c&&xE(c,s,o)}dispatchEvent(e){let r=wa(this)[String(e.type)];if(r==null)return!0;let n=e instanceof tr?e:Ra.wrap(e),i=xe(n,"event");if(i.dispatchFlag)throw a6("This event has been in dispatching.");if(i.dispatchFlag=!0,i.target=i.currentTarget=this,!i.stopPropagationFlag){let{cow:s,listeners:o}=r;r.cow=!0;for(let a=0;a<o.length;++a){let c=o[a];if(!p6(c)&&(KM(c)&&QM(r,a,!s)&&(a-=1),i.inPassiveListenerFlag=$M(c),d6(c,this,n),i.inPassiveListenerFlag=!1,i.stopImmediatePropagationFlag))break}s||(r.cow=!1)}return i.target=null,i.currentTarget=null,i.stopImmediatePropagationFlag=!1,i.stopPropagationFlag=!1,i.dispatchFlag=!1,!i.canceledFlag}},YM=new WeakMap;function wa(t,e="this"){let r=YM.get(t);return OE(r!=null,"'%s' must be an object that EventTarget constructor created, but got another one: %o",e,t),r}function f6(t,e,r){var n;return ZM(e),typeof r=="object"&&r!==null?{type:String(t),callback:e??void 0,capture:!!r.capture,passive:!!r.passive,once:!!r.once,signal:(n=r.signal)!==null&&n!==void 0?n:void 0}:{type:String(t),callback:e??void 0,capture:!!r,passive:!1,once:!1,signal:void 0}}function v6(t,e,r){return ZM(e),typeof r=="object"&&r!==null?{type:String(t),callback:e??void 0,capture:!!r.capture}:{type:String(t),callback:e??void 0,capture:!!r}}function ZM(t){if(!(typeof t=="function"||typeof t=="object"&&t!==null&&typeof t.handleEvent=="function")){if(t==null||typeof t=="object"){OM.warn(t);return}throw new TypeError(qM(OM.message,[t]))}}function g6(t,e,r,n){s6.warn(HM(t)?"capture":"bubble",t.callback),$M(t)!==e&&TE.warn("passive"),KM(t)!==r&&TE.warn("once"),t.signal!==n&&TE.warn("signal")}var kE=Object.getOwnPropertyNames(Jn.prototype);for(let t=0;t<kE.length;++t)kE[t]!=="constructor"&&Object.defineProperty(Jn.prototype,kE[t],{enumerable:!0});typeof Hr<"u"&&typeof Hr.EventTarget<"u"&&Object.setPrototypeOf(Jn.prototype,Hr.EventTarget.prototype);function gn(t,e){var r,n;return(n=(r=wa(t,"target")[e])===null||r===void 0?void 0:r.attrCallback)!==null&&n!==void 0?n:null}function mn(t,e,r){r!=null&&typeof r!="function"&&o6.warn(r),typeof r=="function"||typeof r=="object"&&r!==null?m6(t,e,r):y6(t,e)}function m6(t,e,r){let n=XM(wa(t,"target"),String(e));n.attrCallback=r,n.attrListener==null&&(n.attrListener=GM(n,S6(n),!1,!1,!1,void 0))}function y6(t,e){let n=wa(t,"target")[String(e)];n&&n.attrListener&&(xE(n,n.attrListener.callback,!1),n.attrCallback=n.attrListener=void 0)}function S6(t){return function(e){let r=t.attrCallback;typeof r=="function"&&r.call(this,e)}}function eD(t){return!!((typeof t=="function"||typeof t=="object")&&t&&"then"in t&&typeof t.then=="function")}function ME(t,e){return new Promise(r=>{try{let n=t.call(e);eD(n)?n.then(r,()=>r(void 0)):r(n)}catch{r(void 0)}})}var tD=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function C6(t,e){return!!(t===e||tD(t)&&tD(e))}function P6(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!C6(t[r],e[r]))return!1;return!0}function rD(t,e){e===void 0&&(e=P6);var r=null;function n(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(r&&r.lastThis===this&&e(i,r.lastArgs))return r.lastResult;var o=t.apply(this,i);return r={lastResult:o,lastArgs:i,lastThis:this},o}return n.clear=function(){r=null},n}function nD(){let t={};return t.promise=new Promise((e,r)=>{t.reject=r,t.resolve=e}),t}var DE=class{constructor(){this.#t=t=>{let e=this.#r.shift();e&&e.resolve(t),this.#e&&(this.#e.resolve(t),this.#e=void 0)}}#t;#r=[];#e=void 0;get eventListener(){return this.#t}[Symbol.iterator](){return{next:()=>({done:!1,value:this.upcoming()})}}one(){let t=nD();return this.#r.push(t),t.promise}upcoming(){return this.#e||(this.#e=nD()),this.#e.promise}};var iD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ku=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Au=0;Au<iD.length;Au++)ku[iD.charCodeAt(Au)]=Au;var Au;var sD=function(t){var e=t.length*.75,r=t.length,n,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=new ArrayBuffer(e),l=new Uint8Array(u);for(n=0;n<r;n+=4)s=ku[t.charCodeAt(n)],o=ku[t.charCodeAt(n+1)],a=ku[t.charCodeAt(n+2)],c=ku[t.charCodeAt(n+3)],l[i++]=s<<2|o>>4,l[i++]=(o&15)<<4|a>>2,l[i++]=(a&3)<<6|c&63;return u};function w6(t){return typeof t=="function"}function R6(t){return w6(t)?t():t}var Uv={AudioConfig:yn.AudioConfig,OutputFormat:yn.OutputFormat,ResultReason:yn.ResultReason,SpeechConfig:yn.SpeechConfig,SpeechRecognizer:yn.SpeechRecognizer},E6=Ca(_E([Us([Sa({authorizationToken:wr(),subscriptionKey:Te(Wr('"subscriptionKey" must be unset when "authorizationToken" is set.'))}),Sa({authorizationToken:Te(Wr('"authorizationToken" must be unset when "subscriptionKey" is set.')),subscriptionKey:wr()})],'The object must either have either "authorizationToken" or "subscriptionKey" set, but not both.'),Us([Sa({customVoiceHostname:Te(Wr('"customVoiceHostname" must be unest when "region" is set.')),region:wr(),speechRecognitionHostname:Te(Wr('"speechRecognitionHostname" must be unest when "region" is set.')),speechSynthesisHostname:Te(Wr('"speechSynthesisHostname" must be unest when "region" is set.'))}),Sa({customVoiceHostname:Te(Us([wr(),Wr()])),region:Te(Wr('"region" must be unset when "*Hostname" is set.')),speechRecognitionHostname:wr(),speechSynthesisHostname:wr()})],'The object must either have either "region" or "*Hostname" set, but not both.')]),PE()),_6=E6,I6=Te(Fs()),T6=I6,A6=Te(Ca(IE(),CE(1),SE(6e4))),k6=A6,b6=Te(Fs(),!1),O6=b6,x6=Ca(Te(RE(wr()),[]),wE(t=>Object.isFrozen(t)?t:Object.freeze([...t]))),M6=x6,D6=Te(wr()),N6=D6,z6=Te(EE({display:"display",itn:"itn",lexical:"lexical",maskeditn:"maskeditn"}),"display"),j6=z6,{AudioConfig:L6}=Uv,oD=!0;function q6(t){let{audioConfig:e,credentials:r,enableTelemetry:n,initialSilenceTimeout:i,looseEvent:s,referenceGrammars:o,speechRecognitionEndpointId:a,textNormalization:c}=t,{looseEvents:u}=t;return typeof s<"u"&&(console.warn('web-speech-cognitive-services: The option "looseEvent" should be named as "looseEvents".'),u=s),Object.freeze({audioConfig:e||L6.fromDefaultMicrophoneInput(),enableTelemetry:Kn(T6,n),fetchCredentials:async()=>{let l=Kn(_6,await R6(r));return oD&&l.subscriptionKey&&(console.warn("web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead."),oD=!1),l},initialSilenceTimeout:Kn(k6,i),looseEvents:Kn(O6,u),referenceGrammars:Kn(M6,o),speechRecognitionEndpointId:Kn(N6,a),textNormalization:Kn(j6,c)})}function B6(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}var{ResultReason:{RecognizingSpeech:uK,RecognizedSpeech:lK}}=Uv;var{ResultReason:pK,SpeechRecognizer:dK}=Uv,hK=Us([Fs(),Wr()]);var{OutputFormat:fK,SpeechConfig:vK,SpeechRecognizer:gK}=Uv;var F6=class{constructor(t){this.audioContext=t}pause(){this.audioContext&&this.audioContext.suspend(),this.playingUtterance&&this.playingUtterance.dispatchEvent(new CustomEvent("pause"))}resume(){this.audioContext&&this.audioContext.resume(),this.playingUtterance&&this.playingUtterance.dispatchEvent(new CustomEvent("resume"))}async start(t){let e;for(;e=t.shift();)this.playingUtterance=e,await e.play(this.audioContext),this.playingUtterance=null}stop(){this.playingUtterance&&this.playingUtterance.stop(),this.audioContext.state==="suspended"&&this.audioContext.resume()}},U6=class{constructor({audioContext:t,ponyfill:e}){this.consumer=null,this.paused=!1,this.queue=[],this.getAudioContext=rD(()=>t||new e.AudioContext)}pause(){this.paused=!0,this.consumer&&this.consumer.pause()}push(t){this.queue.push(t),this.startConsumer()}resume(){this.paused=!1,this.consumer?this.consumer.resume():this.startConsumer()}get speaking(){return!!this.consumer}async startConsumer(){for(;!this.paused&&this.queue.length&&!this.consumer;)this.consumer=new F6(this.getAudioContext()),await this.consumer.start(this.queue),this.consumer=null}stop(){this.queue.splice(0),this.consumer&&this.consumer.stop()}},Fv=class extends tr{constructor(t){super(t)}};function NE(t){let e=Math.round((t-1)*100);return e>=0&&(e="+"+e),e+"%"}function V6({lang:t,pitch:e=1,rate:r=1,text:n,voice:i,volume:s}){return`<speak version="1.0" xml:lang="${t}">
  <voice xml:lang="${t}" name="${i}">
    <prosody pitch="${NE(e)}" rate="${NE(r)}" volume="${NE(s)}">
      ${n}
    </prosody>
  </voice>
</speak>`}var W6=/^\s*<speak(\s|\/?>)/u,H6=/^\s*<\?xml\s/u;function $6(t){return W6.test(t)||H6.test(t)}var K6="en-US",J6="riff-16khz-16bit-mono-pcm",G6="Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)",Q6="SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMQAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU3LjY0AAAAAAAAAAAAAAAAJAUHAAAAAAAAAYYoRBqpAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMQpg8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";async function X6({deploymentId:t,fetchCredentials:e,lang:r=K6,outputFormat:n=J6,pitch:i,rate:s,text:o,voice:a=G6,volume:c}){if(!o)return sD(Q6);let{authorizationToken:u,region:l,speechSynthesisHostname:d,subscriptionKey:f}=await e();if(u&&f||!u&&!f)throw new Error('Only "authorizationToken" or "subscriptionKey" should be set.');if(l&&d||!l&&!d)throw new Error('Only "region" or "speechSynthesisHostnamename" should be set.');let y=$6(o)?o:V6({lang:r,pitch:i,rate:s,text:o,voice:a,volume:c}),C=d||(t?`${encodeURI(l)}.voice.speech.microsoft.com`:`${encodeURI(l)}.tts.speech.microsoft.com`),S=t?`?deploymentId=${encodeURI(t)}`:"",M=`https://${C}/cognitiveservices/v1${S}`,g=await fetch(M,{headers:{"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":n,...u?{Authorization:`Bearer ${u}`}:{"Ocp-Apim-Subscription-Key":f}},method:"POST",body:y});if(!g.ok)throw new Error(`web-speech-cognitive-services: Failed to syntheis speech, server returned ${g.status}`);return g.arrayBuffer()}function Y6(t,e,r){return t.addEventListener(e,r),()=>t.removeEventListener(e,r)}function Z6(t,e){return new Promise((r,n)=>{let i=t.decodeAudioData(e,r,n);i&&typeof i.then=="function"&&r(i)})}function eU(t,e,r){return new Promise((n,i)=>{let s=new DE,o=new DE,a=Y6(t,"statechange",({target:{state:c}})=>c==="closed"&&s.eventListener());try{r.buffer=e,r.onended=o.eventListener,r.connect(t.destination),r.start(0),Promise.race([s.upcoming(),o.upcoming()]).then(n)}catch(c){i(c)}finally{a()}})}var tU=class extends Jn{constructor(t){super(),this._lang=null,this._pitch=1,this._rate=1,this._voice=null,this._volume=1,this.text=t,this.onboundary=null,this.onend=null,this.onerror=null,this.onmark=null,this.onpause=null,this.onresume=null,this.onstart=null}get lang(){return this._lang}set lang(t){this._lang=t}get onboundary(){return gn(this,"boundary")}set onboundary(t){mn(this,"boundary",t)}get onend(){return gn(this,"end")}set onend(t){mn(this,"end",t)}get onerror(){return gn(this,"error")}set onerror(t){mn(this,"error",t)}get onmark(){return gn(this,"mark")}set onmark(t){mn(this,"mark",t)}get onpause(){return gn(this,"pause")}set onpause(t){mn(this,"pause",t)}get onresume(){return gn(this,"resume")}set onresume(t){mn(this,"resume",t)}get onstart(){return gn(this,"start")}set onstart(t){mn(this,"start",t)}get pitch(){return this._pitch}set pitch(t){this._pitch=t}get rate(){return this._rate}set rate(t){this._rate=t}get voice(){return this._voice}set voice(t){this._voice=t}get volume(){return this._volume}set volume(t){this._volume=t}preload({deploymentId:t,fetchCredentials:e,outputFormat:r}){this.arrayBufferPromise=X6({fetchCredentials:e,deploymentId:t,lang:this.lang||window.navigator.language,outputFormat:r,pitch:this.pitch,rate:this.rate,text:this.text,voice:this.voice&&this.voice.voiceURI,volume:this.volume}),this.arrayBufferPromise.catch()}async play(t){try{this.dispatchEvent(new Fv("start"));let e=t.createBufferSource(),r=await Z6(t,await this.arrayBufferPromise);this._playingSource=e,await eU(t,r,e),this._playingSource=null,this.dispatchEvent(new Fv("end"))}catch(e){this.dispatchEvent(new ErrorEvent("error",{error:"synthesis-failed",message:e.stack}))}}stop(){this._playingSource&&this._playingSource.stop()}},aD=tU,cD=class{constructor({gender:t,lang:e,voiceURI:r}){this._default=!1,this._gender=t,this._lang=e,this._localService=!1,this._name=r,this._voiceURI=r}get default(){return this._default}get gender(){return this._gender}get lang(){return this._lang}get localService(){return this._localService}get name(){return this._name}get voiceURI(){return this._voiceURI}};async function rU({customVoiceHostname:t,deploymentId:e,region:r,subscriptionKey:n}){let i=t||`${r}.customvoice.api.speech.microsoft.com`,s=await fetch(`https://${encodeURI(i)}/api/texttospeech/v2.0/endpoints/${encodeURIComponent(e)}`,{headers:{accept:"application/json","ocp-apim-subscription-key":n}});if(!s.ok)throw new Error("Failed to fetch custom voices");return s.json()}async function nU({customVoiceHostname:t,deploymentId:e,region:r,subscriptionKey:n}){let{models:i}=await rU({customVoiceHostname:t,deploymentId:e,region:r,subscriptionKey:n});return i.map(({properties:{Gender:s},locale:o,name:a})=>new cD({gender:s,lang:o,voiceURI:a})).sort(({name:s},{name:o})=>s>o?1:s<o?-1:0)}async function iU({authorizationToken:t,region:e,speechSynthesisHostname:r,subscriptionKey:n}){let i=r||`${encodeURI(e)}.tts.speech.microsoft.com`,s=await fetch(`https://${i}/cognitiveservices/voices/list`,{headers:{"content-type":"application/json",...t?{authorization:`Bearer ${t}`}:{"Ocp-Apim-Subscription-Key":n}}});if(!s.ok)throw new Error("Failed to fetch voices");return(await s.json()).map(({Gender:a,Locale:c,Name:u})=>new cD({gender:a,lang:c,voiceURI:u})).sort(({name:a},{name:c})=>a>c?1:a<c?-1:0)}var sU="audio-24khz-160kbitrate-mono-mp3",oU=[],aU=t=>{let{audioContext:e,fetchCredentials:r,ponyfill:n={AudioContext:window.AudioContext||window.webkitAudioContext},speechSynthesisDeploymentId:i,speechSynthesisOutputFormat:s=sU}=q6(t);if(!e&&!n.AudioContext)return console.warn("web-speech-cognitive-services: This browser does not support Web Audio and it will not work with Cognitive Services Speech Services."),{};class o extends Jn{constructor(){super(),this.queue=new U6({audioContext:e,ponyfill:n}),this.updateVoices()}cancel(){this.queue.stop()}getVoices(){return oU}get onvoiceschanged(){return gn(this,"voiceschanged")}set onvoiceschanged(c){mn(this,"voiceschanged",c)}pause(){this.queue.pause()}resume(){this.queue.resume()}speak(c){if(!(c instanceof aD))throw new Error("invalid utterance");let{reject:u,resolve:l,promise:d}=B6(),f=({error:y,message:C})=>{let S=new Error(y);S.stack=C,u(S)};return c.addEventListener("end",l),c.addEventListener("error",f),c.preload({deploymentId:i,fetchCredentials:r,outputFormat:s}),this.queue.push(c),d.finally(()=>{c.removeEventListener("end",l),c.removeEventListener("error",f)})}get speaking(){return this.queue.speaking}async updateVoices(){let{customVoiceHostname:c,region:u,speechSynthesisHostname:l,subscriptionKey:d}=await r();i?d&&(console.warn("web-speech-cognitive-services: Listing of custom voice models are only available when using subscription key."),await ME(async()=>{let f=await nU({customVoiceHostname:c,deploymentId:i,region:u,speechSynthesisHostname:l,subscriptionKey:d});this.getVoices=()=>f})):await ME(async()=>{let f=await iU(await r());this.getVoices=()=>f}),this.dispatchEvent(new Fv("voiceschanged"))}}return{speechSynthesis:new o,SpeechSynthesisEvent:Fv,SpeechSynthesisUtterance:aD}},uD=aU;var zE=document.createElement("meta");zE.setAttribute("name","web-speech-cognitive-services");zE.setAttribute("content","version=8.1.3");document.head.appendChild(zE);var Ou=Me(bu(),1),Sn=Me(rr(),1),mD=Me(rr(),1),He=Me(bu(),1),Gi=Me(rr(),1),Vs=Me(bu(),1),Ws=Me(rr(),1),CD=Me(rr(),1),We=Me(bu(),1),Gn=Me(rr(),1),Jv=Me(rr(),1),lU=mD.default.createContext(),xu=lU;function Mu(t,e){if(t==="error"){if(typeof ErrorEvent=="function")return new ErrorEvent(t,e)}else if(typeof CustomEvent=="function")return new CustomEvent(t,e);let r=document.createEvent("Event");return r.initEvent(t,!0,!0),Object.entries(e||{}).forEach(([n,i])=>{r[n]=i}),r}function Wv(){let t,e,r=new Promise((n,i)=>{t=i,e=n});if(!t||!e)throw new Error("Promise is not a ES-compliant and do not run exector immediately");return{promise:r,reject:t,resolve:e}}function yD(t){return Mu("error",{error:t})}async function pU(t,e,r){let{speechSynthesis:n}=t,i=Wv(),s=Wv(),o=Wv();e.addEventListener("end",o.resolve),e.addEventListener("error",s.resolve),e.addEventListener("start",i.resolve),n.speak(e);let a=await Promise.race([s.promise,i.promise]);if(a.type==="error")throw a.error;let c,u=Promise.race([s.promise,o.promise]);r&&r(async()=>{c||(n.cancel(),await u)});let l=await u;if(c=!0,l.type==="error")throw l.error}var dU=class{constructor(t,e,{onEnd:r,onError:n,onStart:i}){this._cancelled=!1,this._deferred=Wv(),this._onEnd=r,this._onError=n,this._onStart=i,this._ponyfill=t,this._speaking=!1,this._utterance=e,this.promise=this._deferred.promise}async cancel(){this._cancelled=!0,this._cancel&&await this._cancel()}speak(){return this._speaking&&console.warn("ASSERTION: QueuedUtterance is already speaking or has spoken."),this._speaking=!0,(async()=>{if(this._cancelled)throw new Error("cancelled");if(await pU(this._ponyfill,this._utterance,t=>{if(this._cancelled)throw t(),new Error("cancelled");this._cancel=t,this._onStart&&this._onStart(Mu("start"))}),this._cancelled)throw new Error("cancelled")})().then(()=>{this._onEnd&&this._onEnd(Mu("end")),this._deferred.resolve()},t=>{this._onError&&this._onError(yD(t)),this._deferred.reject(t)}),this.promise}};function hU(){let t=[],e,r=async()=>{if(!e){e=!0;try{let n;for(;n=t[0];){try{await n.speak()}catch(i){i.message!=="cancelled"&&console.error(i)}t=t.filter(i=>i!==n)}}finally{e=!1}}};return(n,i,{onEnd:s,onError:o,onStart:a}={})=>{if(!(i instanceof n.SpeechSynthesisUtterance))throw new Error("utterance must be instance of the ponyfill");let c=new dU(n,i,{onEnd:s,onError:o,onStart:a});return t=[...t,c],r(),{cancel:()=>c.cancel(),promise:c.promise}}}function SD({speechSynthesis:t,SpeechSynthesisUtterance:e},{lang:r,onBoundary:n,pitch:i,rate:s,text:o,voice:a,volume:c}){let u=new e(o),l;if(typeof a=="function")l=a.call(t,t.getVoices());else{let{voiceURI:d}=a||{};l=d&&[].find.call([].slice.call(t.getVoices()),f=>f.voiceURI===d)}return u.lang=r||"",(i||i===0)&&(u.pitch=i),(s||s===0)&&(u.rate=s),l&&(u.voice=l),(c||c===0)&&(u.volume=c),n&&u.addEventListener("boundary",n),u}function fU(){let{ponyfill:t,synthesize:e}=(0,CD.useContext)(xu);return(r,n)=>(typeof r=="string"&&(r=SD(t,{text:r})),e(t,r,{onStart:n&&(()=>n())}))}var Du=t=>{let{onEnd:e,onError:r,onStart:n,utterance:i}=Kv(t),s=(0,Ws.useRef)(!1),o=fU();return(0,Ws.useEffect)(()=>{if(s.current)return console.warn("react-say: Should not change utterance after synthesis started.");let a,{cancel:c,promise:u}=o(i,()=>{s.current=!0,!a&&n&&n(Mu("start"))});return u.then(()=>!a&&e&&e(Mu("end")),l=>!a&&r&&r(yD(l))),()=>{a=!0,c()}},[]),!1};Du.defaultProps={onEnd:void 0,onError:void 0,onStart:void 0};Du.propTypes={onEnd:Vs.default.func,onError:Vs.default.func,onStart:Vs.default.func};var jE=({ponyfill:t,...e})=>Ws.default.createElement(Qv,{ponyfill:t},Ws.default.createElement(Du,{...e}));jE.defaultProps={...Du.defaultProps,ponyfill:void 0};jE.propTypes={...Du.propTypes,ponyfill:Vs.default.shape({speechSynthesis:Vs.default.any.isRequired,SpeechSynthesisUtterance:Vs.default.any.isRequired})};var Nu=jE,Hv=t=>{let{lang:e,onBoundary:r,onEnd:n,onError:i,onStart:s,pitch:o,rate:a,speak:c,text:u,voice:l,volume:d}=Kv(t,Hv),{ponyfill:f}=(0,Gi.useContext)(xu);c&&!u&&(console.warn('react-say: "speak" prop is being deprecated and renamed to "text".'),u=c);let y=(0,Gi.useMemo)(()=>SD(f,{lang:e,onBoundary:r,pitch:o,rate:a,text:u,voice:l,volume:d}),[e,r,o,f,a,u,l,d]);return Gi.default.createElement(Nu,{onEnd:n,onError:i,onStart:s,ponyfill:f,utterance:y})};Hv.defaultProps={children:void 0,lang:void 0,onBoundary:void 0,onEnd:void 0,onError:void 0,onStart:void 0,pitch:void 0,rate:void 0,speak:void 0,voice:void 0,volume:void 0};Hv.propTypes={children:He.default.any,lang:He.default.string,onBoundary:He.default.func,onEnd:He.default.func,onError:He.default.func,onStart:He.default.func,pitch:He.default.number,rate:He.default.number,speak:He.default.string,text:He.default.string.isRequired,voice:He.default.oneOfType([He.default.any,He.default.func]),volume:He.default.number};var LE=({ponyfill:t,...e})=>Gi.default.createElement(Qv,{ponyfill:t},Gi.default.createElement(Hv,{...e}));LE.defaultProps={...Nu.defaultProps,ponyfill:void 0};LE.propTypes={...Nu.propTypes,ponyfill:He.default.shape({speechSynthesis:He.default.any.isRequired,SpeechSynthesisUtterance:He.default.any.isRequired})};var qE=LE,$v=t=>{let{children:e,disabled:r,lang:n,onBoundary:i,onEnd:s,onError:o,onStart:a,pitch:c,ponyfill:u,rate:l,text:d,voice:f,volume:y}=Kv(t,$v),[C,S]=(0,Gn.useState)(!1),M=(0,Gn.useCallback)(()=>S(!0)),g={lang:n,onBoundary:i,onEnd:v=>{S(!1),s&&s(v)},onError:o,onStart:a,pitch:c,ponyfill:u,rate:l,text:d,voice:f,volume:y};return Gn.default.createElement(Gn.default.Fragment,null,Gn.default.createElement("button",{disabled:typeof r=="boolean"?r:C,onClick:M},e),C&&Gn.default.createElement(qE,{...g}))};$v.defaultProps={children:void 0,disabled:void 0,lang:void 0,onBoundary:void 0,onEnd:void 0,onError:void 0,onStart:void 0,pitch:void 0,ponyfill:void 0,rate:void 0,text:void 0,voice:void 0,volume:void 0};$v.propTypes={children:We.default.any,disabled:We.default.bool,lang:We.default.string,onBoundary:We.default.func,onEnd:We.default.func,onError:We.default.func,onStart:We.default.func,pitch:We.default.number,ponyfill:We.default.shape({speechSynthesis:We.default.any.isRequired,SpeechSynthesisUtterance:We.default.any.isRequired}),rate:We.default.number,text:We.default.string,voice:We.default.oneOfType([We.default.any,We.default.func]),volume:We.default.number};var zu=$v,Vv={ponyfill:!0,saySpeak:!0};function Kv({ponyfill:t,speak:e,speechSynthesis:r,speechSynthesisUtterance:n,text:i,...s},o){return!t&&(r||n)&&(Vv.ponyfill&&(console.warn('react-say: "speechSynthesis" and "speechSynthesisUtterance" props has been renamed to "ponyfill". Please update your code. The deprecated props will be removed in version >= 3.0.0.'),Vv.ponyfill=!1),t={speechSynthesis:r,SpeechSynthesisUtterance:n}),(o===qE||o===zu)&&e&&!i&&(Vv.saySpeak&&(console.warn('react-say: "speak" prop has been renamed to "text". Please update your code. The deprecated props will be removed in version >= 3.0.0.'),Vv.saySpeak=!1),i=e),{ponyfill:t,text:i,...s}}function vU(t,e){let r=(0,Jv.useRef)({first:!0,id:Math.random().toString(36).substr(2,5),unsubscribe:t()});(0,Jv.useEffect)(()=>{let{current:n}=r;return n.first?n.first=!1:n.unsubscribe=t(),()=>{n.unsubscribe&&n.unsubscribe(),n.unsubscribe=null}},e)}function gU(t,e,r,n){vU(()=>{let i=s=>r&&r(s);return t.addEventListener(e,i,n),()=>{r=null,t.removeEventListener(e,i,n)}},[r,e,n,t])}var Gv=t=>{let{children:e,ponyfill:r}=Kv(t,Gv),{ponyfill:n,synthesize:i}=(0,Sn.useContext)(xu)||{},s=r||n||{speechSynthesis:window.speechSynthesis||window.webkitSpeechSynthesis,SpeechSynthesisUtterance:window.SpeechSynthesisUtterance||window.webkitSpeechSynthesisUtterance},o=(0,Sn.useMemo)(()=>i||hU(),[i]),{speechSynthesis:a}=s,[c,u]=(0,Sn.useState)(a.getVoices());gU(a,"voiceschanged",()=>u(a.getVoices()));let l=(0,Sn.useMemo)(()=>({ponyfill:s,synthesize:o,voices:c}),[s,o,c]);return Sn.default.createElement(xu.Provider,{value:l},typeof e=="function"?Sn.default.createElement(xu.Consumer,null,d=>e(d)):e)};Gv.defaultProps={children:void 0,ponyfill:void 0};Gv.propTypes={children:Ou.default.any,ponyfill:Ou.default.shape({speechSynthesis:Ou.default.any,SpeechSynthesisUtterance:Ou.default.any})};var Qv=Gv,PD=qE;var T=Me(ju()),RU=e1({display:"flex","& > section":{flex:1}}),BE=["A quick brown fox","jumped over","the lazy dogs","A quick brown fox jumped over the lazy dogs."],Yv=class extends FE.default.Component{constructor(t){super(t),this.handleAddClick=this.handleAddClick.bind(this),this.handleBingSpeechKeyChange=this.handleBingSpeechKeyChange.bind(this),this.handleBingSpeechKeySubmit=this.handleBingSpeechKeySubmit.bind(this),this.handleClearBingSpeechKey=this.handleClearBingSpeechKey.bind(this),this.handleRemoveFromQueue=this.handleRemoveFromQueue.bind(this),this.handleSayEnd=this.handleRemoveFromQueue.bind(this),this.handleSayUtteranceClick=this.handleSayUtteranceClick.bind(this),this.handleSelectedVoiceChange=this.handleSelectedVoiceChange.bind(this),this.selectCantoneseVoice=this.selectLocalizedVoice.bind(this,"zh-HK"),this.selectJapaneseVoice=this.selectLocalizedVoice.bind(this,"ja-JP"),this.selectVoice=this.selectVoice.bind(this);let r=new URLSearchParams(window.location.search).get("s"),n={speechSynthesis:window.speechSynthesis||window.webkitSpeechSynthesis,SpeechSynthesisUtterance:window.SpeechSynthesisUtterance||window.webkitSpeechSynthesisUtterance};r&&(n=uD({region:"westus",subscriptionKey:r})),this.state={bingSpeechKey:r,ponyfill:n,queued:[],selectedVoiceURI:null}}handleAddClick(t,e,r){let n=Date.now()+Math.random();this.setState(({queued:i})=>({queued:[...i,{id:n,pitch:e,rate:r,text:t}]}))}handleBingSpeechKeyChange({target:{value:t}}){this.setState(()=>({bingSpeechKey:t}))}handleBingSpeechKeySubmit(t){t.preventDefault(),window.location.href=`?s=${encodeURIComponent(this.state.bingSpeechKey)}`}handleClearBingSpeechKey(){this.setState(()=>({bingSpeechKey:""}))}handleRemoveFromQueue(t){this.setState(({queued:e})=>({queued:e.filter(({id:r})=>r!==t)}))}handleSayUtteranceClick(t){let{state:{ponyfill:{SpeechSynthesisUtterance:e}}}=this;this.setState(({queued:r})=>({queued:[...r,{id:Math.random(),text:t,utterance:new e(t)}]}))}handleSelectedVoiceChange({target:{value:t}}){this.setState(()=>({selectedVoiceURI:t}))}selectVoice(t){let{selectedVoiceURI:e}=this.state;return t.find(({voiceURI:r})=>r===e)||t.find(({lang:r})=>r===window.navigator.language)}selectLocalizedVoice(t,e){let{selectedVoiceURI:r}=this.state,n=e.find(({voiceURI:i})=>i===r);return n&&n.lang===t?n:e.find(i=>i.lang===t)}render(){let{state:t}=this;return(0,T.jsx)(Qv,{ponyfill:t.ponyfill,children:({voices:e})=>(0,T.jsxs)("div",{className:RU,children:[(0,T.jsxs)("section",{className:"words",children:[(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Words"})}),(0,T.jsx)("ul",{children:BE.map(r=>(0,T.jsxs)("li",{children:[(0,T.jsx)("button",{onClick:this.handleAddClick.bind(null,r,1,1),children:(0,T.jsx)("span",{role:"img","aria-label":"say",children:"\u{1F4AC}"})}),(0,T.jsx)("button",{onClick:this.handleAddClick.bind(null,r,2,1),children:(0,T.jsx)("span",{role:"img","aria-label":"high pitch",children:"\u{1F4C8}"})}),(0,T.jsx)("button",{onClick:this.handleAddClick.bind(null,r,.5,1),children:(0,T.jsx)("span",{role:"img","aria-label":"low pitch",children:"\u{1F4C9}"})}),(0,T.jsx)("button",{onClick:this.handleAddClick.bind(null,r,1,2),children:(0,T.jsx)("span",{role:"img","aria-label":"fast",children:"\u{1F407}"})}),(0,T.jsx)("button",{onClick:this.handleAddClick.bind(null,r,1,.5),children:(0,T.jsx)("span",{role:"img","aria-label":"slow",children:"\u{1F422}"})}),"\xA0",r]},r))})]}),(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Say button"})}),(0,T.jsx)("ul",{children:BE.map(r=>(0,T.jsx)("li",{children:(0,T.jsx)(zu,{text:r,voice:this.selectVoice,children:r})},r))})]}),(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Say utterance"})}),(0,T.jsx)("ul",{children:BE.map(r=>(0,T.jsx)("li",{children:(0,T.jsx)("button",{onClick:this.handleSayUtteranceClick.bind(null,r),children:r})},r))})]}),(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Other languages"})}),(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:(0,T.jsx)(zu,{text:"\u4E00\u65BC\u8A18\u4F4F\u4E00\u65BC\u8A18\u4F4F\u6BCF\u5929\u5411\u524D\u671B",voice:this.selectCantoneseVoice,children:"\u4E00\u65BC\u8A18\u4F4F\u4E00\u65BC\u8A18\u4F4F\u6BCF\u5929\u5411\u524D\u671B"})}),(0,T.jsx)("li",{children:(0,T.jsx)(zu,{text:"\u304A\u8A95\u751F\u65E5\u304A\u3081\u3067\u3068\u3046",voice:this.selectJapaneseVoice,children:"\u304A\u8A95\u751F\u65E5\u304A\u3081\u3067\u3068\u3046"})})]})]})]}),(0,T.jsxs)("section",{className:"queue",children:[(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Queue"})}),t.queued.length?(0,T.jsx)("ul",{children:t.queued.map(({id:r,pitch:n,rate:i,text:s,utterance:o})=>(0,T.jsxs)("li",{children:[(0,T.jsx)("button",{onClick:this.handleRemoveFromQueue.bind(null,r),children:"\xD7"}),"\xA0",(0,T.jsx)("span",{children:s}),o?(0,T.jsxs)(FE.default.Fragment,{children:[(0,T.jsx)("span",{children:"\xA0(Utterance)"}),(0,T.jsx)(Nu,{onEnd:this.handleSayEnd.bind(null,r),utterance:o})]}):(0,T.jsx)(PD,{onEnd:this.handleSayEnd.bind(null,r),pitch:n,rate:i,text:s,voice:this.selectVoice})]},r))}):(0,T.jsx)("div",{children:"Nothing queued"})]}),(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Available voices"})}),(0,T.jsxs)("select",{onChange:this.handleSelectedVoiceChange,value:t.selectedVoiceURI||"",children:[(0,T.jsxs)("option",{children:["Browser language default (",window.navigator.language,")"]}),e.map(({lang:r,name:n,voiceURI:i})=>(0,T.jsx)("option",{value:i,children:`[${r}] ${n||i}`},i))]})]}),(0,T.jsxs)("article",{children:[(0,T.jsx)("header",{children:(0,T.jsx)("h1",{children:"Other services"})}),(0,T.jsxs)("form",{onSubmit:this.handleBingSpeechKeySubmit,children:[(0,T.jsx)("p",{children:(0,T.jsxs)("label",{children:["Bing Speech key",(0,T.jsx)("input",{onChange:this.handleBingSpeechKeyChange,type:"text",value:t.bingSpeechKey||""}),(0,T.jsx)("button",{onClick:this.handleClearBingSpeechKey,type:"button",children:"\xD7"})]})}),(0,T.jsx)("p",{children:(0,T.jsx)("button",{children:"Save"})})]})]})]})]})})}};var ID=Me(ju());_D.default.render((0,ID.jsx)(Yv,{}),document.getElementById("root"));
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=main.js.map
